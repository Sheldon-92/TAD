# Code Review Skill

---
title: "Code Review"
version: "3.0"
last_updated: "2026-01-07"
tags: [code-review, quality, security, readability]
domains: [engineering]
level: intermediate
estimated_time: "30min"
prerequisites: []
sources:
  - "Google Engineering Practices - Code Review"
  - "SEI CERT Secure Coding"
enforcement: recommended
tad_gates: [Gate3_Implementation_Quality]
---

> æ¥æº: obra/superpowersï¼Œå·²é€‚é… TAD æ¡†æ¶

## TL;DR Quick Checklist

```
1. [ ] åŠŸèƒ½æ­£ç¡® + è¾¹ç•Œ/é”™è¯¯å¤„ç†åˆ°ä½
2. [ ] å¯è¯»æ€§ï¼šå‘½åæ¸…æ™°ã€èŒè´£å•ä¸€ã€æ— é‡å¤
3. [ ] å®‰å…¨ï¼šè¾“å…¥æ ¡éªŒã€æ— æ³¨å…¥/XSSã€æ— æ•æ„Ÿæ³„éœ²
4. [ ] æµ‹è¯•ï¼šå…³é”®è·¯å¾„è¦†ç›– + å›å½’ç”¨ä¾‹
5. [ ] æäº¤ä¸PRï¼šåŸå­åŒ–æäº¤ + æ¸…æ™°è¯´æ˜ + é£é™©ä¸å›æ»š
```

**Red Flags:** å¤§PRï¼ˆ>500è¡Œï¼‰ä¸”æ— æ‹†åˆ†ã€éšå¼å…¨å±€å‰¯ä½œç”¨ã€æ— æµ‹è¯•æˆ–ä»…Happy Pathã€æ— é”™è¯¯å¤„ç†

## è§¦å‘æ¡ä»¶

å½“ Claude å®ŒæˆåŠŸèƒ½å¼€å‘ã€ä¿®å¤ Bugã€æˆ–å‡†å¤‡æäº¤ä»£ç æ—¶ï¼Œè‡ªåŠ¨åº”ç”¨æ­¤ Skillã€‚

---

## æ ¸å¿ƒåŸåˆ™

**"Review early, review often."**ï¼ˆæ—©å®¡æŸ¥ï¼Œå‹¤å®¡æŸ¥ï¼‰

---

## ä½•æ—¶éœ€è¦ä»£ç å®¡æŸ¥

### å¿…é¡»å®¡æŸ¥ âœ…
- ä»»åŠ¡å®Œæˆå
- ä¸»è¦åŠŸèƒ½å¼€å‘å
- åˆå¹¶åˆ°ä¸»åˆ†æ”¯å‰

### å»ºè®®å®¡æŸ¥ ğŸ’¡
- å¡ä½æ—¶å¯»æ±‚å¸®åŠ©
- é‡æ„å‰è¯„ä¼°æ–¹æ¡ˆ
- å¤æ‚ Bug ä¿®å¤å

---

## å®¡æŸ¥æµç¨‹

### Step 1: å‡†å¤‡å®¡æŸ¥èŒƒå›´

```bash
# è·å–åŸºå‡†æäº¤
git merge-base HEAD main

# è·å–å½“å‰æäº¤
git rev-parse HEAD

# æŸ¥çœ‹å˜æ›´
git diff main...HEAD --stat
```

### Step 2: è‡ªæˆ‘å®¡æŸ¥æ¸…å•

åœ¨è¯·æ±‚ä»–äººå®¡æŸ¥å‰ï¼Œå…ˆè‡ªæŸ¥ï¼š

#### åŠŸèƒ½æ­£ç¡®æ€§
- [ ] ä»£ç å®ç°äº†éœ€æ±‚å—ï¼Ÿ
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†äº†å—ï¼Ÿ
- [ ] é”™è¯¯å¤„ç†å®Œæ•´å—ï¼Ÿ

#### ä»£ç è´¨é‡
- [ ] å‘½åæ¸…æ™°æœ‰æ„ä¹‰å—ï¼Ÿ
- [ ] å‡½æ•°èŒè´£å•ä¸€å—ï¼Ÿ
- [ ] æœ‰é‡å¤ä»£ç å—ï¼Ÿ

#### æµ‹è¯•è¦†ç›–
- [ ] æœ‰å•å…ƒæµ‹è¯•å—ï¼Ÿ
- [ ] æµ‹è¯•è¦†ç›–äº†ä¸»è¦è·¯å¾„å—ï¼Ÿ
- [ ] æµ‹è¯•è¦†ç›–äº†è¾¹ç•Œæƒ…å†µå—ï¼Ÿ

#### å®‰å…¨è€ƒè™‘
- [ ] è¾“å…¥éªŒè¯äº†å—ï¼Ÿ
- [ ] SQL æ³¨å…¥é˜²æŠ¤äº†å—ï¼Ÿ
- [ ] XSS é˜²æŠ¤äº†å—ï¼Ÿ
- [ ] æ•æ„Ÿæ•°æ®ä¿æŠ¤äº†å—ï¼Ÿ

### Step 3: è¯·æ±‚å®¡æŸ¥

**å®¡æŸ¥è¯·æ±‚æ¨¡æ¿**ï¼š
```markdown
## å˜æ›´è¯´æ˜
[ç®€è¿°åšäº†ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿™æ ·åš]

## å˜æ›´èŒƒå›´
- åŸºå‡†æäº¤: [commit hash]
- å½“å‰æäº¤: [commit hash]
- å½±å“æ–‡ä»¶: [æ–‡ä»¶åˆ—è¡¨]

## æµ‹è¯•è¯´æ˜
[å¦‚ä½•éªŒè¯è¿™äº›å˜æ›´]

## å…³æ³¨ç‚¹
[å¸Œæœ›å®¡æŸ¥è€…ç‰¹åˆ«å…³æ³¨çš„åœ°æ–¹]
```

---

## Outputs / Evidence / Acceptance

### Required Evidence

| Evidence Type      | Description                      | Location                                 |
|--------------------|----------------------------------|------------------------------------------|
| `review_checklist` | è‡ªæŸ¥/ä»–æŸ¥æ¸…å•å‹¾é€‰                 | `.tad/evidence/review/checklist.md`      |
| `diff_stats`       | å˜æ›´ç»Ÿè®¡ï¼ˆæ–‡ä»¶/è¡Œæ•°/çƒ­ç‚¹ï¼‰        | `.tad/evidence/review/diff-stats.txt`    |
| `findings_report`  | ä¸»è¦é—®é¢˜ä¸å†³ç­–è®°å½•                | `.tad/evidence/review/findings.md`       |

### Acceptance Criteria

```
[ ] åŠŸèƒ½/è´¨é‡/å®‰å…¨/æµ‹è¯•å››ç±»é—®é¢˜å‡è¢«å®¡æŸ¥å¹¶è®°å½•
[ ] æäº¤åŸå­åŒ–ï¼›PR æè¿°æ¸…æ™°ï¼Œå«é£é™©ä¸å›æ»šè¯´æ˜
[ ] é’ˆå¯¹é«˜é£é™©å˜æ›´å®‰æ’åç»­éªŒè¯ï¼ˆæµ‹è¯•/ç°åº¦/ç›‘æ§ï¼‰
```

### Artifacts

| Artifact           | Path                                       |
|--------------------|--------------------------------------------|
| Review Checklist   | `.tad/evidence/review/checklist.md`        |
| Diff Stats         | `.tad/evidence/review/diff-stats.txt`      |
| Findings Report    | `.tad/evidence/review/findings.md`         |


## å¤„ç†å®¡æŸ¥åé¦ˆ

### åé¦ˆä¼˜å…ˆçº§

| çº§åˆ« | å¤„ç†æ–¹å¼ |
|------|----------|
| ğŸ”´ Critical | ç«‹å³ä¿®å¤ï¼Œä¸èƒ½åˆå¹¶ |
| ğŸŸ¡ Important | åˆå¹¶å‰å¿…é¡»ä¿®å¤ |
| ğŸŸ¢ Minor | è®°å½•ä¸‹æ¥ï¼Œå¯ä»¥åç»­å¤„ç† |
| ğŸ’­ Suggestion | è®¨è®ºåå†³å®šæ˜¯å¦é‡‡çº³ |

### åé¦ˆå“åº”åŸåˆ™

1. **æ„Ÿè°¢åé¦ˆ** - å³ä½¿ä¸åŒæ„
2. **ç†è§£æ„å›¾** - ç¡®ä¿ç†è§£é—®é¢˜æœ¬è´¨
3. **è§£é‡Šå†³ç­–** - å¦‚æœæœ‰ä¸åŒæ„è§ï¼Œè¯´æ˜åŸå› 
4. **å¿«é€Ÿå“åº”** - Critical å’Œ Important ç«‹å³å¤„ç†

---

## ä»£ç å®¡æŸ¥æ¸…å•

### æ¶æ„å±‚é¢
```
â–¡ ç¬¦åˆé¡¹ç›®æ¶æ„æ¨¡å¼å—ï¼Ÿ
â–¡ ä¾èµ–æ–¹å‘æ­£ç¡®å—ï¼Ÿ
â–¡ æ¨¡å—è¾¹ç•Œæ¸…æ™°å—ï¼Ÿ
â–¡ æ˜¯å¦å¼•å…¥äº†ä¸å¿…è¦çš„å¤æ‚åº¦ï¼Ÿ
```

### å®ç°å±‚é¢
```
â–¡ ç®—æ³•æ•ˆç‡åˆç†å—ï¼Ÿ
â–¡ æ•°æ®ç»“æ„é€‰æ‹©åˆé€‚å—ï¼Ÿ
â–¡ æœ‰æ½œåœ¨çš„æ€§èƒ½é—®é¢˜å—ï¼Ÿ
â–¡ å¹¶å‘å¤„ç†æ­£ç¡®å—ï¼Ÿ
```

### å¯ç»´æŠ¤æ€§
```
â–¡ ä»£ç æ˜“äºç†è§£å—ï¼Ÿ
â–¡ æ³¨é‡Šå¿…è¦ä¸”å‡†ç¡®å—ï¼Ÿ
â–¡ æœ‰ç¡¬ç¼–ç çš„å€¼å—ï¼Ÿ
â–¡ æ—¥å¿—å’Œç›‘æ§è¶³å¤Ÿå—ï¼Ÿ
```

---

## ä¸ TAD æ¡†æ¶çš„é›†æˆ

åœ¨ TAD çš„å¼€å‘æµç¨‹ä¸­ï¼Œä»£ç å®¡æŸ¥å‘ç”Ÿåœ¨ï¼š

```
Alex è®¾è®¡ â†’ Blake å®ç° â†’ Code Review â†’ Gate éªŒè¯
                              â†“
                        [ æ­¤ Skill ]
```

**TAD Gate å®¡æŸ¥è¦ç‚¹**ï¼š
1. æ˜¯å¦ç¬¦åˆ Alex çš„è®¾è®¡æ–¹æ¡ˆ
2. æ˜¯å¦éµå¾ªäº† MQ çš„çº¦å®š
3. æ˜¯å¦æœ‰å®Œæ•´çš„æµ‹è¯•è¦†ç›–
4. æ˜¯å¦æ›´æ–°äº†ç›¸å…³æ–‡æ¡£

---

## å¸¸è§é—®é¢˜æ¨¡å¼

### ğŸš¨ çº¢æ——ä»£ç 
```javascript
// ç¡¬ç¼–ç çš„é­”æ³•æ•°å­—
if (users.length > 100) { ... }

// è¿‡é•¿çš„å‡½æ•°
function doEverything() { /* 200 è¡Œ */ }

// æ·±å±‚åµŒå¥—
if (a) { if (b) { if (c) { if (d) { ... } } } }

// æ³¨é‡Šæ‰çš„ä»£ç 
// function oldFunction() { ... }
```

### âœ… å¥½çš„å®è·µ
```javascript
// å‘½åå¸¸é‡
const MAX_USERS_PER_PAGE = 100;
if (users.length > MAX_USERS_PER_PAGE) { ... }

// å•ä¸€èŒè´£
function validateUser() { ... }
function saveUser() { ... }

// æ—©æœŸè¿”å›
if (!a) return;
if (!b) return;
// ä¸»é€»è¾‘
```

---

*æ­¤ Skill ç¡®ä¿ Claude åœ¨å…³é”®èŠ‚ç‚¹è¿›è¡Œä»£ç å®¡æŸ¥ï¼Œæé«˜ä»£ç è´¨é‡ã€‚*
