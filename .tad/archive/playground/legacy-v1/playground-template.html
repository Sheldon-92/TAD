<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Design Playground - {{PROJECT_NAME}}</title>
  <style>
    /* ==================== CSS Custom Properties ==================== */
    /* Alex replaces these values from curated design elements */
    :root {
      /* Direction A (default) */
      --color-primary: #5E6AD2;
      --color-secondary: #8A8F98;
      --color-accent: #0070F3;
      --color-background: #FFFFFF;
      --color-surface: #F7F8F8;
      --color-text: #1A1A1A;
      --color-text-secondary: #6B7280;
      --color-border: #E5E7EB;
      --color-error: #EF4444;
      --color-success: #10B981;
      --color-warning: #F59E0B;

      /* Typography - system font stack (recommended web font in comments) */
      /* Recommended: Inter 400/500/600/700 */
      --font-heading: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', sans-serif;
      --font-body: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', sans-serif;
      --font-mono: ui-monospace, 'SF Mono', SFMono-Regular, Menlo, Consolas, monospace;

      /* Font sizes */
      --font-size-h1: 2.25rem;
      --font-size-h2: 1.5rem;
      --font-size-h3: 1.25rem;
      --font-size-body: 1rem;
      --font-size-small: 0.875rem;
      --font-size-caption: 0.75rem;

      /* Spacing */
      --spacing-xs: 4px;
      --spacing-sm: 8px;
      --spacing-md: 16px;
      --spacing-lg: 24px;
      --spacing-xl: 32px;
      --spacing-2xl: 48px;
      --spacing-3xl: 64px;

      /* Borders */
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-full: 9999px;

      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.07), 0 2px 4px -1px rgba(0,0,0,0.04);
      --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.08), 0 4px 6px -4px rgba(0,0,0,0.03);

      /* Transitions */
      --transition-fast: 0.15s ease;
      --transition-normal: 0.2s ease;
      --transition-slow: 0.3s ease;
    }

    [data-theme="dark"] {
      --color-primary: #818CF8;
      --color-secondary: #A1A1AA;
      --color-accent: #60A5FA;
      --color-background: #09090B;
      --color-surface: #18181B;
      --color-text: #FAFAFA;
      --color-text-secondary: #A1A1AA;
      --color-border: #27272A;
      --color-error: #F87171;
      --color-success: #34D399;
      --color-warning: #FBBF24;
    }

    /* ==================== Reset & Base ==================== */
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-body);
      font-size: var(--font-size-body);
      color: var(--color-text);
      background: var(--color-background);
      line-height: 1.6;
      transition: background var(--transition-normal), color var(--transition-normal);
    }

    /* Skip navigation */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--color-primary);
      color: #FFFFFF;
      padding: var(--spacing-sm) var(--spacing-md);
      z-index: 1000;
      transition: top var(--transition-fast);
      text-decoration: none;
      font-weight: 600;
    }
    .skip-link:focus { top: 0; }

    /* ==================== Navigation ==================== */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: var(--color-surface);
      border-bottom: 1px solid var(--color-border);
      z-index: 100;
      padding: var(--spacing-sm) var(--spacing-lg);
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
      flex-wrap: wrap;
    }

    .nav-title {
      font-family: var(--font-heading);
      font-weight: 700;
      font-size: var(--font-size-small);
      color: var(--color-text);
      white-space: nowrap;
    }

    /* Progress stepper */
    .stepper {
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
      font-size: var(--font-size-caption);
    }
    .stepper-step {
      display: flex;
      align-items: center;
      gap: var(--spacing-xs);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-full);
      border: 1px solid var(--color-border);
      color: var(--color-text-secondary);
      font-weight: 500;
      white-space: nowrap;
      transition: all var(--transition-fast);
    }
    .stepper-step.active {
      background: var(--color-primary);
      color: #FFFFFF;
      border-color: var(--color-primary);
    }
    .stepper-step.done {
      background: var(--color-success);
      color: #FFFFFF;
      border-color: var(--color-success);
    }
    .stepper-arrow { color: var(--color-text-secondary); font-size: 10px; }

    /* Nav links */
    .nav-links {
      display: flex;
      gap: var(--spacing-xs);
      margin-left: auto;
      flex-wrap: wrap;
    }
    .nav-links a {
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-sm);
      text-decoration: none;
      color: var(--color-text-secondary);
      font-size: var(--font-size-caption);
      transition: all var(--transition-fast);
    }
    .nav-links a:hover, .nav-links a:focus { background: var(--color-primary); color: #FFFFFF; outline: none; }
    .nav-links a:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

    /* Nav buttons */
    .nav-btn {
      display: inline-flex;
      align-items: center;
      gap: var(--spacing-xs);
      padding: var(--spacing-xs) var(--spacing-sm);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-sm);
      background: var(--color-background);
      color: var(--color-text);
      font-size: var(--font-size-caption);
      cursor: pointer;
      transition: all var(--transition-fast);
      font-family: inherit;
    }
    .nav-btn:hover { border-color: var(--color-primary); }
    .nav-btn:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

    /* ==================== Main Content ==================== */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 80px var(--spacing-lg) var(--spacing-3xl);
    }

    section {
      margin-bottom: var(--spacing-3xl);
      scroll-margin-top: 80px;
    }

    h1 { font-family: var(--font-heading); font-size: var(--font-size-h1); font-weight: 700; margin-bottom: var(--spacing-lg); line-height: 1.2; }
    h2 { font-family: var(--font-heading); font-size: var(--font-size-h2); font-weight: 600; margin-bottom: var(--spacing-md); color: var(--color-text); }
    h3 { font-family: var(--font-heading); font-size: var(--font-size-h3); font-weight: 600; margin-bottom: var(--spacing-sm); color: var(--color-text); }

    /* ==================== Tab System ==================== */
    .tab-group { margin-bottom: var(--spacing-lg); }
    .tab-list {
      display: flex;
      gap: var(--spacing-xs);
      margin-bottom: var(--spacing-md);
      border-bottom: 1px solid var(--color-border);
      padding-bottom: 0;
    }
    .tab-btn {
      padding: var(--spacing-sm) var(--spacing-md);
      border: none;
      background: none;
      color: var(--color-text-secondary);
      font-family: inherit;
      font-size: var(--font-size-small);
      font-weight: 500;
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all var(--transition-fast);
      margin-bottom: -1px;
    }
    .tab-btn:hover { color: var(--color-text); }
    .tab-btn.active { color: var(--color-primary); border-bottom-color: var(--color-primary); }
    .tab-btn:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
    .tab-panel { display: none; }
    .tab-panel.active { display: block; }

    /* ==================== Direction Cards ==================== */
    .direction-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: var(--spacing-lg); }

    .direction-card {
      border: 2px solid var(--color-border);
      border-radius: var(--radius-lg);
      padding: var(--spacing-lg);
      position: relative;
      transition: all var(--transition-normal);
      background: var(--color-surface);
    }
    .direction-card:hover { border-color: var(--color-primary); box-shadow: var(--shadow-md); }
    .direction-card.selected { border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(94, 106, 210, 0.2); }

    .badge-recommended {
      position: absolute;
      top: var(--spacing-md);
      right: var(--spacing-md);
      background: var(--color-warning);
      color: #000;
      padding: 2px var(--spacing-sm);
      border-radius: var(--radius-full);
      font-size: var(--font-size-caption);
      font-weight: 700;
    }

    .direction-title { font-size: var(--font-size-h3); font-weight: 600; margin-bottom: var(--spacing-xs); }
    .direction-desc { color: var(--color-text-secondary); font-size: var(--font-size-small); margin-bottom: var(--spacing-md); }

    .tag-list { display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin-bottom: var(--spacing-sm); }
    .tag {
      display: inline-block;
      padding: 2px var(--spacing-sm);
      background: var(--color-primary);
      color: #FFFFFF;
      border-radius: var(--radius-full);
      font-size: var(--font-size-caption);
      font-weight: 500;
    }
    .tag.subtle { background: var(--color-surface); color: var(--color-text-secondary); border: 1px solid var(--color-border); }

    .used-by { font-size: var(--font-size-caption); color: var(--color-text-secondary); margin-bottom: var(--spacing-md); }

    .direction-actions { display: flex; flex-direction: column; gap: var(--spacing-sm); }

    /* Why This Works expandable */
    .why-toggle {
      background: none;
      border: none;
      color: var(--color-primary);
      font-size: var(--font-size-caption);
      cursor: pointer;
      font-family: inherit;
      text-align: left;
      padding: var(--spacing-xs) 0;
    }
    .why-toggle:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }
    .why-content {
      display: none;
      padding: var(--spacing-sm);
      background: var(--color-background);
      border-radius: var(--radius-sm);
      font-size: var(--font-size-small);
      color: var(--color-text-secondary);
      margin-top: var(--spacing-xs);
    }
    .why-content.open { display: block; }

    /* ==================== Buttons ==================== */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: var(--spacing-xs);
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--radius-md);
      font-family: inherit;
      font-size: var(--font-size-small);
      font-weight: 500;
      cursor: pointer;
      border: 1px solid transparent;
      transition: all var(--transition-fast);
      text-decoration: none;
    }
    .btn:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

    .btn-primary { background: var(--color-primary); color: #FFFFFF; border-color: var(--color-primary); }
    .btn-primary:hover { opacity: 0.9; }
    .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

    .btn-secondary { background: var(--color-surface); color: var(--color-text); border-color: var(--color-border); }
    .btn-secondary:hover { border-color: var(--color-primary); }

    .btn-outline { background: transparent; color: var(--color-primary); border-color: var(--color-primary); }
    .btn-outline:hover { background: var(--color-primary); color: #FFFFFF; }

    .btn-ghost { background: transparent; color: var(--color-text); border-color: transparent; }
    .btn-ghost:hover { background: var(--color-surface); }

    .btn-sm { padding: var(--spacing-xs) var(--spacing-sm); font-size: var(--font-size-caption); }
    .btn-lg { padding: var(--spacing-md) var(--spacing-xl); font-size: var(--font-size-body); }

    /* Skip & Use Recommended */
    .quick-mode {
      text-align: center;
      padding: var(--spacing-md);
      border: 1px dashed var(--color-border);
      border-radius: var(--radius-md);
      margin-bottom: var(--spacing-lg);
      background: var(--color-surface);
    }

    /* ==================== Color Palette Section ==================== */
    .color-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
      gap: var(--spacing-sm);
    }
    .color-swatch {
      border-radius: var(--radius-md);
      overflow: hidden;
      border: 1px solid var(--color-border);
    }
    .color-swatch-preview {
      height: 80px;
      display: flex;
      align-items: flex-end;
      padding: var(--spacing-xs);
    }
    .color-swatch-info {
      padding: var(--spacing-sm);
      background: var(--color-surface);
    }
    .color-swatch-name { font-size: var(--font-size-caption); font-weight: 600; }
    .color-swatch-hex { font-size: var(--font-size-caption); color: var(--color-text-secondary); font-family: var(--font-mono); }
    .color-swatch-contrast { font-size: 10px; color: var(--color-text-secondary); }

    /* Color usage preview */
    .color-usage-preview {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-md);
      margin-top: var(--spacing-lg);
    }
    .color-usage-card {
      padding: var(--spacing-lg);
      border-radius: var(--radius-md);
      border: 1px solid var(--color-border);
    }

    /* ==================== Typography Section ==================== */
    .type-specimen { margin-bottom: var(--spacing-lg); padding: var(--spacing-lg); background: var(--color-surface); border-radius: var(--radius-md); }
    .type-specimen h1 { font-size: var(--font-size-h1); margin-bottom: var(--spacing-sm); }
    .type-specimen h2 { font-size: var(--font-size-h2); margin-bottom: var(--spacing-sm); }
    .type-specimen h3 { font-size: var(--font-size-h3); margin-bottom: var(--spacing-sm); }
    .type-specimen p { margin-bottom: var(--spacing-sm); }
    .type-specimen .caption { font-size: var(--font-size-caption); color: var(--color-text-secondary); }
    .type-specimen code { font-family: var(--font-mono); font-size: var(--font-size-small); background: var(--color-border); padding: 2px 6px; border-radius: var(--radius-sm); }

    .type-meta { display: flex; gap: var(--spacing-lg); flex-wrap: wrap; margin-top: var(--spacing-md); font-size: var(--font-size-caption); color: var(--color-text-secondary); }
    .type-meta dt { font-weight: 600; color: var(--color-text); }

    /* ==================== Components Section ==================== */
    .view-toggle {
      display: flex;
      gap: var(--spacing-xs);
      margin-bottom: var(--spacing-md);
    }

    .component-group { margin-bottom: var(--spacing-xl); }
    .component-group h3 { margin-bottom: var(--spacing-md); }

    .component-row {
      display: flex;
      flex-wrap: wrap;
      gap: var(--spacing-sm);
      align-items: center;
      margin-bottom: var(--spacing-md);
    }

    /* Form controls */
    .input {
      padding: var(--spacing-sm) var(--spacing-md);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      background: var(--color-background);
      color: var(--color-text);
      font-family: inherit;
      font-size: var(--font-size-body);
      transition: border-color var(--transition-fast);
      outline: none;
      width: 240px;
      max-width: 100%;
    }
    .input:focus { border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(94,106,210,0.15); }
    .input::placeholder { color: var(--color-text-secondary); }

    .select { appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%236B7280' d='M3 5l3 3 3-3'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 12px center; padding-right: 32px; }

    .checkbox-label, .radio-label {
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      cursor: pointer;
      font-size: var(--font-size-small);
    }
    .checkbox-label input, .radio-label input { accent-color: var(--color-primary); width: 16px; height: 16px; }

    .switch {
      position: relative;
      width: 44px;
      height: 24px;
      background: var(--color-border);
      border-radius: var(--radius-full);
      cursor: pointer;
      transition: background var(--transition-fast);
      border: none;
    }
    .switch::after {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: #FFFFFF;
      border-radius: 50%;
      transition: transform var(--transition-fast);
    }
    .switch[aria-pressed="true"] { background: var(--color-primary); }
    .switch[aria-pressed="true"]::after { transform: translateX(20px); }
    .switch:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

    /* Cards */
    .card {
      border: 1px solid var(--color-border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      background: var(--color-surface);
      transition: box-shadow var(--transition-normal), transform var(--transition-normal);
    }
    .card:hover { box-shadow: var(--shadow-md); }
    .card-img { width: 100%; height: 160px; background: linear-gradient(135deg, var(--color-primary), var(--color-accent)); display: flex; align-items: center; justify-content: center; color: #FFFFFF; font-weight: 600; }
    .card-body { padding: var(--spacing-md); }
    .card-title { font-weight: 600; margin-bottom: var(--spacing-xs); }
    .card-text { font-size: var(--font-size-small); color: var(--color-text-secondary); }

    .card-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: var(--spacing-md); }

    /* Navigation components */
    .nav-demo { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: var(--radius-md); padding: var(--spacing-md); margin-bottom: var(--spacing-md); }
    .nav-demo-tabs {
      display: flex;
      gap: 0;
      border-bottom: 1px solid var(--color-border);
    }
    .nav-demo-tab {
      padding: var(--spacing-sm) var(--spacing-md);
      border: none;
      background: none;
      color: var(--color-text-secondary);
      font-family: inherit;
      font-size: var(--font-size-small);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
    }
    .nav-demo-tab.active { color: var(--color-primary); border-bottom-color: var(--color-primary); }

    .breadcrumb { display: flex; gap: var(--spacing-xs); font-size: var(--font-size-small); color: var(--color-text-secondary); }
    .breadcrumb a { color: var(--color-primary); text-decoration: none; }
    .breadcrumb span { color: var(--color-text-secondary); }

    /* Feedback components */
    .toast {
      padding: var(--spacing-sm) var(--spacing-md);
      border-radius: var(--radius-md);
      font-size: var(--font-size-small);
      display: flex;
      align-items: center;
      gap: var(--spacing-sm);
      margin-bottom: var(--spacing-sm);
    }
    .toast-success { background: color-mix(in srgb, var(--color-success) 15%, var(--color-background)); border: 1px solid var(--color-success); color: var(--color-text); }
    .toast-error { background: color-mix(in srgb, var(--color-error) 15%, var(--color-background)); border: 1px solid var(--color-error); color: var(--color-text); }
    .toast-warning { background: color-mix(in srgb, var(--color-warning) 15%, var(--color-background)); border: 1px solid var(--color-warning); color: var(--color-text); }

    .alert {
      padding: var(--spacing-md);
      border-radius: var(--radius-md);
      margin-bottom: var(--spacing-sm);
      font-size: var(--font-size-small);
    }
    .alert-info { background: color-mix(in srgb, var(--color-primary) 10%, var(--color-background)); border-left: 3px solid var(--color-primary); }

    /* Tooltip */
    .tooltip-demo {
      position: relative;
      display: inline-block;
    }
    .tooltip-text {
      visibility: hidden;
      background: var(--color-text);
      color: var(--color-background);
      padding: var(--spacing-xs) var(--spacing-sm);
      border-radius: var(--radius-sm);
      font-size: var(--font-size-caption);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      margin-bottom: var(--spacing-xs);
      white-space: nowrap;
      opacity: 0;
      transition: opacity var(--transition-fast);
    }
    .tooltip-demo:hover .tooltip-text, .tooltip-demo:focus-within .tooltip-text { visibility: visible; opacity: 1; }

    /* ==================== Spacing & Borders Section ==================== */
    .spacing-demo {
      display: flex;
      gap: var(--spacing-md);
      flex-wrap: wrap;
      margin-bottom: var(--spacing-lg);
    }
    .spacing-box {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: var(--spacing-xs);
    }
    .spacing-visual {
      background: var(--color-primary);
      opacity: 0.3;
      border-radius: var(--radius-sm);
    }
    .spacing-label { font-size: var(--font-size-caption); color: var(--color-text-secondary); text-align: center; }

    .radius-demo {
      display: flex;
      gap: var(--spacing-md);
      flex-wrap: wrap;
      margin-bottom: var(--spacing-lg);
    }
    .radius-box {
      width: 80px;
      height: 80px;
      background: var(--color-surface);
      border: 2px solid var(--color-primary);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--font-size-caption);
      color: var(--color-text-secondary);
    }

    .shadow-demo {
      display: flex;
      gap: var(--spacing-lg);
      flex-wrap: wrap;
    }
    .shadow-box {
      width: 120px;
      height: 80px;
      background: var(--color-background);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--font-size-caption);
      color: var(--color-text-secondary);
    }

    /* ==================== Motion Section ==================== */
    .motion-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: var(--spacing-md); }

    .motion-card {
      padding: var(--spacing-lg);
      background: var(--color-surface);
      border: 1px solid var(--color-border);
      border-radius: var(--radius-md);
      text-align: center;
      cursor: pointer;
    }
    .motion-card:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

    .motion-hover:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); transition: all var(--transition-normal); }
    .motion-scale:hover { transform: scale(1.02); transition: all var(--transition-normal); }
    .motion-glow:hover { box-shadow: 0 0 20px rgba(94, 106, 210, 0.3); transition: all var(--transition-slow); }

    .motion-label { font-size: var(--font-size-small); color: var(--color-text-secondary); margin-top: var(--spacing-sm); }

    /* Toggle animation */
    .toggle-demo {
      display: flex;
      align-items: center;
      gap: var(--spacing-md);
    }

    /* ==================== Inspiration Sources Sidebar ==================== */
    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.3);
      z-index: 200;
    }
    .sidebar-overlay.open { display: block; }

    .sidebar {
      position: fixed;
      top: 0;
      right: -400px;
      width: 380px;
      max-width: 90vw;
      height: 100vh;
      background: var(--color-background);
      border-left: 1px solid var(--color-border);
      z-index: 201;
      transition: right var(--transition-slow);
      overflow-y: auto;
      padding: var(--spacing-lg);
    }
    .sidebar.open { right: 0; }

    .sidebar-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: var(--spacing-lg);
    }
    .sidebar-title { font-weight: 700; font-size: var(--font-size-h3); }
    .sidebar-subtitle { font-size: var(--font-size-caption); color: var(--color-text-secondary); margin-top: var(--spacing-xs); }

    .sidebar-close {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: var(--color-text-secondary);
      padding: var(--spacing-xs);
      border-radius: var(--radius-sm);
    }
    .sidebar-close:hover { color: var(--color-text); }
    .sidebar-close:focus-visible { outline: 2px solid var(--color-primary); outline-offset: 2px; }

    .source-group { margin-bottom: var(--spacing-lg); }
    .source-group-title {
      font-weight: 600;
      font-size: var(--font-size-small);
      margin-bottom: var(--spacing-sm);
      padding-bottom: var(--spacing-xs);
      border-bottom: 1px solid var(--color-border);
    }
    .source-item {
      padding: var(--spacing-sm) 0;
      border-bottom: 1px solid var(--color-border);
    }
    .source-item:last-child { border-bottom: none; }
    .source-link {
      color: var(--color-primary);
      text-decoration: none;
      font-size: var(--font-size-small);
      font-weight: 500;
    }
    .source-link:hover { text-decoration: underline; }
    .source-rationale { font-size: var(--font-size-caption); color: var(--color-text-secondary); margin-top: 2px; }

    /* ==================== Responsive ==================== */
    @media (max-width: 768px) {
      nav { flex-direction: column; align-items: flex-start; }
      .nav-links { margin-left: 0; }
      .stepper { flex-wrap: wrap; }
      .direction-grid { grid-template-columns: 1fr; }
      .color-grid { grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); }
      .card-grid { grid-template-columns: 1fr; }
      main { padding: 120px var(--spacing-md) var(--spacing-2xl); }
    }
  </style>
</head>
<body>
  <a href="#playground-main" class="skip-link">Skip to main content</a>

  <!-- ==================== Navigation ==================== -->
  <nav aria-label="Playground Navigation">
    <span class="nav-title">Design Playground</span>

    <div class="stepper" aria-label="Progress">
      <span class="stepper-step active" id="step-1">1. Choose Direction</span>
      <span class="stepper-arrow" aria-hidden="true">&#8594;</span>
      <span class="stepper-step" id="step-2">2. Refine Details</span>
      <span class="stepper-arrow" aria-hidden="true">&#8594;</span>
      <span class="stepper-step" id="step-3">3. Confirm &amp; Export</span>
    </div>

    <div class="nav-links">
      <a href="#direction-overview">Directions</a>
      <a href="#color-palette">Colors</a>
      <a href="#typography">Typography</a>
      <a href="#components">Components</a>
      <a href="#spacing-borders">Spacing</a>
      <a href="#motion">Motion</a>
    </div>

    <button class="nav-btn" id="theme-toggle" role="switch" aria-pressed="false" aria-label="Toggle dark mode">
      <span aria-hidden="true">&#9788;</span> Theme
    </button>
    <button class="nav-btn" id="sidebar-toggle" aria-expanded="false" aria-controls="inspiration-sources">
      <span aria-hidden="true">&#9734;</span> Inspiration Sources
    </button>
  </nav>

  <!-- ==================== Main Content ==================== -->
  <main id="playground-main">

    <!-- Section: Direction Overview -->
    <section id="direction-overview" aria-labelledby="direction-heading">
      <h1 id="direction-heading">Choose a Design Direction</h1>
      <p style="color: var(--color-text-secondary); margin-bottom: var(--spacing-lg);">
        Each direction is a complete package: color palette + typography + component style. Choose the one that best fits your project.
      </p>

      <div class="quick-mode">
        <button class="btn btn-outline btn-sm" id="quick-recommended">Skip &amp; Use Recommended</button>
        <p style="font-size: var(--font-size-caption); color: var(--color-text-secondary); margin-top: var(--spacing-xs);">
          Export the recommended direction without detailed review
        </p>
      </div>

      <div class="direction-grid">
        <!-- Direction A -->
        <div class="direction-card" data-direction="a">
          <div class="badge-recommended" aria-label="Recommended">&#9733; Recommended</div>
          <h3 class="direction-title">{{DIRECTION_A_NAME}}</h3>
          <p class="direction-desc">{{DIRECTION_A_DESCRIPTION}}</p>
          <div class="tag-list" aria-label="Best for">
            <span class="tag">{{BEST_FOR_1}}</span>
            <span class="tag">{{BEST_FOR_2}}</span>
          </div>
          <p class="used-by">Used by: {{REFERENCE_PRODUCTS_A}}</p>
          <div class="direction-actions">
            <button class="btn btn-primary choose-direction" data-direction="a">Choose This Direction</button>
            <button class="why-toggle" aria-expanded="false">Why This Works &#9662;</button>
            <div class="why-content" role="region" aria-label="Why this direction works">
              {{WHY_A_WORKS}}
            </div>
          </div>
        </div>

        <!-- Direction B -->
        <div class="direction-card" data-direction="b">
          <h3 class="direction-title">{{DIRECTION_B_NAME}}</h3>
          <p class="direction-desc">{{DIRECTION_B_DESCRIPTION}}</p>
          <div class="tag-list" aria-label="Best for">
            <span class="tag subtle">{{BEST_FOR_3}}</span>
            <span class="tag subtle">{{BEST_FOR_4}}</span>
          </div>
          <p class="used-by">Used by: {{REFERENCE_PRODUCTS_B}}</p>
          <div class="direction-actions">
            <button class="btn btn-secondary choose-direction" data-direction="b">Choose This Direction</button>
            <button class="why-toggle" aria-expanded="false">Why This Works &#9662;</button>
            <div class="why-content" role="region" aria-label="Why this direction works">
              {{WHY_B_WORKS}}
            </div>
          </div>
        </div>

        <!-- Direction C (optional) -->
        <div class="direction-card" data-direction="c">
          <h3 class="direction-title">{{DIRECTION_C_NAME}}</h3>
          <p class="direction-desc">{{DIRECTION_C_DESCRIPTION}}</p>
          <div class="tag-list" aria-label="Best for">
            <span class="tag subtle">{{BEST_FOR_5}}</span>
            <span class="tag subtle">{{BEST_FOR_6}}</span>
          </div>
          <p class="used-by">Used by: {{REFERENCE_PRODUCTS_C}}</p>
          <div class="direction-actions">
            <button class="btn btn-secondary choose-direction" data-direction="c">Choose This Direction</button>
            <button class="why-toggle" aria-expanded="false">Why This Works &#9662;</button>
            <div class="why-content" role="region" aria-label="Why this direction works">
              {{WHY_C_WORKS}}
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section: Color Palette -->
    <section id="color-palette" aria-labelledby="color-heading">
      <h2 id="color-heading">Color Palette</h2>

      <div class="tab-group" data-tab-group="color">
        <div class="tab-list" role="tablist" aria-label="Color palette options">
          <button class="tab-btn active" role="tab" data-tab="color-a" aria-selected="true" aria-controls="panel-color-a">Direction A</button>
          <button class="tab-btn" role="tab" data-tab="color-b" aria-selected="false" aria-controls="panel-color-b">Direction B</button>
          <button class="tab-btn" role="tab" data-tab="color-c" aria-selected="false" aria-controls="panel-color-c">Direction C</button>
        </div>

        <div class="tab-panel active" id="panel-color-a" role="tabpanel" data-tab-panel="color-a">
          <h3>Light Mode</h3>
          <div class="color-grid">
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-primary)"></div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Primary</div>
                <div class="color-swatch-hex">{{PRIMARY_HEX}}</div>
                <div class="color-swatch-contrast">on bg: {{CONTRAST_RATIO}}</div>
              </div>
            </div>
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-secondary)"></div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Secondary</div>
                <div class="color-swatch-hex">{{SECONDARY_HEX}}</div>
              </div>
            </div>
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-accent)"></div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Accent</div>
                <div class="color-swatch-hex">{{ACCENT_HEX}}</div>
              </div>
            </div>
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-background); border: 1px solid var(--color-border);"></div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Background</div>
                <div class="color-swatch-hex">{{BG_HEX}}</div>
              </div>
            </div>
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-surface)"></div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Surface</div>
                <div class="color-swatch-hex">{{SURFACE_HEX}}</div>
              </div>
            </div>
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-text)">
                <span style="color: var(--color-background); font-size: 12px; padding: 4px;">Aa</span>
              </div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Text</div>
                <div class="color-swatch-hex">{{TEXT_HEX}}</div>
              </div>
            </div>
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-error)"></div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Error</div>
                <div class="color-swatch-hex">{{ERROR_HEX}}</div>
              </div>
            </div>
            <div class="color-swatch">
              <div class="color-swatch-preview" style="background: var(--color-success)"></div>
              <div class="color-swatch-info">
                <div class="color-swatch-name">Success</div>
                <div class="color-swatch-hex">{{SUCCESS_HEX}}</div>
              </div>
            </div>
          </div>

          <div class="color-usage-preview">
            <div class="color-usage-card" style="background: var(--color-background);">
              <h3 style="color: var(--color-text); margin-bottom: 8px;">Sample Heading</h3>
              <p style="color: var(--color-text-secondary); font-size: 14px;">Secondary text on background</p>
              <button class="btn btn-primary" style="margin-top: 12px;">Primary Action</button>
            </div>
            <div class="color-usage-card" style="background: var(--color-surface);">
              <h3 style="color: var(--color-text); margin-bottom: 8px;">Card Title</h3>
              <p style="color: var(--color-text-secondary); font-size: 14px;">Content on surface</p>
              <button class="btn btn-outline" style="margin-top: 12px;">Secondary Action</button>
            </div>
          </div>
        </div>

        <div class="tab-panel" id="panel-color-b" role="tabpanel" data-tab-panel="color-b">
          <p style="color: var(--color-text-secondary);">Direction B colors will be populated by Alex based on curated selections.</p>
        </div>
        <div class="tab-panel" id="panel-color-c" role="tabpanel" data-tab-panel="color-c">
          <p style="color: var(--color-text-secondary);">Direction C colors will be populated by Alex based on curated selections.</p>
        </div>
      </div>
    </section>

    <!-- Section: Typography -->
    <section id="typography" aria-labelledby="type-heading">
      <h2 id="type-heading">Typography</h2>

      <div class="tab-group" data-tab-group="type">
        <div class="tab-list" role="tablist" aria-label="Typography options">
          <button class="tab-btn active" role="tab" data-tab="type-a" aria-selected="true" aria-controls="panel-type-a">Direction A</button>
          <button class="tab-btn" role="tab" data-tab="type-b" aria-selected="false" aria-controls="panel-type-b">Direction B</button>
          <button class="tab-btn" role="tab" data-tab="type-c" aria-selected="false" aria-controls="panel-type-c">Direction C</button>
        </div>

        <div class="tab-panel active" id="panel-type-a" role="tabpanel" data-tab-panel="type-a">
          <div class="type-specimen">
            <h1 style="font-family: var(--font-heading);">Heading Level 1 - {{FONT_HEADING}}</h1>
            <h2 style="font-family: var(--font-heading);">Heading Level 2</h2>
            <h3 style="font-family: var(--font-heading);">Heading Level 3</h3>
            <p style="font-family: var(--font-body);">Body text in {{FONT_BODY}}. The quick brown fox jumps over the lazy dog. 快速的棕色狐狸跳过了懒狗。</p>
            <p class="caption" style="font-family: var(--font-body);">Caption text for annotations and metadata</p>
            <p><code style="font-family: var(--font-mono);">const code = 'monospace';</code></p>
          </div>
          <div class="type-meta">
            <div><dt>Heading</dt><dd>{{FONT_HEADING}} / {{HEADING_FALLBACK}}</dd></div>
            <div><dt>Body</dt><dd>{{FONT_BODY}} / {{BODY_FALLBACK}}</dd></div>
            <div><dt>Scale</dt><dd>36 / 24 / 20 / 16 / 14 / 12</dd></div>
          </div>
        </div>
        <div class="tab-panel" id="panel-type-b" role="tabpanel" data-tab-panel="type-b">
          <p style="color: var(--color-text-secondary);">Direction B typography will be populated by Alex.</p>
        </div>
        <div class="tab-panel" id="panel-type-c" role="tabpanel" data-tab-panel="type-c">
          <p style="color: var(--color-text-secondary);">Direction C typography will be populated by Alex.</p>
        </div>
      </div>
    </section>

    <!-- Section: Components -->
    <section id="components" aria-labelledby="components-heading">
      <h2 id="components-heading">Components</h2>

      <div class="view-toggle">
        <button class="btn btn-sm btn-primary" id="view-grid" aria-pressed="true">Grid View: See all at once</button>
        <button class="btn btn-sm btn-secondary" id="view-interactive" aria-pressed="false">Interactive: Test hover/focus</button>
      </div>

      <!-- Buttons -->
      <div class="component-group">
        <h3>Buttons</h3>
        <div class="component-row">
          <button class="btn btn-primary">Primary</button>
          <button class="btn btn-secondary">Secondary</button>
          <button class="btn btn-outline">Outline</button>
          <button class="btn btn-ghost">Ghost</button>
          <button class="btn btn-primary" disabled>Disabled</button>
        </div>
        <div class="component-row">
          <button class="btn btn-primary btn-sm">Small</button>
          <button class="btn btn-primary">Default</button>
          <button class="btn btn-primary btn-lg">Large</button>
        </div>
      </div>

      <!-- Cards -->
      <div class="component-group">
        <h3>Cards</h3>
        <div class="card-grid">
          <div class="card">
            <div class="card-img">Image</div>
            <div class="card-body">
              <div class="card-title">Card with Image</div>
              <div class="card-text">A brief description of the card content goes here.</div>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <div class="card-title">Text-Only Card</div>
              <div class="card-text">Cards without images work well for data-dense layouts and dashboards.</div>
              <button class="btn btn-outline btn-sm" style="margin-top: 12px;">Learn More</button>
            </div>
          </div>
          <div class="card">
            <div class="card-body">
              <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                <div style="width: 40px; height: 40px; border-radius: 50%; background: var(--color-primary);"></div>
                <div>
                  <div class="card-title" style="margin-bottom: 0;">List Card Item</div>
                  <div class="card-text">Compact list style</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Forms -->
      <div class="component-group">
        <h3>Form Controls</h3>
        <div class="component-row" style="flex-direction: column; align-items: flex-start; gap: 16px;">
          <div>
            <label for="demo-input" style="display: block; font-size: var(--font-size-small); font-weight: 500; margin-bottom: 4px;">Text Input</label>
            <input type="text" id="demo-input" class="input" placeholder="Enter your email...">
          </div>
          <div>
            <label for="demo-select" style="display: block; font-size: var(--font-size-small); font-weight: 500; margin-bottom: 4px;">Select</label>
            <select id="demo-select" class="input select">
              <option>Option 1</option>
              <option>Option 2</option>
              <option>Option 3</option>
            </select>
          </div>
          <div class="component-row">
            <label class="checkbox-label"><input type="checkbox" checked> Checkbox option</label>
            <label class="checkbox-label"><input type="checkbox"> Another option</label>
          </div>
          <div class="component-row">
            <label class="radio-label"><input type="radio" name="demo-radio" checked> Radio A</label>
            <label class="radio-label"><input type="radio" name="demo-radio"> Radio B</label>
          </div>
          <div class="toggle-demo">
            <span style="font-size: var(--font-size-small);">Toggle Switch</span>
            <button class="switch" role="switch" aria-pressed="false" aria-label="Toggle setting"></button>
          </div>
        </div>
      </div>

      <!-- Navigation -->
      <div class="component-group">
        <h3>Navigation</h3>
        <div class="nav-demo">
          <div class="nav-demo-tabs">
            <button class="nav-demo-tab active">Dashboard</button>
            <button class="nav-demo-tab">Projects</button>
            <button class="nav-demo-tab">Settings</button>
          </div>
        </div>
        <div class="breadcrumb">
          <a href="#">Home</a>
          <span>/</span>
          <a href="#">Projects</a>
          <span>/</span>
          <span>Current Page</span>
        </div>
      </div>

      <!-- Feedback -->
      <div class="component-group">
        <h3>Feedback</h3>
        <div class="toast toast-success">&#10003; Changes saved successfully</div>
        <div class="toast toast-error">&#10007; Failed to save changes</div>
        <div class="toast toast-warning">&#9888; Your session will expire soon</div>
        <div class="alert alert-info">
          <strong>Note:</strong> This is an informational alert with additional context.
        </div>
        <div style="margin-top: var(--spacing-md);">
          <div class="tooltip-demo" tabindex="0">
            <button class="btn btn-secondary btn-sm">Hover for tooltip</button>
            <span class="tooltip-text" role="tooltip">Helpful tooltip text</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Section: Spacing & Borders -->
    <section id="spacing-borders" aria-labelledby="spacing-heading">
      <h2 id="spacing-heading">Spacing &amp; Borders</h2>

      <h3>Spacing Scale</h3>
      <div class="spacing-demo">
        <div class="spacing-box"><div class="spacing-visual" style="width: 4px; height: 32px;"></div><div class="spacing-label">xs<br>4px</div></div>
        <div class="spacing-box"><div class="spacing-visual" style="width: 8px; height: 32px;"></div><div class="spacing-label">sm<br>8px</div></div>
        <div class="spacing-box"><div class="spacing-visual" style="width: 16px; height: 32px;"></div><div class="spacing-label">md<br>16px</div></div>
        <div class="spacing-box"><div class="spacing-visual" style="width: 24px; height: 32px;"></div><div class="spacing-label">lg<br>24px</div></div>
        <div class="spacing-box"><div class="spacing-visual" style="width: 32px; height: 32px;"></div><div class="spacing-label">xl<br>32px</div></div>
        <div class="spacing-box"><div class="spacing-visual" style="width: 48px; height: 32px;"></div><div class="spacing-label">2xl<br>48px</div></div>
        <div class="spacing-box"><div class="spacing-visual" style="width: 64px; height: 32px;"></div><div class="spacing-label">3xl<br>64px</div></div>
      </div>

      <h3>Border Radius</h3>
      <div class="radius-demo">
        <div class="radius-box" style="border-radius: var(--radius-sm);">sm<br>4px</div>
        <div class="radius-box" style="border-radius: var(--radius-md);">md<br>8px</div>
        <div class="radius-box" style="border-radius: var(--radius-lg);">lg<br>12px</div>
        <div class="radius-box" style="border-radius: var(--radius-full);">full</div>
      </div>

      <h3>Shadows</h3>
      <div class="shadow-demo">
        <div class="shadow-box" style="box-shadow: var(--shadow-sm);">sm</div>
        <div class="shadow-box" style="box-shadow: var(--shadow-md);">md</div>
        <div class="shadow-box" style="box-shadow: var(--shadow-lg);">lg</div>
      </div>
    </section>

    <!-- Section: Motion -->
    <section id="motion" aria-labelledby="motion-heading">
      <h2 id="motion-heading">Motion &amp; Animation</h2>

      <div class="motion-grid">
        <div class="motion-card motion-hover" aria-label="Hover lift effect demo">
          <div style="font-size: 32px; margin-bottom: 8px;" aria-hidden="true">&#8593;</div>
          <div class="motion-label">Hover Lift</div>
          <div style="font-size: 11px; color: var(--color-text-secondary);">translateY(-2px) + shadow</div>
        </div>
        <div class="motion-card motion-scale" aria-label="Scale effect demo">
          <div style="font-size: 32px; margin-bottom: 8px;" aria-hidden="true">&#8596;</div>
          <div class="motion-label">Scale Up</div>
          <div style="font-size: 11px; color: var(--color-text-secondary);">scale(1.02)</div>
        </div>
        <div class="motion-card motion-glow" aria-label="Glow effect demo">
          <div style="font-size: 32px; margin-bottom: 8px;" aria-hidden="true">&#10022;</div>
          <div class="motion-label">Soft Glow</div>
          <div style="font-size: 11px; color: var(--color-text-secondary);">box-shadow glow</div>
        </div>
        <div class="motion-card" aria-label="Toggle switch animation demo">
          <div class="toggle-demo" style="justify-content: center;">
            <button class="switch" role="switch" aria-pressed="false" aria-label="Demo toggle"></button>
          </div>
          <div class="motion-label">Toggle Switch</div>
          <div style="font-size: 11px; color: var(--color-text-secondary);">0.15s ease transition</div>
        </div>
      </div>
    </section>

  </main>

  <!-- ==================== Inspiration Sources Sidebar ==================== -->
  <div class="sidebar-overlay" id="sidebar-overlay" aria-hidden="true"></div>
  <aside class="sidebar" id="inspiration-sources" aria-label="Inspiration Sources" aria-hidden="true">
    <div class="sidebar-header">
      <div>
        <div class="sidebar-title">Inspiration Sources</div>
        <div class="sidebar-subtitle">Design backed by industry best practices</div>
      </div>
      <button class="sidebar-close" id="sidebar-close" aria-label="Close sidebar">&times;</button>
    </div>

    <!-- Source groups populated by Alex -->
    <div class="source-group">
      <div class="source-group-title">Direction A: {{DIRECTION_A_NAME}}</div>
      <div class="source-item">
        <a class="source-link" href="{{SOURCE_URL_1}}" target="_blank" rel="noopener">{{SOURCE_NAME_1}}</a>
        <div class="source-rationale">{{SOURCE_RATIONALE_1}}</div>
      </div>
      <div class="source-item">
        <a class="source-link" href="{{SOURCE_URL_2}}" target="_blank" rel="noopener">{{SOURCE_NAME_2}}</a>
        <div class="source-rationale">{{SOURCE_RATIONALE_2}}</div>
      </div>
    </div>

    <div class="source-group">
      <div class="source-group-title">Direction B: {{DIRECTION_B_NAME}}</div>
      <div class="source-item">
        <a class="source-link" href="{{SOURCE_URL_3}}" target="_blank" rel="noopener">{{SOURCE_NAME_3}}</a>
        <div class="source-rationale">{{SOURCE_RATIONALE_3}}</div>
      </div>
    </div>

    <div class="source-group">
      <div class="source-group-title">Direction C: {{DIRECTION_C_NAME}}</div>
      <div class="source-item">
        <a class="source-link" href="{{SOURCE_URL_4}}" target="_blank" rel="noopener">{{SOURCE_NAME_4}}</a>
        <div class="source-rationale">{{SOURCE_RATIONALE_4}}</div>
      </div>
    </div>
  </aside>

  <!-- ==================== JavaScript ==================== -->
  <script>
    // Tab switching
    document.querySelectorAll('[data-tab-group]').forEach(function(group) {
      var tabs = group.querySelectorAll('[role="tab"]');
      var panels = group.querySelectorAll('[role="tabpanel"]');

      tabs.forEach(function(tab) {
        tab.addEventListener('click', function() {
          var target = tab.getAttribute('data-tab');
          tabs.forEach(function(t) {
            t.classList.remove('active');
            t.setAttribute('aria-selected', 'false');
          });
          panels.forEach(function(p) { p.classList.remove('active'); });
          tab.classList.add('active');
          tab.setAttribute('aria-selected', 'true');
          var panel = group.querySelector('[data-tab-panel="' + target + '"]');
          if (panel) panel.classList.add('active');
        });

        tab.addEventListener('keydown', function(e) {
          var tabsArr = Array.from(tabs);
          var idx = tabsArr.indexOf(tab);
          if (e.key === 'ArrowRight') { tabsArr[(idx + 1) % tabsArr.length].focus(); tabsArr[(idx + 1) % tabsArr.length].click(); }
          if (e.key === 'ArrowLeft') { tabsArr[(idx - 1 + tabsArr.length) % tabsArr.length].focus(); tabsArr[(idx - 1 + tabsArr.length) % tabsArr.length].click(); }
        });
      });
    });

    // Theme toggle
    var themeToggle = document.getElementById('theme-toggle');
    themeToggle.addEventListener('click', function() {
      var html = document.documentElement;
      var current = html.getAttribute('data-theme');
      var next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      themeToggle.setAttribute('aria-pressed', next === 'dark' ? 'true' : 'false');
      themeToggle.querySelector('span').textContent = next === 'dark' ? '\u263D' : '\u2600';
    });

    // Sidebar toggle
    var sidebarToggle = document.getElementById('sidebar-toggle');
    var sidebar = document.getElementById('inspiration-sources');
    var sidebarOverlay = document.getElementById('sidebar-overlay');
    var sidebarClose = document.getElementById('sidebar-close');

    function openSidebar() {
      sidebar.classList.add('open');
      sidebar.setAttribute('aria-hidden', 'false');
      sidebarOverlay.classList.add('open');
      sidebarOverlay.setAttribute('aria-hidden', 'false');
      sidebarToggle.setAttribute('aria-expanded', 'true');
      document.getElementById('playground-main').setAttribute('inert', '');
      sidebarClose.focus();
    }
    function closeSidebar() {
      sidebar.classList.remove('open');
      sidebar.setAttribute('aria-hidden', 'true');
      sidebarOverlay.classList.remove('open');
      sidebarOverlay.setAttribute('aria-hidden', 'true');
      sidebarToggle.setAttribute('aria-expanded', 'false');
      document.getElementById('playground-main').removeAttribute('inert');
      sidebarToggle.focus();
    }

    sidebarToggle.addEventListener('click', function() {
      sidebar.classList.contains('open') ? closeSidebar() : openSidebar();
    });
    sidebarClose.addEventListener('click', closeSidebar);
    sidebarOverlay.addEventListener('click', closeSidebar);
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && sidebar.classList.contains('open')) closeSidebar();
    });

    // "Why This Works" toggle
    document.querySelectorAll('.why-toggle').forEach(function(btn) {
      btn.addEventListener('click', function() {
        var content = btn.nextElementSibling;
        var isOpen = content.classList.contains('open');
        content.classList.toggle('open');
        btn.setAttribute('aria-expanded', !isOpen);
        btn.innerHTML = isOpen ? 'Why This Works &#9662;' : 'Why This Works &#9652;';
      });
    });

    // Switch toggles
    document.querySelectorAll('.switch').forEach(function(sw) {
      sw.addEventListener('click', function() {
        var pressed = sw.getAttribute('aria-pressed') === 'true';
        sw.setAttribute('aria-pressed', !pressed);
      });
      sw.addEventListener('keydown', function(e) {
        if (e.key === ' ' || e.key === 'Enter') { e.preventDefault(); sw.click(); }
      });
    });

    // Component view toggle
    var viewGrid = document.getElementById('view-grid');
    var viewInteractive = document.getElementById('view-interactive');
    var componentsSection = document.getElementById('components');

    viewGrid.addEventListener('click', function() {
      viewGrid.classList.add('btn-primary'); viewGrid.classList.remove('btn-secondary');
      viewInteractive.classList.remove('btn-primary'); viewInteractive.classList.add('btn-secondary');
      viewGrid.setAttribute('aria-pressed', 'true');
      viewInteractive.setAttribute('aria-pressed', 'false');
      componentsSection.classList.remove('interactive-mode');
    });
    viewInteractive.addEventListener('click', function() {
      viewInteractive.classList.add('btn-primary'); viewInteractive.classList.remove('btn-secondary');
      viewGrid.classList.remove('btn-primary'); viewGrid.classList.add('btn-secondary');
      viewInteractive.setAttribute('aria-pressed', 'true');
      viewGrid.setAttribute('aria-pressed', 'false');
      componentsSection.classList.add('interactive-mode');
    });

    // Direction card selection
    document.querySelectorAll('.choose-direction').forEach(function(btn) {
      btn.addEventListener('click', function() {
        var direction = btn.getAttribute('data-direction');
        document.querySelectorAll('.direction-card').forEach(function(c) { c.classList.remove('selected'); });
        btn.closest('.direction-card').classList.add('selected');
        // Update stepper
        document.getElementById('step-1').classList.remove('active');
        document.getElementById('step-1').classList.add('done');
        document.getElementById('step-2').classList.add('active');
      });
    });

    // Quick recommended
    document.getElementById('quick-recommended').addEventListener('click', function() {
      document.querySelectorAll('.direction-card').forEach(function(c) { c.classList.remove('selected'); });
      document.querySelector('.direction-card[data-direction="a"]').classList.add('selected');
      document.getElementById('step-1').classList.remove('active');
      document.getElementById('step-1').classList.add('done');
      document.getElementById('step-2').classList.remove('active');
      document.getElementById('step-2').classList.add('done');
      document.getElementById('step-3').classList.add('active');
    });

    // Nav demo tabs
    document.querySelectorAll('.nav-demo-tab').forEach(function(tab) {
      tab.addEventListener('click', function() {
        tab.parentElement.querySelectorAll('.nav-demo-tab').forEach(function(t) { t.classList.remove('active'); });
        tab.classList.add('active');
      });
    });
  </script>
</body>
</html>
