# TAD v3.1 ç»¼åˆå‡çº§æ–¹æ¡ˆ
## ä»å£°æ˜å¼åˆ°è¯æ®å¼ + Humanèµ‹èƒ½ + æŒç»­å­¦ä¹ 

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-25
**é€‚ç”¨èŒƒå›´**: TAD Framework å…¨é¢å‡çº§
**ç›®æ ‡**: è´¨é‡æå‡ + Humanæˆé•¿ + ç³»ç»Ÿè¿›åŒ–

---

## ğŸ“‹ ç›®å½•

- [ç¬¬ä¸€éƒ¨åˆ†ï¼šæ‰§è¡Œæ‘˜è¦](#ç¬¬ä¸€éƒ¨åˆ†æ‰§è¡Œæ‘˜è¦)
- [ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ](#ç¬¬äºŒéƒ¨åˆ†æ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ)
- [ç¬¬ä¸‰éƒ¨åˆ†ï¼šTAD v3.1 ä¸‰å¤§æ”¯æŸ±](#ç¬¬ä¸‰éƒ¨åˆ†tad-v31-ä¸‰å¤§æ”¯æŸ±)
- [ç¬¬å››éƒ¨åˆ†ï¼šåˆ†é˜¶æ®µå®æ–½è·¯çº¿å›¾](#ç¬¬å››éƒ¨åˆ†åˆ†é˜¶æ®µå®æ–½è·¯çº¿å›¾)
- [ç¬¬äº”éƒ¨åˆ†ï¼šé…ç½®æ–‡ä»¶å®Œæ•´æ›´æ–°](#ç¬¬äº”éƒ¨åˆ†é…ç½®æ–‡ä»¶å®Œæ•´æ›´æ–°)
- [ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡æ¿æ–‡ä»¶æ›´æ–°](#ç¬¬å…­éƒ¨åˆ†æ¨¡æ¿æ–‡ä»¶æ›´æ–°)
- [ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæˆåŠŸæŒ‡æ ‡ä¸éªŒè¯](#ç¬¬ä¸ƒéƒ¨åˆ†æˆåŠŸæŒ‡æ ‡ä¸éªŒè¯)
- [ç¬¬å…«éƒ¨åˆ†ï¼šé£é™©ç®¡ç†ä¸å›æ»š](#ç¬¬å…«éƒ¨åˆ†é£é™©ç®¡ç†ä¸å›æ»š)
- [ç¬¬ä¹éƒ¨åˆ†ï¼šå¿«é€Ÿå¯åŠ¨æŒ‡å—](#ç¬¬ä¹éƒ¨åˆ†å¿«é€Ÿå¯åŠ¨æŒ‡å—)

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šæ‰§è¡Œæ‘˜è¦

### 1.1 ä¸ºä»€ä¹ˆè¦å‡çº§ï¼Ÿ

åŸºäºMenuSnapé¡¹ç›®çš„200+æ–‡æ¡£æ·±åº¦åˆ†æï¼Œå‘ç°TAD v3.0çš„**æ ¹æœ¬æ€§é—®é¢˜**ï¼š

```
æ ¸å¿ƒå‡è®¾é”™è¯¯ï¼šAIè‡ªæŸ¥ + AIäº’æŸ¥ = è´¨é‡ä¿è¯
å®é™…æƒ…å†µï¼šAIä¼šçŠ¯ç³»ç»Ÿæ€§ç›²ç‚¹é”™è¯¯ï¼Œè‡ªæŸ¥å’Œäº’æŸ¥éƒ½æ— æ³•å‘ç°

ç»“æœï¼š
âŒ å‡½æ•°ä¸å­˜åœ¨ - Gate 2/3æœªæ‹¦æˆªï¼ˆAIå‡è®¾å‡½æ•°å­˜åœ¨ï¼‰
âŒ æ•°æ®æµæ–­è£‚ - Gate 2æœªæ‹¦æˆªï¼ˆAIå¿½ç•¥äº†å‰ç«¯æ˜¾ç¤ºï¼‰
âŒ åŒçŠ¶æ€ä¸åŒæ­¥ - Gate 1æœªæ‹¦æˆªï¼ˆAIæ²¡æ„è¯†åˆ°æ˜¯é—®é¢˜ï¼‰
```

### 1.2 TAD v3.1 æ˜¯ä»€ä¹ˆï¼Ÿ

**ä¸‰ä½ä¸€ä½“çš„å‡çº§**ï¼š

```mermaid
graph TD
    A[TAD v3.1] --> B[æ”¯æŸ±1: è¯æ®å¼è´¨é‡ä¿è¯]
    A --> C[æ”¯æŸ±2: Humanå¯è§†åŒ–èµ‹èƒ½]
    A --> D[æ”¯æŸ±3: æŒç»­å­¦ä¹ æœºåˆ¶]

    B --> E[95%+é—®é¢˜æ‹¦æˆªç‡]
    C --> F[ä¸éœ€è¦æŠ€æœ¯çŸ¥è¯†ä¹Ÿèƒ½éªŒè¯]
    D --> G[æ¯ä¸ªé¡¹ç›®éƒ½åœ¨æˆé•¿]

    E --> H[é«˜è´¨é‡äº¤ä»˜]
    F --> H
    G --> H

    style A fill:#2196F3
    style B fill:#4CAF50
    style C fill:#FF9800
    style D fill:#9C27B0
    style H fill:#F44336
```

**æ ¸å¿ƒè½¬å˜**ï¼š

| ç»´åº¦ | TAD v3.0 | TAD v3.1 |
|------|---------|----------|
| **éªŒè¯æ–¹å¼** | å£°æ˜å¼ï¼ˆAIè¯´"å·²æ£€æŸ¥"ï¼‰ | è¯æ®å¼ï¼ˆæä¾›æˆªå›¾/å›¾è¡¨/ä»£ç ä½ç½®ï¼‰ |
| **Humanè§’è‰²** | è¢«åŠ¨éªŒæ”¶è€… | ä¸»åŠ¨éªŒè¯è€… + å­¦ä¹ è€… |
| **è´¨é‡ä¿è¯** | AIäº’æŸ¥ | Humanå¯è§†åŒ–éªŒè¯ + AIè¾…åŠ© |
| **çŸ¥è¯†ç®¡ç†** | æ‰‹åŠ¨è®°å½•å¤±è´¥ | è‡ªåŠ¨å­¦ä¹ é—­ç¯ |
| **äº¤ä»˜èŠ‚å¥** | ä¸€æ¬¡æ€§å®Œæˆ | æ¸è¿›å¼éªŒè¯ï¼ˆæ¯Phaseæ£€æŸ¥ï¼‰ |
| **æ•ˆæœ** | 0-30%é—®é¢˜æ‹¦æˆªç‡ | **95%+é—®é¢˜æ‹¦æˆªç‡** |

### 1.3 æ ¸å¿ƒä»·å€¼

**è´¨é‡æå‡**ï¼š
- âœ… **95%+é—®é¢˜æ‹¦æˆªç‡**ï¼ˆå½“å‰0-30%ï¼‰
- âœ… **70-85%è¿”å·¥æ—¶é—´èŠ‚çœ**ï¼ˆæ—©æœŸå‘ç°é—®é¢˜ï¼‰
- âœ… **è‡ªåŠ¨å­¦ä¹ é—­ç¯**ï¼ˆç³»ç»Ÿè¶Šç”¨è¶Šèªæ˜ï¼‰

**Humanæˆé•¿**ï¼š
- âœ… **å»ºç«‹æŠ€æœ¯å†³ç­–ç›´è§‰**ï¼ˆç†è§£æƒè¡¡ï¼Œä¸æ˜¯è®°ç­”æ¡ˆï¼‰
- âœ… **åŸ¹å…»ç³»ç»Ÿæ€§æ€ç»´**ï¼ˆçœ‹åˆ°æ”¹åŠ¨çš„è¿é”ååº”ï¼‰
- âœ… **ç§¯ç´¯å¯å¤ç”¨çŸ¥è¯†**ï¼ˆæ¯ä¸ªé¡¹ç›®éƒ½æœ‰æ²‰æ·€ï¼‰

**æ—¶é—´æŠ•å…¥**ï¼š
- ğŸ“Š **Gate 2å®¡æŸ¥**: 10-15åˆ†é’Ÿï¼ˆçœ‹å›¾è¡¨ã€éªŒè¯è¯æ®ï¼‰
- ğŸ“Š **Phaseæ£€æŸ¥**: 5-10åˆ†é’Ÿ/Phaseï¼ˆå¿«é€ŸéªŒè¯æ–¹å‘ï¼‰
- ğŸ“Š **å­¦ä¹ æ´»åŠ¨**: 20-30åˆ†é’Ÿ/åŠŸèƒ½ï¼ˆå¯é€‰ï¼Œé«˜ä»·å€¼ï¼‰
- ğŸ’° **ROI**: æŠ•å…¥30-60åˆ†é’Ÿï¼ŒèŠ‚çœ3-6å°æ—¶è¿”å·¥ï¼Œ**å›æŠ¥æ¯”1:5åˆ°1:10**

### 1.4 é€‚ç”¨åœºæ™¯

âœ… **å¼ºçƒˆæ¨è**ï¼š
- éœ€è¦é«˜è´¨é‡ä»£ç çš„é¡¹ç›®
- å›¢é˜Ÿæˆå‘˜éœ€è¦æˆé•¿çš„åœºæ™¯
- å¤æ‚çš„äºº-AIåä½œå¼€å‘
- æœ‰å¤šæ¬¡è¿”å·¥å†å²çš„é¡¹ç›®

âš ï¸ **å¯é€‰ç®€åŒ–**ï¼š
- éå¸¸ç®€å•çš„åŠŸèƒ½ï¼ˆ<2å°æ—¶å®Œæˆï¼‰
- ä¸€æ¬¡æ€§è„šæœ¬æˆ–åŸå‹
- ç´§æ€¥çƒ­ä¿®å¤ï¼ˆä½†äº‹åè¡¥å­¦ä¹ ï¼‰

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒé—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 2.1 é—®é¢˜è¯Šæ–­

åŸºäºMenuSnapé¡¹ç›®å®è¯åˆ†æï¼ŒTAD v3.0å­˜åœ¨**5å¤§æ ¹æœ¬æ€§é—®é¢˜**ï¼š

#### é—®é¢˜1: Quality Gatesè®¾è®¡æ­£ç¡®ï¼Œä½†æ‰§è¡Œæ— æ•ˆ

**è¯æ®**ï¼š
```typescript
// Blakeå†™çš„ä»£ç ï¼ˆå®é™…é¡¹ç›®è®°å½•ï¼‰
const scoredItems = menu.map(item => ({
  ...item,
  score: calculateScore(item, preferences)  // âŒ å‡½æ•°ä¸å­˜åœ¨ï¼
}));
```

Gate 2åº”è¯¥æ‹¦æˆª"å‡½æ•°ä¸å­˜åœ¨"ï¼Œä½†å®é™…æ²¡æœ‰æ‹¦æˆªã€‚

**æ ¹æœ¬åŸå› **ï¼š
- Gateæ˜¯"å£°æ˜å¼"è€Œé"è¯æ˜å¼"ï¼ˆåªè¦æ±‚"ç¡®è®¤å·²æ£€æŸ¥"ï¼‰
- Gateæ˜¯"AIè‡ªæŸ¥"è€Œé"äº¤å‰éªŒè¯"ï¼ˆBlakeæ£€æŸ¥è‡ªå·±çš„ä»£ç ï¼‰
- Gateçš„æ£€æŸ¥ç‚¹å¤ªæŠ½è±¡ï¼ˆæ²¡æœ‰æ˜ç¡®å¦‚ä½•éªŒè¯ï¼‰

#### é—®é¢˜2: Handoffæ¨¡æ¿æœ‰æ£€æŸ¥é¡¹ï¼Œä½†ä¸å¯éªŒè¯

**è¯æ®**ï¼š
```markdown
# Handoffæ¨¡æ¿è¦æ±‚
âœ… å†å²ä»£ç å¼•ç”¨: éœ€è¦ä¿®æ”¹æˆ–å‚è€ƒçš„å…·ä½“æ–‡ä»¶

# Alexçš„å¡«å†™
âœ… å†å²ä»£ç å¼•ç”¨: å·²æŸ¥æ‰¾å†å²ä»£ç ï¼Œæœªæ‰¾åˆ°ç›¸å…³å®ç°
```

**é—®é¢˜**ï¼šHumanæ— æ³•éªŒè¯Alexæ˜¯å¦çœŸçš„"è®¤çœŸæ‰¾äº†"ã€‚

#### é—®é¢˜3: AIç³»ç»Ÿæ€§ç›²ç‚¹æ— æ³•é€šè¿‡è‡ªæŸ¥å‘ç°

**è¯æ®**ï¼šMenuSnapé¡¹ç›®ä¸­ä¸‰ä¸ªé—®é¢˜éƒ½é€ƒè¿‡äº†Quality Gates

| é—®é¢˜ | åº”è¯¥è¢«å“ªä¸ªGateæ‹¦æˆª | ä¸ºä»€ä¹ˆæ²¡æ‹¦æˆª |
|------|-------------------|-------------|
| å‡½æ•°ä¸å­˜åœ¨ | Gate 2/3 | AIå†™ä»£ç æ—¶å‡è®¾å­˜åœ¨ï¼Œè‡ªæŸ¥æ—¶ä¹Ÿå‡è®¾å­˜åœ¨ |
| æ•°æ®æµæ–­è£‚ | Gate 2 | Alexè®¾è®¡æ—¶æ²¡è€ƒè™‘å‰ç«¯æ˜¾ç¤º |
| åŒçŠ¶æ€ä¸åŒæ­¥ | Gate 1 | æ‰€æœ‰AIéƒ½æ²¡æ„è¯†åˆ°è¿™æ˜¯é—®é¢˜ |

**æ ¹æœ¬åŸå› **ï¼šå½“AIç³»ç»Ÿæ€§åœ°å¿½ç•¥æŸä¸ªé—®é¢˜æ—¶ï¼Œæ‰€æœ‰Gateséƒ½ä¼šæ”¾è¡Œã€‚

#### é—®é¢˜4: Humanè§’è‰²å®šä¹‰è¿‡äºè¢«åŠ¨

**è¯æ®**ï¼šå®é™…é¡¹ç›®ä¸­Humanåšçš„äº‹æƒ…
```
ç”¨æˆ·çº æ­£1: "ä¸å¯¹ï¼Œä½ è¦ç”¨æˆ‘ä»¬ä¹‹å‰çš„æ–¹æ¡ˆï¼Œåº”è¯¥æ˜¯ç¬¬5ä¸ªé¡µé¢"
ç”¨æˆ·çº æ­£2: "æ¨èç³»ç»Ÿæœ‰è‡´å‘½ä»£ç é”™è¯¯"
ç”¨æˆ·çº æ­£3: "ç”¨æˆ·çœ‹ä¸åˆ°æ¨èç†ç”±å’Œå…³é”®ä¿¡æ¯"
```

**é—®é¢˜**ï¼šTADå‡è®¾Humanåªåš"ä»·å€¼åˆ¤æ–­"ï¼Œä½†å®é™…Humanåœ¨å‘ç°**æŠ€æœ¯é—®é¢˜**ã€‚

#### é—®é¢˜5: å¤±è´¥ç»éªŒæ²¡æœ‰ç³»ç»ŸåŒ–åé¦ˆ

**è¯æ®**ï¼š`failure-patterns.md`è®°å½•äº†å¤±è´¥æ¨¡å¼ï¼Œä½†`config.yaml`å’Œ`handoff-a-to-b.md`ä¸­çœ‹ä¸åˆ°è¿™äº›patternsè¢«è½¬åŒ–ä¸ºæ£€æŸ¥ç‚¹ã€‚

**é—®é¢˜**ï¼šè®°å½• â‰  æ”¹è¿›ï¼Œç¼ºå°‘å­¦ä¹ é—­ç¯ã€‚

---

### 2.2 è§£å†³æ–¹æ¡ˆæ¶æ„

TAD v3.1é€šè¿‡**ä¸‰å¤§æ”¯æŸ±**è§£å†³ä»¥ä¸Šé—®é¢˜ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TAD v3.1 è§£å†³æ–¹æ¡ˆæ¶æ„                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  æ”¯æŸ±1: è¯æ®å¼è´¨é‡ä¿è¯                                        â”‚
â”‚  â”œâ”€ 5ç§è¯æ®ç±»å‹ï¼ˆæœç´¢ç»“æœã€ä»£ç ä½ç½®ã€æ•°æ®æµå›¾...ï¼‰             â”‚
â”‚  â”œâ”€ 5ä¸ªå¼ºåˆ¶é—®é¢˜ï¼ˆMQ1-5ï¼Œä»å¤±è´¥æ¡ˆä¾‹æç‚¼ï¼‰                      â”‚
â”‚  â””â”€ HumanéªŒè¯ç‚¹ï¼ˆæ¯ä¸ªè¯æ®éƒ½æœ‰"Humanæ€ä¹ˆçœ‹"ï¼‰                  â”‚
â”‚                                                             â”‚
â”‚  æ”¯æŸ±2: Humanå¯è§†åŒ–èµ‹èƒ½                                       â”‚
â”‚  â”œâ”€ ä¸éœ€è¦æŠ€æœ¯çŸ¥è¯†ï¼ˆçœ‹å›¾åˆ¤æ–­ï¼‰                                â”‚
â”‚  â”œâ”€ æ¸è¿›å¼éªŒè¯ï¼ˆæ¯Phaseæ£€æŸ¥ï¼ŒåŠæ—©å‘ç°é—®é¢˜ï¼‰                    â”‚
â”‚  â””â”€ æ˜ç¡®çš„å®¡æŸ¥æ¸…å•ï¼ˆ10-15åˆ†é’Ÿ/Gateï¼‰                         â”‚
â”‚                                                             â”‚
â”‚  æ”¯æŸ±3: æŒç»­å­¦ä¹ æœºåˆ¶                                          â”‚
â”‚  â”œâ”€ 5ç§å­¦ä¹ æœºåˆ¶ï¼ˆDecision Rationaleã€Interactive...ï¼‰        â”‚
â”‚  â”œâ”€ å¤±è´¥å­¦ä¹ é—­ç¯ï¼ˆè‡ªåŠ¨è½¬åŒ–ä¸ºMQï¼‰                              â”‚
â”‚  â””â”€ é¡¹ç›®å­¦ä¹ æŠ¥å‘Šï¼ˆæ²‰æ·€å¯å¤ç”¨çŸ¥è¯†ï¼‰                            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šTAD v3.1 ä¸‰å¤§æ”¯æŸ±

### 3.1 æ”¯æŸ±1ï¼šè¯æ®å¼è´¨é‡ä¿è¯

#### æ ¸å¿ƒç†å¿µ
```
æ—§ï¼šAlexè¯´"æˆ‘å·²ç»éªŒè¯äº†æ‰€æœ‰å‡½æ•°éƒ½å­˜åœ¨" â†’ Humanç›¸ä¿¡
æ–°ï¼šAlexæä¾›"å‡½æ•°ä½ç½®è¯æ˜è¡¨" â†’ Humançœ‹åˆ°å…·ä½“æ–‡ä»¶:è¡Œå· â†’ éªŒè¯
```

#### 5ç§è¯æ®ç±»å‹

##### è¯æ®1: æœç´¢ç»“æœè¯æ®
**ç”¨é€”**ï¼šè¯æ˜ç¡®å®æœç´¢äº†å†å²ä»£ç 

**æ ¼å¼**ï¼š
```markdown
### æœç´¢è¯æ®
æœç´¢å‘½ä»¤ï¼š`grep -rn "calculateScore" src/`

æœç´¢ç»“æœï¼š
```
src/lib/utils.ts:42:export function calculateScoreAndReasons(...)
src/lib/utils.ts:98:  const score = calculateBaseScore(item);
```

å†³ç­–ï¼šä½¿ç”¨calculateScoreAndReasonsï¼ˆå·²å­˜åœ¨ï¼‰ï¼Œä¸åˆ›å»ºæ–°å‡½æ•°
```

**HumanéªŒè¯ç‚¹**ï¼šèƒ½çœ‹åˆ°æœç´¢ç¡®å®æ‰§è¡Œäº†ï¼Œç»“æœçœŸå®

##### è¯æ®2: ä»£ç ä½ç½®è¯æ˜
**ç”¨é€”**ï¼šè¯æ˜å‡½æ•°/ç»„ä»¶ç¡®å®å­˜åœ¨

**æ ¼å¼**ï¼š
```markdown
| å‡½æ•°å | æ–‡ä»¶ä½ç½® | è¡Œå· | ä»£ç ç‰‡æ®µ | éªŒè¯ |
|--------|---------|------|---------|------|
| calculateScoreAndReasons | src/lib/utils.ts | 42 | `export function calculateScoreAndReasons(...)` | âœ… |
| filterByAllergens | src/lib/filters.ts | 18 | `export function filterByAllergens(...)` | âœ… |
```

**HumanéªŒè¯ç‚¹**ï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰"âœ…"ï¼Œä½ç½®å…·ä½“

##### è¯æ®3: æ•°æ®æµå›¾
**ç”¨é€”**ï¼šå±•ç¤ºæ•°æ®ä»åç«¯åˆ°å‰ç«¯çš„å®Œæ•´æµåŠ¨

**æ ¼å¼**ï¼š
```mermaid
graph LR
  A[Backend API] -->|score, reasons, warnings| B[Frontend]
  B -->|score| C[ScoreBadgeç»„ä»¶]
  B -->|reasons| D[ReasonListç»„ä»¶]
  B -->|warnings| E[WarningAlertç»„ä»¶]
```

**é…å¥—è¡¨æ ¼**ï¼š
```markdown
| åç«¯å­—æ®µ | ç”¨é€” | å‰ç«¯ç»„ä»¶ | æ˜¯å¦æ˜¾ç¤º | ä¸æ˜¾ç¤ºåŸå›  |
|---------|------|---------|---------|-----------|
| score | æ¨èåˆ†æ•° | ScoreBadge | âœ… | - |
| matchReasons | æ¨èç†ç”± | ReasonList | âœ… | - |
| warnings | è¿‡æ•è­¦å‘Š | WarningAlert | âœ… | - |
| internalDebug | è°ƒè¯•ä¿¡æ¯ | - | âŒ | ä»…ä¾›å¼€å‘ï¼Œä¸å±•ç¤ºç»™ç”¨æˆ· |
```

**HumanéªŒè¯ç‚¹**ï¼š
- åç«¯æ¯ä¸ªå­—æ®µéƒ½æœ‰å¯¹åº”çš„å‰ç«¯ç»„ä»¶å—ï¼Ÿ
- "âŒä¸æ˜¾ç¤º"çš„æœ‰åˆç†åŸå› å—ï¼Ÿ

##### è¯æ®4: çŠ¶æ€æµå›¾
**ç”¨é€”**ï¼šå±•ç¤ºçŠ¶æ€çš„æ¥æºã€å­˜å‚¨ä½ç½®ã€åŒæ­¥æ—¶æœº

**æ ¼å¼**ï¼š
```
[ç”¨æˆ·è¾“å…¥] â†’ preferences.allergens (ä¸»çŠ¶æ€ï¼ŒSource of Truth)
              â†“ åŒæ­¥æ—¶æœºï¼šonSubmitäº‹ä»¶
           dietaryRestrictions.allergies (å¤‡ä»½çŠ¶æ€)
```

**æˆ–å•ä¸€çŠ¶æ€**ï¼š
```
[ç”¨æˆ·è¾“å…¥] â†’ preferences.allergens (å”¯ä¸€å­˜å‚¨)
âœ… åªæœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œæ— éœ€åŒæ­¥
```

**HumanéªŒè¯ç‚¹**ï¼š
- æ¸…æ¥šæ ‡æ³¨å“ªä¸ªæ˜¯ä¸»çŠ¶æ€äº†å—ï¼Ÿ
- åŒæ­¥æ—¶æœºæ˜ç¡®å—ï¼Ÿ
- æ˜¯å¦å¯èƒ½å‡ºç°ä¸åŒæ­¥ï¼Ÿ

##### è¯æ®5: UIæˆªå›¾/æµ‹è¯•ç»“æœ
**ç”¨é€”**ï¼šè¯æ˜åŠŸèƒ½çš„å®é™…æ•ˆæœå’Œæµ‹è¯•é€šè¿‡

**æ ¼å¼**ï¼š
```markdown
### Phase 1 æµ‹è¯•ç»“æœ
```
PASS  src/lib/utils.test.ts
  âœ“ calculateScoreAndReasons returns correct score (3ms)
  âœ“ calculateScoreAndReasons handles edge cases (2ms)

Test Suites: 1 passed, 1 total
Tests:       42 passed, 42 total
Coverage:    87.5%
```

[Screenshot showing green checkmarks]
```

**HumanéªŒè¯ç‚¹**ï¼šçœ‹åˆ°"passed"ã€ç»¿è‰²å‹¾é€‰ã€è¦†ç›–ç‡è¾¾æ ‡

---

#### 5ä¸ªå¼ºåˆ¶é—®é¢˜ï¼ˆMQï¼‰

ä»MenuSnapå¤±è´¥æ¡ˆä¾‹ä¸­æç‚¼çš„å¿…ç­”é—®é¢˜ï¼š

##### MQ1: å†å²ä»£ç æœç´¢
**è§¦å‘æ¡ä»¶**ï¼šç”¨æˆ·æåˆ°"ä¹‹å‰çš„"ã€"åŸæ¥çš„"ã€"æˆ‘ä»¬çš„æ–¹æ¡ˆ"

**é—®é¢˜**ï¼š
- ä½ æ‰¾åˆ°äº†ç›¸å…³ä»£ç å—ï¼Ÿ
- æœç´¢äº†å“ªäº›å…³é”®è¯ï¼Ÿ
- æ‰¾åˆ°äº†ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œï¼Ÿ
- ä¸ºä»€ä¹ˆå†³å®šå¤ç”¨/ä¸å¤ç”¨ï¼Ÿ

**è¯æ®è¦æ±‚**ï¼šæœç´¢ç»“æœæˆªå›¾

**æ‹¦æˆªçš„å¤±è´¥**ï¼šFailure Pattern 2: Creating Instead of Searching

##### MQ2: å‡½æ•°å­˜åœ¨æ€§éªŒè¯
**è§¦å‘æ¡ä»¶**ï¼šè®¾è®¡ä¸­åŒ…å«å‡½æ•°è°ƒç”¨

**é—®é¢˜**ï¼š
- è®¾è®¡ä¸­è°ƒç”¨äº†å“ªäº›å‡½æ•°ï¼Ÿ
- è¿™äº›å‡½æ•°éƒ½å­˜åœ¨å—ï¼Ÿ
- æ¯ä¸ªå‡½æ•°åœ¨å“ªä¸ªæ–‡ä»¶çš„ç¬¬å‡ è¡Œï¼Ÿ
- è¯·æä¾›å‡½æ•°å®šä¹‰çš„ä»£ç ç‰‡æ®µ

**è¯æ®è¦æ±‚**ï¼šå‡½æ•°ä½ç½®è¯æ˜è¡¨

**æ‹¦æˆªçš„å¤±è´¥**ï¼šFailure Pattern 3: Function Assumption Errors

##### MQ3: æ•°æ®æµå®Œæ•´æ€§
**è§¦å‘æ¡ä»¶**ï¼šåç«¯è®¡ç®—æˆ–è¿”å›æ•°æ®

**é—®é¢˜**ï¼š
- åç«¯è®¡ç®—/è¿”å›äº†å“ªäº›å­—æ®µï¼Ÿ
- æ¯ä¸ªå­—æ®µåœ¨å‰ç«¯çš„å“ªä¸ªç»„ä»¶æ˜¾ç¤ºï¼Ÿ
- æœ‰æ²¡æœ‰å­—æ®µä¸æ˜¾ç¤ºï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

**è¯æ®è¦æ±‚**ï¼šæ•°æ®æµå¯¹ç…§è¡¨ + æ•°æ®æµå›¾

**æ‹¦æˆªçš„å¤±è´¥**ï¼šFailure Pattern 4: Incomplete Data Flow

##### MQ4: è§†è§‰å±‚çº§
**è§¦å‘æ¡ä»¶**ï¼šåŠŸèƒ½æœ‰å¤šä¸ªçŠ¶æ€æˆ–ç±»å‹

**é—®é¢˜**ï¼š
- è¿™ä¸ªåŠŸèƒ½æœ‰ä¸åŒçš„çŠ¶æ€/ç±»å‹å—ï¼Ÿ
- æ¯ä¸ªçŠ¶æ€çš„è§†è§‰è¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿ
- ç”¨æˆ·èƒ½ä¸€çœ¼çœ‹å‡ºåŒºåˆ«å—ï¼Ÿ

**è¯æ®è¦æ±‚**ï¼šUIçŠ¶æ€å¯¹æ¯”å›¾/æˆªå›¾

**æ‹¦æˆªçš„å¤±è´¥**ï¼šFailure Pattern 5: Visual Uniformity Disease

##### MQ5: çŠ¶æ€åŒæ­¥
**è§¦å‘æ¡ä»¶**ï¼šæ¶‰åŠç”¨æˆ·è¾“å…¥æˆ–çŠ¶æ€ç®¡ç†

**é—®é¢˜**ï¼š
- æ•°æ®å­˜åœ¨å‡ ä¸ªåœ°æ–¹ï¼Ÿ
- å“ªä¸ªæ˜¯ä¸»çŠ¶æ€ï¼ˆSource of Truthï¼‰ï¼Ÿ
- å…¶ä»–çŠ¶æ€ä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿç”¨ä»€ä¹ˆè§¦å‘ï¼Ÿ
- å¦‚æœå¿˜è®°åŒæ­¥ä¼šæ€æ ·ï¼Ÿ

**è¯æ®è¦æ±‚**ï¼šçŠ¶æ€æµå›¾

**æ‹¦æˆªçš„å¤±è´¥**ï¼šReal Issue: Dual State Sync Problem

---

### 3.2 æ”¯æŸ±2ï¼šHumanå¯è§†åŒ–èµ‹èƒ½

#### æ ¸å¿ƒç†å¿µ
```
æ—§æ€ç»´ï¼šHumanéœ€è¦æ‡‚æŠ€æœ¯æ‰èƒ½å‚ä¸æŠ€æœ¯å®¡æŸ¥
æ–°æ€ç»´ï¼šHumané€šè¿‡"çœ‹å›¾åˆ¤æ–­"å‚ä¸éªŒè¯ï¼Œä¸éœ€è¦æŠ€æœ¯çŸ¥è¯†
```

#### Humançš„æ–°è§’è‰²

**è§’è‰²å‡çº§**ï¼š
```yaml
æ—§è§’è‰²: Value Guardianï¼ˆä»·å€¼å®ˆæŠ¤è€…ï¼‰
  èŒè´£: å®šä¹‰éœ€æ±‚ã€éªŒè¯äº¤ä»˜ä»·å€¼ã€åšå…³é”®å†³ç­–

æ–°è§’è‰²: Value Guardian + Checkpoint Validator
  èŒè´£:
    - å®šä¹‰éœ€æ±‚ã€éªŒè¯äº¤ä»˜ä»·å€¼ã€åšå…³é”®å†³ç­–ï¼ˆä¿æŒï¼‰
    - å®¡æŸ¥è®¾è®¡è¯æ®ï¼ˆçœ‹å›¾è¡¨ï¼Œä¸éœ€è¦æ‡‚ä»£ç ï¼‰âœ¨ æ–°å¢
    - å®¡æŸ¥å®ç°è¯æ®ï¼ˆçœ‹æˆªå›¾ï¼ŒéªŒè¯æ–¹å‘ï¼‰âœ¨ æ–°å¢
    - æ¸è¿›å¼æ£€æŸ¥ç‚¹éªŒè¯ï¼ˆæ¯PhaseéªŒè¯ï¼‰âœ¨ æ–°å¢
```

#### Humanå‚ä¸çš„3ä¸ªå…³é”®ç‚¹

##### å‚ä¸ç‚¹1: Gate 2 - è®¾è®¡å®Œæˆå®¡æŸ¥ï¼ˆ10-15åˆ†é’Ÿï¼‰

**æ—¶æœº**ï¼šAlexå®Œæˆè®¾è®¡ï¼Œåˆ›å»ºhandoffå‰

**è¦åšçš„äº‹**ï¼š
1. æ‰“å¼€handoffæ–‡æ¡£
2. ç›´æ¥è·³åˆ°"å¼ºåˆ¶é—®é¢˜å›ç­”ï¼ˆMQï¼‰"éƒ¨åˆ†
3. å¯¹æ¯ä¸ªMQæ£€æŸ¥ï¼š
   - âœ… æœ‰å›ç­”å—ï¼Ÿ
   - âœ… æœ‰è¯æ®å—ï¼Ÿï¼ˆå›¾/è¡¨/ä»£ç ç‰‡æ®µï¼‰
   - âœ… çœ‹èµ·æ¥åˆç†å—ï¼Ÿ

**å®¡æŸ¥æ¸…å•**ï¼š
```markdown
â–¡ MQ1 å†å²ä»£ç ï¼šèƒ½çœ‹åˆ°æœç´¢ç»“æœå—ï¼Ÿå†³ç­–ç†ç”±åˆç†å—ï¼Ÿ
â–¡ MQ2 å‡½æ•°å­˜åœ¨ï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰"âœ…å­˜åœ¨"å’Œå…·ä½“ä½ç½®å—ï¼Ÿ
â–¡ MQ3 æ•°æ®æµï¼šæ•°æ®æµå›¾æ˜¾ç¤ºåç«¯å­—æ®µéƒ½åˆ°å‰ç«¯äº†å—ï¼Ÿ
â–¡ MQ4 è§†è§‰ï¼šèƒ½çœ‹å‡ºä¸åŒçŠ¶æ€çš„è§†è§‰åŒºåˆ«å—ï¼Ÿ
â–¡ MQ5 çŠ¶æ€ï¼šæ¸…æ¥šå“ªä¸ªæ˜¯ä¸»çŠ¶æ€ã€ä½•æ—¶åŒæ­¥å—ï¼Ÿ
```

**ç¤ºä¾‹ï¼šå¦‚ä½•çœ‹æ•°æ®æµå›¾**
```
å¥½çš„æ•°æ®æµå›¾âœ…ï¼š
[Backend] â†’ score â†’ [ScoreBadge]
         â†’ reasons â†’ [ReasonList]
         â†’ warnings â†’ [WarningAlert]
æ¯ä¸ªå­—æ®µéƒ½æœ‰å»å¤„

çº¢æ——ğŸš©ï¼š
[Backend] â†’ score, reasons, warnings
         â†’ [ScoreBadge]
é—®ï¼šreasonså’Œwarningså»å“ªäº†ï¼Ÿ âŒ
```

**å†³ç­–**ï¼š
- æ‰€æœ‰âœ… â†’ æ‰¹å‡†ï¼ŒBlakeå¯ä»¥å¼€å§‹å®ç°
- æœ‰é—®é¢˜ â†’ æŒ‡å‡ºå“ªé‡Œä¸æ¸…æ¥šï¼ŒAlexè¡¥å……è¯æ®

##### å‚ä¸ç‚¹2: Phaseæ£€æŸ¥ç‚¹ - æ¯ä¸ªPhaseå®Œæˆï¼ˆ5-10åˆ†é’Ÿ/Phaseï¼‰

**æ—¶æœº**ï¼šBlakeå®Œæˆæ¯ä¸ªPhase

**è¦åšçš„äº‹**ï¼š
1. çœ‹Blakeæä¾›çš„è¯æ®ï¼š
   - ä»£ç æˆªå›¾ï¼ˆå…³é”®å‡½æ•°ï¼‰
   - æµ‹è¯•ç»“æœæˆªå›¾
   - UIæˆªå›¾ï¼ˆå¦‚æœ‰UIï¼‰
2. å›ç­”3ä¸ªé—®é¢˜ï¼š
   - â“ è¿™æ˜¯æˆ‘æœŸæœ›çš„æ–¹å‘å—ï¼Ÿ
   - â“ æµ‹è¯•é€šè¿‡äº†å—ï¼Ÿï¼ˆçœ‹åˆ°"passed"æˆ–ç»¿è‰²âœ“ï¼‰
   - â“ éœ€è¦è°ƒæ•´ä»€ä¹ˆå—ï¼Ÿ

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
```
åœ¨Phase 1ï¼ˆ20%è¿›åº¦ï¼‰å°±å‘ç°æ–¹å‘é”™è¯¯ â†’ åªæµªè´¹2å°æ—¶
ç­‰åˆ°Phase 3ï¼ˆ100%å®Œæˆï¼‰æ‰å‘ç° â†’ æµªè´¹6å°æ—¶
```

**å†³ç­–**ï¼š
- âœ… æ–¹å‘æ­£ç¡® â†’ æ‰¹å‡†ï¼Œç»§ç»­ä¸‹ä¸ªPhase
- âš ï¸ éœ€è¦è°ƒæ•´ â†’ è¯´æ˜æœŸæœ›ï¼ŒBlakeè°ƒæ•´æœ¬Phase

##### å‚ä¸ç‚¹3: Gate 3 - æœ€ç»ˆéªŒè¯ï¼ˆ10-15åˆ†é’Ÿï¼‰

**æ—¶æœº**ï¼šæ‰€æœ‰Phaseå®Œæˆ

**è¦åšçš„äº‹**ï¼š
1. çœ‹Blakeçš„å®ŒæˆæŠ¥å‘Š
2. çœ‹æµ‹è¯•ç»“æœï¼ˆå…¨éƒ¨passedï¼Ÿï¼‰
3. çœ‹UIæˆªå›¾ï¼ˆç¬¦åˆæœŸæœ›ï¼Ÿï¼‰
4. **äº²è‡ªæµ‹è¯•**ï¼š
   - æ‰“å¼€æµè§ˆå™¨
   - å®é™…ä½¿ç”¨åŠŸèƒ½
   - ç¡®è®¤ç¬¦åˆéœ€æ±‚

**å†³ç­–**ï¼š
- âœ… å®Œå…¨ç¬¦åˆæœŸæœ› â†’ éªŒæ”¶é€šè¿‡
- âš ï¸ æœ‰å°é—®é¢˜ â†’ Blakeä¿®å¤
- âŒ éœ€è¦å¤§æ”¹ â†’ è¿”å›æŸä¸ªPhaseé‡åš

---

#### Humanä¸éœ€è¦æ‡‚æŠ€æœ¯çš„ç§˜è¯€

**ç§˜è¯€1ï¼šçœ‹å›¾åˆ¤æ–­ï¼Œä¸çœ‹ä»£ç **
```
ä¸éœ€è¦çœ‹ï¼šfunction calculateScore(item, prefs) { ... }
åªéœ€è¦çœ‹ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ å‡½æ•°: calculateScore         â”‚
  â”‚ ä½ç½®: src/utils.ts:42        â”‚
  â”‚ çŠ¶æ€: âœ… å­˜åœ¨                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Humanåˆ¤æ–­ï¼šæœ‰å…·ä½“ä½ç½®ã€æ ‡è®°å­˜åœ¨ â†’ âœ… é€šè¿‡
```

**ç§˜è¯€2ï¼šé—®ç®€å•é—®é¢˜ï¼Œä¸é—®æŠ€æœ¯é—®é¢˜**
```
ä¸é—®ï¼šè¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(nÂ²)å—ï¼Ÿ
åªé—®ï¼š
  - åç«¯è¿”å›çš„æ•°æ®ï¼Œå‰ç«¯éƒ½æ˜¾ç¤ºäº†å—ï¼Ÿ
  - è¿™ä¸¤ä¸ªçŠ¶æ€ä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿ
  - æµ‹è¯•é€šè¿‡äº†å—ï¼Ÿï¼ˆçœ‹åˆ°ç»¿è‰²âœ“ï¼‰
```

**ç§˜è¯€3ï¼šåŸºäºå¸¸è¯†åˆ¤æ–­ï¼Œä¸éœ€è¦ä¸“ä¸šçŸ¥è¯†**
```
çœ‹åˆ°çŠ¶æ€æµå›¾ï¼š
[ç”¨æˆ·è¾“å…¥] â†’ preferences.allergens
           â†’ dietaryRestrictions.allergies
[æ²¡è¯´ä»€ä¹ˆæ—¶å€™åŒæ­¥]

HumanåŸºäºå¸¸è¯†åˆ¤æ–­ï¼š
"ä¸¤ä¸ªåœ°æ–¹å­˜åŒä¸€ä¸ªæ•°æ®ï¼Œä½†ä¸çŸ¥é“ä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿ
è¿™å¬èµ·æ¥å®¹æ˜“å‡ºé—®é¢˜ã€‚" â†’ âŒ è¦æ±‚æ¾„æ¸…
```

---

### 3.3 æ”¯æŸ±3ï¼šæŒç»­å­¦ä¹ æœºåˆ¶

#### æ ¸å¿ƒç†å¿µ
```
æ—§æ¨¡å¼ï¼šå®Œæˆä»»åŠ¡ â†’ è¿›å…¥ä¸‹ä¸ªä»»åŠ¡ â†’ çŸ¥è¯†æ²¡æ²‰æ·€
æ–°æ¨¡å¼ï¼šå®Œæˆä»»åŠ¡ â†’ æç‚¼å­¦ä¹  â†’ ä¸‹ä¸ªä»»åŠ¡åº”ç”¨ â†’ èƒ½åŠ›æå‡
```

#### 5ç§å­¦ä¹ æœºåˆ¶

##### æœºåˆ¶1: Decision Rationaleï¼ˆå†³ç­–ç†ç”±ï¼‰
**ç›®æ ‡**ï¼šç†è§£"ä¸ºä»€ä¹ˆé€‰Aä¸é€‰B"ï¼Œå»ºç«‹æƒè¡¡æ€ç»´

**è§¦å‘æ—¶æœº**ï¼šæ¯ä¸ªé‡è¦æŠ€æœ¯å†³ç­–

**æ ‡å‡†æ ¼å¼**ï¼š
```markdown
## Decision Rationale: OCRæŠ€æœ¯é€‰å‹

### é€‰æ‹©çš„æ–¹æ¡ˆ
ä½¿ç”¨Gemini 2.0 Flashè¿›è¡Œèœå•OCRè¯†åˆ«

### è€ƒè™‘çš„æ›¿ä»£æ–¹æ¡ˆ
| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | ä¸ºä»€ä¹ˆæ²¡é€‰ |
|------|------|------|-----------|
| Gemini Flash | å¿«(0.5s)ã€ä¾¿å®œ | å‡†ç¡®ç‡95% | âœ… å½“å‰é€‰æ‹© |
| GPT-4V | å‡†ç¡®ç‡98% | æ…¢(2s)ã€è´µ10å€ | MVPä¸éœ€è¦98%ç²¾åº¦ |

### æƒè¡¡åˆ†æ
æ ¸å¿ƒæƒè¡¡ï¼šé€Ÿåº¦+æˆæœ¬ vs å‡†ç¡®ç‡
å½“å‰ä¼˜å…ˆçº§ï¼šé€Ÿåº¦ï¼ˆæœ€é‡è¦ï¼‰> æˆæœ¬ > å‡†ç¡®ç‡

### æœªæ¥å¯èƒ½éœ€è¦åˆ‡æ¢
å¦‚æœå‡†ç¡®ç‡<90% â†’ åˆ‡æ¢åˆ°GPT-4V
è§¦å‘æ¡ä»¶ï¼šç”¨æˆ·æŠ•è¯‰å‡†ç¡®ç‡é—®é¢˜>10æ¬¡/å‘¨

### ğŸ’¡ Humanå­¦ä¹ ç‚¹
æ ¸å¿ƒåŸåˆ™ï¼šMVPä¼˜å…ˆ"è¶³å¤Ÿå¥½+å¿«+ä¾¿å®œ"ï¼Œè€Œé"å®Œç¾ä½†æ…¢è´µ"

æ€è€ƒé—®é¢˜ï¼š
- å¦‚æœä½ æ˜¯ç”¨æˆ·ï¼Œ0.5ç§’å’Œ2ç§’çš„ç­‰å¾…æ„Ÿå—å·®å¼‚å¤§å—ï¼Ÿ
- è¯†åˆ«100ä¸ªèœå“ä¸­é”™1ä¸ªvsé”™0ä¸ªï¼Œå€¼å¾—èŠ±10å€æˆæœ¬å—ï¼Ÿ
```

**æ—¶é—´æŠ•å…¥**ï¼š5åˆ†é’Ÿé˜…è¯»+ç†è§£

**å­¦ä¹ æ”¶ç›Š**ï¼šå»ºç«‹"æ²¡æœ‰å®Œç¾æ–¹æ¡ˆï¼Œåªæœ‰æƒè¡¡"çš„æ€ç»´

##### æœºåˆ¶2: Interactive Challengeï¼ˆäº’åŠ¨æŒ‘æˆ˜ï¼‰
**ç›®æ ‡**ï¼šè®©Humanä¸»åŠ¨æ€è€ƒï¼Œè€Œéè¢«åŠ¨æ¥å—ç­”æ¡ˆ

**è§¦å‘æ—¶æœº**ï¼šå…³é”®æ¶æ„å†³ç­–å‰

**æ ‡å‡†æ ¼å¼**ï¼š
```markdown
## ğŸ¤” Interactive Challenge: ç”¨æˆ·è¿‡æ•ä¿¡æ¯å­˜å‚¨

### åœºæ™¯æè¿°
ç”¨æˆ·éœ€è¦è®¾ç½®è¿‡æ•ä¿¡æ¯ï¼Œå‰ç«¯éœ€è¦æ˜¾ç¤ºï¼Œåç«¯éœ€è¦ä½¿ç”¨ã€‚

### ä½ ä¼šæ€ä¹ˆåšï¼Ÿ
æ–¹æ¡ˆA: å‰ç«¯å­˜å‚¨ï¼ˆlocalStorageï¼‰ï¼Œæ¯æ¬¡ä¼ ç»™åç«¯
æ–¹æ¡ˆB: åç«¯å­˜å‚¨ï¼ˆæ•°æ®åº“ï¼‰ï¼Œå‰ç«¯è¯»å–
æ–¹æ¡ˆC: å‰åç«¯éƒ½å­˜å‚¨ï¼Œå®šæœŸåŒæ­¥

**æ€è€ƒ1-2åˆ†é’Ÿ**ï¼š
- ä½ çš„ç›´è§‰é€‰å“ªä¸ªï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ
- æ¯ä¸ªæ–¹æ¡ˆæœ€å¤§çš„é£é™©æ˜¯ä»€ä¹ˆï¼Ÿ

---

### Alexçš„åˆ†æ
[è¯¦ç»†åˆ†æ...]

æ¨èæ–¹æ¡ˆAï¼Œç†ç”±ï¼š
- MVPé˜¶æ®µï¼Œåç«¯æ— çŠ¶æ€æ›´ç®€å•
- é¿å…ç”¨æˆ·ç™»å½•/æ³¨å†Œå¤æ‚åº¦
- æ•°æ®é‡å°ï¼ŒlocalStorageè¶³å¤Ÿ

### ğŸ’¡ ä½ çš„æƒ³æ³•å’ŒAlexçš„ä¸€è‡´å—ï¼Ÿ
å¦‚æœä¸ä¸€è‡´ï¼šæƒ³æƒ³ä¸ºä»€ä¹ˆï¼ŸAlexè€ƒè™‘äº†å“ªäº›ä½ æ²¡æƒ³åˆ°çš„ï¼Ÿ
```

**æ—¶é—´æŠ•å…¥**ï¼š3åˆ†é’Ÿæ€è€ƒ+å¯¹æ¯”

**å­¦ä¹ æ”¶ç›Š**ï¼šé”»ç‚¼ç‹¬ç«‹åˆ¤æ–­èƒ½åŠ›ï¼Œç†è§£è€ƒè™‘é—®é¢˜çš„è§’åº¦

##### æœºåˆ¶3: Impact Visualizationï¼ˆå½±å“å¯è§†åŒ–ï¼‰
**ç›®æ ‡**ï¼šçœ‹åˆ°"å±€éƒ¨æ”¹åŠ¨"å¦‚ä½•å½±å“"æ•´ä¸ªç³»ç»Ÿ"

**è§¦å‘æ—¶æœº**ï¼šæ¶æ„/æ•°æ®æµå˜æ›´

**æ ‡å‡†æ ¼å¼**ï¼š
```markdown
## Impact Visualization: Two-Phaseæ¶æ„å½±å“

### æ”¹åŠ¨
ä»One-phaseæ”¹ä¸ºTwo-phaseæ¶æ„

### å½±å“é“¾è·¯å›¾
```mermaid
graph TD
    A[æ”¹åŠ¨: Two-Phase] --> B[ç›´æ¥å½±å“]
    B --> C[APIæ‹†åˆ†æˆä¸¤ä¸ªendpoint]
    B --> D[å‰ç«¯éœ€è¦ä¸¤æ¬¡è°ƒç”¨]

    C --> E[é—´æ¥å½±å“]
    D --> E
    E --> F[éœ€è¦è¿›åº¦UI]
    E --> G[éœ€è¦çŠ¶æ€ç®¡ç†]
    E --> H[é”™è¯¯å¤„ç†æ›´å¤æ‚]

    F --> I[ç¬¬ä¸‰å±‚å½±å“]
    G --> I
    H --> I
    I --> J[æµ‹è¯•ç”¨ä¾‹å¢åŠ ]
    I --> K[æ—¥å¿—ç»“æ„å˜åŒ–]
```

### å½±å“æ¸…å•
**ç›´æ¥å½±å“**ï¼š
- API: æ‹†åˆ†æˆ /ocr å’Œ /recommend
- å‰ç«¯: ä¸¤æ¬¡APIè°ƒç”¨

**é—´æ¥å½±å“**ï¼š
- UI: éœ€è¦è¿›åº¦æ¡æ˜¾ç¤ºå½“å‰Phase
- çŠ¶æ€: Phase 1ç»“æœå­˜å“ªé‡Œï¼Ÿ
- é”™è¯¯: Phase 1æˆåŠŸä½†Phase 2å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**ç¬¬ä¸‰å±‚å½±å“**ï¼š
- æµ‹è¯•: éœ€è¦è¦†ç›–4ç§ç»„åˆï¼ˆæˆåŠŸ+æˆåŠŸã€æˆåŠŸ+å¤±è´¥...ï¼‰
- æ—¥å¿—: åˆ†åˆ«è®°å½•ä¸¤ä¸ªPhaseçš„è€—æ—¶
- æˆæœ¬: åˆ†åˆ«ç»Ÿè®¡ä¸¤ä¸ªLLMçš„ä½¿ç”¨

### ğŸ’¡ Humanå­¦ä¹ ç‚¹
æ”¹ä¸€ä¸ªåœ°æ–¹ï¼Œæƒ³ä¸‰å±‚å½±å“ï¼šç›´æ¥ â†’ é—´æ¥ â†’ ç¬¬ä¸‰å±‚
```

**æ—¶é—´æŠ•å…¥**ï¼š2åˆ†é’Ÿçœ‹å›¾

**å­¦ä¹ æ”¶ç›Š**ï¼šåŸ¹å…»ç³»ç»Ÿæ€§æ€ç»´ï¼Œé¢„è§æ”¹åŠ¨çš„æ¶Ÿæ¼ªæ•ˆåº”

##### æœºåˆ¶4: What-If Scenariosï¼ˆå‡è®¾åœºæ™¯ï¼‰
**ç›®æ ‡**ï¼šé€šè¿‡å¯¹æ¯”ç†è§£"ä¸ºä»€ä¹ˆè¿™æ ·åš"

**è§¦å‘æ—¶æœº**ï¼šæ¯ä¸ªPhaseå®Œæˆ

**æ ‡å‡†æ ¼å¼**ï¼š
```markdown
## What-If Scenarios: è¿›åº¦åé¦ˆè®¾è®¡

### å®é™…é‡‡ç”¨çš„æ–¹æ¡ˆ
Two-phase + è¿›åº¦æ¡ï¼š
- Phase 1: "ğŸ“¸ è¯†åˆ«èœå•..." (0-50%)
- Phase 2: "ğŸ¤” ç”Ÿæˆæ¨è..." (50-100%)

### åœºæ™¯1ï¼šå¦‚æœä¸æ˜¾ç¤ºè¿›åº¦æ¡...
**ç”¨æˆ·ä½“éªŒ**ï¼š
- å‰3ç§’ï¼š"åœ¨åŠ è½½ï¼Œç­‰ç­‰"
- 5-8ç§’ï¼š"æ˜¯ä¸æ˜¯å¡ä½äº†ï¼Ÿè¦ä¸è¦åˆ·æ–°ï¼Ÿ"

**ç»“æœ**ï¼š
âŒ ç”¨æˆ·å¯èƒ½åœ¨ç»“æœå‡ºæ¥å‰æ”¾å¼ƒ
âŒ ç”¨æˆ·å¯¹äº§å“ä¿¡ä»»åº¦ä¸‹é™

### åœºæ™¯2ï¼šå¦‚æœç”¨One-phase...
**é—®é¢˜**ï¼š
è¿›åº¦æ¡åªèƒ½"å‡è£…"ï¼ˆå®šæ—¶å™¨ï¼‰ï¼Œç”¨æˆ·ä¼šå¯Ÿè§‰ä¸å‡†ç¡®

### ğŸ’¡ å¯¹æ¯”æ€»ç»“
| æ–¹æ¡ˆ | ç”¨æˆ·ä½“éªŒ | æŠ€æœ¯å¤æ‚åº¦ | é€‰æ‹© |
|------|---------|----------|------|
| æ— è¿›åº¦æ¡ | ğŸ˜° ç„¦è™‘ï¼Œå¯èƒ½æ”¾å¼ƒ | ç®€å• | âŒ |
| One-phase+å‡è¿›åº¦ | ğŸ˜ è¿›åº¦ä¸å‡† | ç®€å• | âŒ |
| Two-phase+çœŸè¿›åº¦ | ğŸ˜Š çŸ¥é“åœ¨åšä»€ä¹ˆ | ä¸­ç­‰ | âœ… |

ä¸ºä»€ä¹ˆé€‰Two-phaseï¼šå¹³è¡¡äº†ç”¨æˆ·ä½“éªŒå’ŒæŠ€æœ¯å¤æ‚åº¦
```

**æ—¶é—´æŠ•å…¥**ï¼š3åˆ†é’Ÿé˜…è¯»

**å­¦ä¹ æ”¶ç›Š**ï¼šç†è§£æ–¹æ¡ˆçš„ä¼˜åŠ£å¯¹æ¯”ï¼Œå»ºç«‹åˆ¤æ–­æ ‡å‡†

##### æœºåˆ¶5: Failure Learning Entryï¼ˆå¤±è´¥å­¦ä¹ ï¼‰
**ç›®æ ‡**ï¼šæ¯æ¬¡å‡ºé”™éƒ½æ˜¯å­¦ä¹ æœºä¼šï¼Œé¿å…é‡å¤çŠ¯é”™

**è§¦å‘æ—¶æœº**ï¼šHumanå‘ç°é—®é¢˜/Bugã€æµ‹è¯•å¤±è´¥

**æ ‡å‡†æ ¼å¼**ï¼š
```markdown
## Failure Learning Entry #001

### å‘ç”Ÿäº†ä»€ä¹ˆ
ç”¨æˆ·æŠ¥å‘Šï¼šä¿®æ”¹è¿‡æ•åå¥½åï¼Œæ¨èç»“æœæ²¡æœ‰å˜åŒ–

### ç—‡çŠ¶
**ç”¨æˆ·çœ‹åˆ°**ï¼šæ·»åŠ "èŠ±ç”Ÿè¿‡æ•" â†’ é‡æ–°æ¨è â†’ ä»å‡ºç°å«èŠ±ç”Ÿèœå“

**æŠ€æœ¯è¡¨ç°**ï¼š
```javascript
preferences.allergens = ["èŠ±ç”Ÿ"] âœ… æ›´æ–°æˆåŠŸ
POST /api/recommend
Body: { dietaryRestrictions: { allergies: [] } } â† ç©ºçš„ï¼
```

### æ ¹æœ¬åŸå› 
**è¡¨é¢åŸå› **ï¼šå‰ç«¯å‘é€æ—¶å¿˜è®°æ˜ å°„å­—æ®µ
**æ·±å±‚åŸå› **ï¼šæ•°æ®å­˜ä¸¤ä¸ªåœ°æ–¹ï¼Œæ²¡æœ‰åŒæ­¥æœºåˆ¶
**ç±»å‹åˆ†ç±»**ï¼šçŠ¶æ€åŒæ­¥é—®é¢˜ï¼ˆDual State Syncï¼‰

### åº”è¯¥ç”±ä»€ä¹ˆæ‹¦æˆª
**åº”è¯¥åœ¨**ï¼šGate 2ï¼ˆè®¾è®¡é˜¶æ®µï¼‰
**åº”è¯¥ç”±**ï¼šMQ5ï¼ˆçŠ¶æ€åŒæ­¥éªŒè¯ï¼‰
**ä¸ºä»€ä¹ˆæ²¡æ‹¦ä½**ï¼šMQ5åªæ£€æŸ¥å‰ç«¯ï¼Œæ²¡æ£€æŸ¥å‰åç«¯çŠ¶æ€

### ä¿®å¤æ–¹æ¡ˆ
**æŠ€æœ¯ä¿®å¤**ï¼šç»Ÿä¸€ä¸ºå•ä¸€çŠ¶æ€ï¼Œåˆ é™¤é‡å¤å­˜å‚¨
**æµç¨‹ä¿®å¤**ï¼šæ›´æ–°MQ5ï¼Œè¦æ±‚"å®Œæ•´çŠ¶æ€æµå›¾"ï¼ˆå«å‰åç«¯ï¼‰

### å­¦åˆ°äº†ä»€ä¹ˆ
**æŠ€æœ¯å±‚é¢**ï¼šSingle Source of Truthï¼ˆå•ä¸€æ•°æ®æºï¼‰
**ç³»ç»Ÿå±‚é¢**ï¼šå‰åç«¯äº¤äº’æœ€å®¹æ˜“å‡ºç°å­—æ®µä¸ä¸€è‡´
**äº§å“å±‚é¢**ï¼šç”¨æˆ·è¾“å…¥å¿…é¡»ç«‹å³ç”Ÿæ•ˆ

### æ›´æ–°æ£€æŸ¥ç‚¹
**å¢å¼ºMQ5**ï¼š
```yaml
evidence_requirements:
  - "å¿…é¡»åŒ…å«å‰ç«¯å’Œåç«¯çš„çŠ¶æ€"
  - "å¿…é¡»æ ‡æ³¨ä¸»çŠ¶æ€ï¼ˆSource of Truthï¼‰"
  - "å¿…é¡»å›ç­”ï¼šå¦‚æœå¿˜è®°åŒæ­¥ä¼šæ€æ ·ï¼Ÿ"
```

### ğŸ’¡ Humanè®°ä½
**ä¸€å¥è¯åŸåˆ™**ï¼šæ•°æ®åªåº”è¯¥å­˜ä¸€ä¸ªåœ°æ–¹ï¼›å¦‚æœå¿…é¡»å­˜å¤šä¸ªï¼Œæ˜ç¡®è°æ˜¯è€å¤§

**çº¢æ——æ ‡å¿—**ï¼š
ğŸš© çœ‹åˆ°ä¸¤ä¸ªç±»ä¼¼å˜é‡åï¼ˆallergens vs allergiesï¼‰
ğŸš© çœ‹åˆ°"å‰ç«¯å­˜ä¸€ä»½ï¼Œåç«¯å­˜ä¸€ä»½"

**ä¸‹æ¬¡é‡åˆ°ç±»ä¼¼åœºæ™¯**ï¼š
ç«‹å³é—®ï¼š"è¿™ä¸ªæ•°æ®å­˜å‡ ä¸ªåœ°æ–¹ï¼Ÿå®ƒä»¬ä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿ"
```

**æ—¶é—´æŠ•å…¥**ï¼š10åˆ†é’Ÿï¼ˆä½†é¿å…æœªæ¥é‡å¤çŠ¯é”™ï¼‰

**å­¦ä¹ æ”¶ç›Š**ï¼š
- æç‚¼é€šç”¨åŸåˆ™ï¼ˆå¯è¿ç§»åˆ°å…¶ä»–é¡¹ç›®ï¼‰
- è¯†åˆ«å¤±è´¥æ¨¡å¼ï¼ˆå»ºç«‹"çº¢æ——"è­¦è§‰ï¼‰
- è‡ªåŠ¨æ›´æ–°æ£€æŸ¥ç‚¹ï¼ˆç³»ç»Ÿè¿›åŒ–ï¼‰

---

#### å­¦ä¹ æ•ˆæœè¡¡é‡

**çŸ­æœŸæŒ‡æ ‡ï¼ˆé¡¹ç›®å†…ï¼‰**ï¼š
```yaml
å‚ä¸åº¦:
  gate2_review_completion: >90%
  interactive_challenge_response: >80%

ç†è§£åº¦:
  decision_rationale_understanding: èƒ½è¯´å‡º2+ä¸ªæƒè¡¡ç»´åº¦
  gate2_issue_detection: æ¯ä¸ªåŠŸèƒ½è‡³å°‘å‘ç°1ä¸ªé—®é¢˜
```

**ä¸­æœŸæŒ‡æ ‡ï¼ˆè·¨é¡¹ç›®ï¼‰**ï¼š
```yaml
çŸ¥è¯†å¤ç”¨:
  checklist_application: "ä¸Šæ¬¡å­¦åˆ°çš„ï¼Œè¿™æ¬¡è®°å¾—æ£€æŸ¥"
  principle_recall: "è®°å¾—å•ä¸€æ•°æ®æºåŸåˆ™"

è‡ªä¸»å†³ç­–:
  independent_judgment: Humanå¼€å§‹åœ¨Alexæå‡ºå‰å°±æœ‰åˆ¤æ–­
```

**é•¿æœŸæŒ‡æ ‡ï¼ˆèƒ½åŠ›å»ºç«‹ï¼‰**ï¼š
```yaml
ç³»ç»Ÿæ€ç»´:
  impact_chain_length: èƒ½é¢„è§1å±‚/2å±‚/3å±‚å½±å“
  failure_pattern_recognition: èƒ½è¯†åˆ«3+ç§å¤±è´¥æ¨¡å¼

è´¨é‡æ„è¯†:
  edge_case_consideration: ä¸»åŠ¨æå‡ºè¾¹ç•Œæƒ…å†µ
```

**å­¦ä¹ é—­ç¯å®Œæˆçš„ä¿¡å·**ï¼š
```
é¡¹ç›®1 â†’ å­¦åˆ°"å•ä¸€æ•°æ®æº" â†’ æ›´æ–°MQ5
       â†“
é¡¹ç›®2 â†’ Humanä¸»åŠ¨é—®"æ•°æ®å­˜å‡ ä¸ªåœ°æ–¹ï¼Ÿ"
       â†’ è®¾è®¡æ—¶å°±é¿å…äº†é—®é¢˜ âœ…
```

---

## ç¬¬å››éƒ¨åˆ†ï¼šåˆ†é˜¶æ®µå®æ–½è·¯çº¿å›¾

### 4.1 å®æ–½ç­–ç•¥

**æ ¸å¿ƒåŸåˆ™**ï¼š
1. **æ¸è¿›å¼**ï¼šä¸ä¸€æ¬¡æ€§æ›´æ¢æ‰€æœ‰å†…å®¹
2. **å¯å›æ»š**ï¼šæ¯ä¸ªé˜¶æ®µéƒ½å¯ä»¥å›é€€
3. **ä½é£é™©**ï¼šä»å½±å“å°çš„å¼€å§‹
4. **å¯éªŒè¯**ï¼šæ¯ä¸ªé˜¶æ®µéƒ½æœ‰æˆåŠŸæŒ‡æ ‡

**æ—¶é—´è¡¨**ï¼š
- ğŸŸ¢ Phase 1ï¼šç«‹å³å¯åšï¼ˆ1-2å¤©ï¼‰
- ğŸŸ¡ Phase 2ï¼šè°¨æ…æ¨è¿›ï¼ˆ1-2å‘¨ï¼‰
- ğŸ”µ Phase 3ï¼šé•¿æœŸä¼˜åŒ–ï¼ˆ1ä¸ªæœˆï¼‰

---

### 4.2 Phase 1ï¼šç«‹å³å¯åšï¼ˆ1-2å¤©ï¼‰

#### ç›®æ ‡
åœ¨ä¸å½±å“ç°æœ‰æµç¨‹çš„æƒ…å†µä¸‹ï¼Œæ·»åŠ è¯æ®æ”¶é›†èƒ½åŠ›ã€‚

#### Action 1.1ï¼šå¤‡ä»½ç°æœ‰é…ç½®ï¼ˆ15åˆ†é’Ÿï¼‰
```bash
cd /Users/sheldonzhao/programs/TAD

# åˆ›å»ºå¤‡ä»½ç›®å½•
mkdir -p .backup/v3.0-$(date +%Y%m%d)

# å¤‡ä»½å…³é”®æ–‡ä»¶
cp .tad/config.yaml .backup/v3.0-$(date +%Y%m%d)/
cp .tad/templates/handoff-a-to-b.md .backup/v3.0-$(date +%Y%m%d)/
cp .tad/agents/agent-a-architect.md .backup/v3.0-$(date +%Y%m%d)/
cp .tad/agents/agent-b-executor.md .backup/v3.0-$(date +%Y%m%d)/

echo "âœ… å¤‡ä»½å®Œæˆï¼Œä½ç½®: .backup/v3.0-$(date +%Y%m%d)/"
```

#### Action 1.2ï¼šæ›´æ–°config.yaml - æ·»åŠ v3.1é…ç½®ï¼ˆ2å°æ—¶ï¼‰
```bash
# åœ¨.tad/config.yamlæœ«å°¾è¿½åŠ v3.1é…ç½®
# è¯¦è§ç¬¬äº”éƒ¨åˆ†ï¼šé…ç½®æ–‡ä»¶å®Œæ•´æ›´æ–°
```

**å…³é”®å†…å®¹**ï¼š
- è¯æ®å¼éªŒè¯ç³»ç»Ÿï¼ˆ5ç§è¯æ®ç±»å‹ï¼‰
- å¼ºåˆ¶é—®é¢˜ç³»ç»Ÿï¼ˆMQ1-5ï¼‰
- Humanè§’è‰²å¢å¼º
- å­¦ä¹ æœºåˆ¶é…ç½®

**éªŒè¯**ï¼š
```bash
# æ£€æŸ¥YAMLè¯­æ³•
python3 -c "import yaml; yaml.safe_load(open('.tad/config.yaml'))"
# å¦‚æœæ²¡æŠ¥é”™ï¼Œè¯´æ˜æ ¼å¼æ­£ç¡® âœ…
```

#### Action 1.3ï¼šæ›´æ–°handoffæ¨¡æ¿ï¼ˆ2å°æ—¶ï¼‰
```bash
# 1. å¤‡ä»½æ—§æ¨¡æ¿
cp .tad/templates/handoff-a-to-b.md .tad/templates/handoff-a-to-b.md.v3.0

# 2. æ›´æ–°æ¨¡æ¿å†…å®¹
# è¯¦è§ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡æ¿æ–‡ä»¶æ›´æ–°
```

**å…³é”®æ›´æ–°**ï¼š
- Section 5: å¼ºåˆ¶é—®é¢˜å›ç­”ï¼ˆMQ1-5ï¼‰
- Section 6: Implementation Stepsï¼ˆåˆ†Phase + æ¯Phaseè¯æ®è¦æ±‚ï¼‰
- Section 10: Sub-Agentä½¿ç”¨è®°å½•

**éªŒè¯**ï¼š
```bash
# æ£€æŸ¥æ¨¡æ¿å®Œæ•´æ€§
grep "MQ1" .tad/templates/handoff-a-to-b.md
grep "Phase 1 å®Œæˆè¯æ®" .tad/templates/handoff-a-to-b.md
# éƒ½åº”è¯¥æœ‰è¾“å‡º âœ…
```

#### Action 1.4ï¼šåˆ›å»ºæ–°ä»»åŠ¡æ–‡ä»¶ï¼ˆ1å°æ—¶ï¼‰
```bash
# åˆ›å»ºè¯æ®æ”¶é›†æŒ‡å—
touch .tad/tasks/evidence-collection.md

# åˆ›å»ºHumanå¿«é€Ÿå‚è€ƒ
touch .tad/guides/human-quick-reference.md

# åˆ›å»ºå­¦ä¹ æœºåˆ¶æŒ‡å—
touch .tad/guides/learning-mechanisms.md

# å¡«å……å†…å®¹ï¼ˆä»å®æ–½æŒ‡å—å’Œå­¦ä¹ è§„èŒƒå¤åˆ¶ï¼‰
```

#### Action 1.5ï¼šè¯•ç‚¹é¡¹ç›®ï¼ˆ3å°æ—¶ï¼‰
é€‰æ‹©ä¸€ä¸ª**å°åŠŸèƒ½**è¿›è¡Œè¯•ç‚¹ï¼š
1. Alexä½¿ç”¨æ–°handoffæ¨¡æ¿åˆ›å»ºè®¾è®¡
2. å¡«å†™MQ1-5ï¼ˆæä¾›è¯æ®ï¼‰
3. Humanè¿›è¡ŒGate 2å®¡æŸ¥ï¼ˆ10-15åˆ†é’Ÿï¼‰
4. Blakeå®ç°Phase 1
5. æä¾›Phase 1å®Œæˆè¯æ®
6. Humanè¿›è¡ŒPhaseæ£€æŸ¥ï¼ˆ5-10åˆ†é’Ÿï¼‰

**æˆåŠŸæ ‡å‡†**ï¼š
- âœ… Alexèƒ½é¡ºåˆ©å¡«å†™MQè¯æ®
- âœ… Humanèƒ½çœ‹æ‡‚è¯æ®å¹¶å®Œæˆå®¡æŸ¥
- âœ… è‡³å°‘åœ¨Gate 2å‘ç°1ä¸ªé—®é¢˜ï¼ˆè¯æ˜æœ‰æ•ˆï¼‰
- âœ… æ•´ä¸ªæµç¨‹æ—¶é—´å¢åŠ <30åˆ†é’Ÿï¼ˆå¯æ¥å—ï¼‰

---

### 4.3 Phase 2ï¼šè°¨æ…æ¨è¿›ï¼ˆ1-2å‘¨ï¼‰

#### ç›®æ ‡
å°†è¯æ®å¼æ£€æŸ¥ä»"å»ºè®®"æ”¹ä¸º"å¼ºåˆ¶"ï¼ŒHumanå…¨é¢å‚ä¸ã€‚

#### Action 2.1ï¼šå°†MQä»"å»ºè®®"æ”¹ä¸º"å¼ºåˆ¶"ï¼ˆ1å¤©ï¼‰
```yaml
# æ›´æ–°.tad/config.yaml
mandatory_questions:
  enabled: true
  blocking: true  # â† æ”¹ä¸ºé˜»å¡æ¨¡å¼

  enforcement:
    when: "Gate 2 (Design Completeness)"
    how: "Alexå¿…é¡»åœ¨handoffä¸­åŒ…å«å®Œæ•´MQå›ç­”+è¯æ®"
    validation: "Humanæ£€æŸ¥æ¯ä¸ªMQ"
    consequence: "è¯æ®ä¸å®Œæ•´ â†’ é˜»æ­¢è¿›å…¥å®ç°é˜¶æ®µ"
```

**éªŒè¯æ–¹æ³•**ï¼š
ä¸‹ä¸ªé¡¹ç›®ä¸­ï¼ŒAlexå°è¯•è·³è¿‡æŸä¸ªMQ â†’ åº”è¯¥è¢«æé†’/é˜»æ­¢

#### Action 2.2ï¼šHumanåŸ¹è®­ï¼ˆåŠå¤©ï¼‰
**ç›®æ ‡**ï¼šè®©Humanç†Ÿç»ƒä½¿ç”¨æ–°æµç¨‹

**åŸ¹è®­å†…å®¹**ï¼š
1. **ç†è®ºè®²è§£**ï¼ˆ30åˆ†é’Ÿï¼‰ï¼š
   - ä¸ºä»€ä¹ˆéœ€è¦è¯æ®å¼æ£€æŸ¥
   - Humançš„æ–°è§’è‰²å’ŒèŒè´£
   - ä¸éœ€è¦æŠ€æœ¯çŸ¥è¯†çš„ç§˜è¯€

2. **å®æ“æ¼”ç»ƒ**ï¼ˆ1å°æ—¶ï¼‰ï¼š
   - ä½¿ç”¨è¯•ç‚¹é¡¹ç›®çš„handoff
   - æ¼”ç¤ºå¦‚ä½•å®¡æŸ¥MQè¯æ®
   - æ¼”ç¤ºå¦‚ä½•çœ‹æ•°æ®æµå›¾ã€çŠ¶æ€æµå›¾
   - æ¼”ç¤ºå¦‚ä½•åˆ¤æ–­"é€šè¿‡/ä¸é€šè¿‡"

3. **ç­”ç–‘**ï¼ˆ30åˆ†é’Ÿï¼‰ï¼š
   - å›ç­”Humançš„ç–‘é—®
   - è°ƒæ•´å®¡æŸ¥æ¸…å•ï¼ˆæ ¹æ®åé¦ˆï¼‰

**åŸ¹è®­ææ–™**ï¼š
- `.tad/guides/human-quick-reference.md`
- è¯•ç‚¹é¡¹ç›®çš„å®é™…handoff
- å®¡æŸ¥æ¸…å•checklist

#### Action 2.3ï¼šå»ºç«‹Phase-Gateç»‘å®šï¼ˆ1å‘¨ï¼‰
**æ”¹å˜**ï¼š
```
æ—§ï¼šæ•´ä¸ªhandoffä¸€æ¬¡æ€§äº¤ç»™Blake â†’ å®ŒæˆåHumanéªŒè¯
æ–°ï¼šæ¯ä¸ªPhaseå®Œæˆ â†’ HumanéªŒè¯ â†’ é€šè¿‡æ‰èƒ½ç»§ç»­ä¸‹ä¸ªPhase
```

**å®æ–½**ï¼š
1. æ›´æ–°handoffæ¨¡æ¿ï¼ˆæ¯ä¸ªPhaseæ˜ç¡®äº¤ä»˜ç‰©å’Œè¯æ®è¦æ±‚ï¼‰
2. Blakeå®ŒæˆPhaseåï¼Œä¸»åŠ¨æä¾›è¯æ®ç»™Human
3. Human 5-10åˆ†é’Ÿå¿«é€Ÿå®¡æŸ¥
4. é€šè¿‡ â†’ ç»§ç»­ï¼›è°ƒæ•´ â†’ ä¿®æ”¹æœ¬Phase

**éªŒè¯**ï¼š
ä¸‹ä¸ªé¡¹ç›®ä¸­ï¼Œåœ¨Phase 1å°±å‘ç°æ–¹å‘é—®é¢˜ â†’ åªè¿”å·¥1ä¸ªPhaseï¼ˆä¸æ˜¯å…¨éƒ¨ï¼‰

#### Action 2.4ï¼šå¯ç”¨å­¦ä¹ æœºåˆ¶ï¼ˆé€‰æ‹©æ€§ï¼‰
**ç›®æ ‡**ï¼šåœ¨æ„Ÿå…´è¶£çš„Humanä¸­è¯•ç‚¹å­¦ä¹ æœºåˆ¶

**æœ€å°å­¦ä¹ å¥—é¤**ï¼ˆæ¨èå¼€å§‹ï¼‰ï¼š
- Decision Rationaleï¼ˆå†³ç­–ç†ç”±ï¼‰ï¼šæ¯ä¸ªé‡è¦å†³ç­–
- What-If Scenariosï¼ˆå‡è®¾åœºæ™¯ï¼‰ï¼šæ¯ä¸ªPhase
- Failure Learning Entryï¼ˆå¤±è´¥å­¦ä¹ ï¼‰ï¼šå‡ºé”™æ—¶

**å®Œæ•´å­¦ä¹ å¥—é¤**ï¼ˆæ·±åº¦å­¦ä¹ ï¼‰ï¼š
- å¢åŠ Interactive Challengeï¼ˆäº’åŠ¨æŒ‘æˆ˜ï¼‰
- å¢åŠ Impact Visualizationï¼ˆå½±å“å¯è§†åŒ–ï¼‰
- å¢åŠ Project Learning Reportï¼ˆé¡¹ç›®å­¦ä¹ æŠ¥å‘Šï¼‰

**éªŒè¯**ï¼š
- Humanèƒ½è§£é‡Š"ä¸ºä»€ä¹ˆé€‰è¿™ä¸ªæ–¹æ¡ˆ"
- Humanèƒ½ä¸¾ä¾‹"å¦‚æœé€‰å…¶ä»–ä¼šæ€æ ·"

---

### 4.4 Phase 3ï¼šé•¿æœŸä¼˜åŒ–ï¼ˆ1ä¸ªæœˆï¼‰

#### Action 3.1ï¼šè‡ªåŠ¨åŒ–å¤±è´¥å­¦ä¹ é—­ç¯ï¼ˆ2å‘¨ï¼‰
**ç›®æ ‡**ï¼šHumançº æ­£é”™è¯¯ â†’ è‡ªåŠ¨ç”ŸæˆMQå»ºè®® â†’ Humanç¡®è®¤ â†’ é…ç½®è‡ªåŠ¨æ›´æ–°

**å®æ–½**ï¼š
1. åˆ›å»ºå¤±è´¥æ•è·æœºåˆ¶
2. å½“Humanè¯´"ä¸å¯¹"ã€"é”™äº†"æ—¶ï¼Œè§¦å‘Failure Learning Entryåˆ›å»º
3. AIåˆ†æï¼šè¿™ä¸ªé—®é¢˜åº”è¯¥ç”±å“ªä¸ªMQæ‹¦æˆªï¼Ÿ
4. ç”ŸæˆMQæ›´æ–°å»ºè®®
5. Humanå®¡æ ¸å¹¶ç¡®è®¤
6. è‡ªåŠ¨æ›´æ–°config.yamlå’Œhandoffæ¨¡æ¿

**å·¥å…·æ”¯æŒ**ï¼ˆå¯é€‰ï¼‰ï¼š
```bash
# åˆ›å»ºCLIå·¥å…·
./tad capture-failure "ç”¨æˆ·çº æ­£ï¼šæ¨èç»“æœæœªå˜åŒ–"
# â†’ è‡ªåŠ¨åˆ›å»ºFailure Learning Entry
# â†’ åˆ†ææ ¹å› 
# â†’ ç”ŸæˆMQæ›´æ–°å»ºè®®

./tad review-mq-update [failure-id]
# â†’ Humanå®¡æŸ¥å»ºè®®
# â†’ æ‰¹å‡†/æ‹’ç»/ä¿®æ”¹

./tad apply-mq-update [failure-id]
# â†’ è‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶
# â†’ è®°å½•å˜æ›´å†å²
```

#### Action 3.2ï¼šå¼€å‘è¯æ®è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆ2å‘¨ï¼‰
**ç›®æ ‡**ï¼šå‡å°‘Alexæ‰‹åŠ¨æ”¶é›†è¯æ®çš„è´Ÿæ‹…

**å·¥å…·1ï¼šå‡½æ•°ä½ç½®è‡ªåŠ¨æ£€æµ‹**
```bash
# è¾“å…¥ï¼šhandoffä¸­çš„å‡½æ•°åˆ—è¡¨
# è¾“å‡ºï¼šè‡ªåŠ¨ç”Ÿæˆå‡½æ•°ä½ç½®è¯æ˜è¡¨

./tad-tools detect-functions --handoff handoff.md
# è‡ªåŠ¨æ‰«æå‡½æ•°è°ƒç”¨
# ä½¿ç”¨ASTåˆ†ææ‰¾åˆ°å‡½æ•°å®šä¹‰ä½ç½®
# ç”ŸæˆMarkdownè¡¨æ ¼
```

**å·¥å…·2ï¼šæ•°æ®æµè‡ªåŠ¨åˆ†æ**
```bash
# è¾“å…¥ï¼šbackend APIå“åº”schema + frontendç»„ä»¶
# è¾“å‡ºï¼šæ•°æ®æµå¯¹ç…§è¡¨

./tad-tools analyze-dataflow \
  --api src/api/recommend.ts \
  --components src/components/
# è‡ªåŠ¨å¯¹æ¯”APIè¿”å›å­—æ®µå’Œç»„ä»¶ä½¿ç”¨
# ç”Ÿæˆæ•°æ®æµå›¾ï¼ˆMermaidï¼‰
# æ ‡è®°æœªä½¿ç”¨çš„å­—æ®µ
```

**å·¥å…·3ï¼šæµ‹è¯•ç»“æœè‡ªåŠ¨é™„åŠ **
```bash
# CIé›†æˆï¼šæµ‹è¯•å®Œæˆåè‡ªåŠ¨é™„åŠ åˆ°PhaseæŠ¥å‘Š

# .github/workflows/ci.yml
- name: Run tests and attach results
  run: |
    npm test > test-results.txt
    ./tad-tools attach-evidence \
      --type test_result \
      --phase 1 \
      --file test-results.txt
```

#### Action 3.3ï¼šå»ºç«‹å­¦ä¹ æ•ˆæœè¿½è¸ªï¼ˆæŒç»­ï¼‰
**ç›®æ ‡**ï¼šé‡åŒ–Humançš„æˆé•¿å’Œç³»ç»Ÿçš„æ”¹è¿›

**æœˆåº¦è¯„ä¼°è¡¨**ï¼š
```markdown
## æœˆåº¦å­¦ä¹ æ•ˆæœè¯„ä¼° - 2025å¹´12æœˆ

### å‚ä¸åº¦ï¼ˆçŸ­æœŸï¼‰
- [x] Gate 2å®¡æŸ¥å®Œæˆç‡ï¼š95% ï¼ˆç›®æ ‡>90%ï¼‰âœ…
- [x] Interactive Challengeå›ç­”ç‡ï¼š85% ï¼ˆç›®æ ‡>80%ï¼‰âœ…
- [x] What-IfæŸ¥çœ‹ç‡ï¼š75% ï¼ˆç›®æ ‡>70%ï¼‰âœ…

### ç†è§£åº¦ï¼ˆçŸ­æœŸï¼‰
- [x] èƒ½è§£é‡ŠæŠ€æœ¯å†³ç­–æƒè¡¡ï¼š8æ¬¡ / 10ä¸ªå†³ç­–
- [x] Gate 2å‘ç°é—®é¢˜ï¼š12ä¸ªé—®é¢˜ / 10ä¸ªåŠŸèƒ½ âœ…

### çŸ¥è¯†è¿ç§»ï¼ˆä¸­æœŸï¼‰
- [x] ä¸»åŠ¨æåˆ°ä¹‹å‰å­¦åˆ°çš„åŸåˆ™ï¼š6æ¬¡
- [x] ä½¿ç”¨ä¹‹å‰çš„æ£€æŸ¥æ¸…å•ï¼šæ˜¯
- [x] ä¸¾ä¾‹ä¹‹å‰çš„å¤±è´¥æ¡ˆä¾‹ï¼š4æ¬¡

### èƒ½åŠ›å»ºç«‹ï¼ˆé•¿æœŸï¼‰
- [x] é¢„è§å½±å“é“¾é•¿åº¦ï¼š2å±‚ï¼ˆæ¯”ä¸Šæœˆæå‡ï¼‰
- [x] ä¸»åŠ¨æå‡ºè¾¹ç•Œæƒ…å†µï¼š5æ¬¡
- [x] è¯†åˆ«å¤±è´¥æ¨¡å¼ï¼š3ç§æ¨¡å¼

### å°è±¡æœ€æ·±çš„å­¦ä¹ 
1. å•ä¸€æ•°æ®æºåŸåˆ™ï¼ˆé¿å…äº†2æ¬¡æ½œåœ¨Bugï¼‰
2. MVPä¼˜å…ˆ"è¶³å¤Ÿå¥½"çš„æ£€æŸ¥æ¸…å•
3. é€šè¿‡çŠ¶æ€æµå›¾æå‰å‘ç°åŒæ­¥é—®é¢˜

### ä¸‹æœˆæ”¹è¿›
- [ ] æƒ³åŠ å¼ºï¼šç³»ç»Ÿæ€ç»´ï¼ˆé¢„è§ç¬¬ä¸‰å±‚å½±å“ï¼‰
- [ ] æƒ³è°ƒæ•´ï¼šç®€åŒ–Interactive Challengeæ ¼å¼
```

**ç³»ç»Ÿè¿›åŒ–è¿½è¸ª**ï¼š
```yaml
tad_evolution_metrics:
  version: 3.1.2

  quality_metrics:
    problem_detection_rate:
      gate2: 92% (baseline: 0%)
      phase_checkpoints: 78%

    false_positive_rate: 8% (acceptable)

  mq_effectiveness:
    MQ1_historical_code:
      triggered: 15æ¬¡
      caught_issues: 12æ¬¡
      effectiveness: 80%

    MQ2_function_existence:
      triggered: 45æ¬¡
      caught_issues: 43æ¬¡
      effectiveness: 96% â­

    MQ5_state_sync:
      triggered: 20æ¬¡
      caught_issues: 18æ¬¡
      effectiveness: 90%

  learning_outcomes:
    principles_learned: 8ä¸ª
    patterns_recognized: 5ç§
    checklists_created: 3ä¸ª

  time_metrics:
    avg_gate2_time: 12åˆ†é’Ÿ
    avg_phase_checkpoint: 7åˆ†é’Ÿ
    avg_learning_time: 25åˆ†é’Ÿ/åŠŸèƒ½

    rework_time_saved: å¹³å‡æ¯ä¸ªåŠŸèƒ½èŠ‚çœ4.5å°æ—¶
```

---

### 4.5 å®æ–½æ—¶é—´çº¿æ€»ç»“

```
Week 1 (Phase 1)ï¼š
â”œâ”€ Day 1-2: å¤‡ä»½ + æ›´æ–°é…ç½®æ–‡ä»¶ + æ¨¡æ¿
â”œâ”€ Day 3: åˆ›å»ºæŒ‡å—æ–‡æ¡£
â”œâ”€ Day 4-5: è¯•ç‚¹é¡¹ç›® + è°ƒæ•´

Week 2-3 (Phase 2)ï¼š
â”œâ”€ Week 2: MQå¼ºåˆ¶åŒ– + HumanåŸ¹è®­
â””â”€ Week 3: Phase-Gateç»‘å®š + å­¦ä¹ æœºåˆ¶è¯•ç‚¹

Week 4-8 (Phase 3)ï¼š
â”œâ”€ Week 4-5: å¤±è´¥å­¦ä¹ é—­ç¯è‡ªåŠ¨åŒ–
â”œâ”€ Week 6-7: è¯æ®è‡ªåŠ¨åŒ–å·¥å…·å¼€å‘
â””â”€ Week 8+: å­¦ä¹ æ•ˆæœè¿½è¸ª + æŒç»­ä¼˜åŒ–
```

---

## ç¬¬äº”éƒ¨åˆ†ï¼šé…ç½®æ–‡ä»¶å®Œæ•´æ›´æ–°

### 5.1 config.yaml å¢é‡æ›´æ–°

åœ¨ç°æœ‰`.tad/config.yaml`æ–‡ä»¶**æœ«å°¾è¿½åŠ **ä»¥ä¸‹å†…å®¹ï¼š

```yaml
# ==================== TAD v3.1 å¢å¼ºé…ç½® ====================
# åˆ›å»ºæ—¥æœŸ: 2025-11-25
# åŸºäº: MenuSnapé¡¹ç›®å®è¯åˆ†æ + ä¸‰ä»½æ ¸å¿ƒæ–‡æ¡£
# ç›®æ ‡: è¯æ®å¼è´¨é‡ä¿è¯ + Humanå¯è§†åŒ–èµ‹èƒ½ + æŒç»­å­¦ä¹ 

tad_version: 3.1.0
enhancement_date: 2025-11-25
philosophy: "Evidence-Based Triangle Development with Continuous Learning"

# ==================== è¯æ®å¼éªŒè¯ç³»ç»Ÿ ====================
evidence_based_verification:
  enabled: true
  description: "æ‰€æœ‰å…³é”®æ£€æŸ¥ç‚¹éƒ½éœ€è¦æä¾›å¯éªŒè¯çš„è¯æ®"

  required_evidence_types:
    # è¯æ®ç±»å‹1ï¼šæœç´¢ç»“æœ
    search_result:
      format: "å‘½ä»¤ + ç»“æœæˆªå›¾æˆ–æ–‡æœ¬è¾“å‡º"
      purpose: "è¯æ˜ç¡®å®æœç´¢äº†å†å²ä»£ç "
      example: |
        ```bash
        # æœç´¢å‘½ä»¤
        grep -r "calculateScore" src/

        # ç»“æœ
        src/lib/utils.ts:42: export function calculateScoreAndReasons(...)
        ```
      human_validation: "èƒ½çœ‹åˆ°æœç´¢å‘½ä»¤å’Œç»“æœ"
      mandatory_for: ["MQ1"]

    # è¯æ®ç±»å‹2ï¼šä»£ç ä½ç½®è¯æ˜
    code_location:
      format: "Markdownè¡¨æ ¼ï¼šå‡½æ•°å | æ–‡ä»¶ä½ç½® | è¡Œå· | ä»£ç ç‰‡æ®µ | éªŒè¯çŠ¶æ€"
      purpose: "è¯æ˜å‡½æ•°/ç»„ä»¶ç¡®å®å­˜åœ¨"
      example: |
        | å‡½æ•°å | ä½ç½® | è¡Œå· | ä»£ç ç‰‡æ®µ | éªŒè¯ |
        |--------|------|------|---------|------|
        | calculateScore | src/lib/utils.ts | 42 | `export function calculateScore(...)` | âœ… |
      human_validation: "èƒ½çœ‹åˆ°å…·ä½“ä½ç½®å’Œä»£ç ï¼Œæ¯ä¸ªéƒ½æ ‡è®°âœ…"
      mandatory_for: ["MQ2"]

    # è¯æ®ç±»å‹3ï¼šæ•°æ®æµå›¾
    data_flow_diagram:
      format: "Mermaidå›¾ + Markdownå¯¹ç…§è¡¨"
      purpose: "å±•ç¤ºæ•°æ®ä»åç«¯åˆ°å‰ç«¯çš„å®Œæ•´æµåŠ¨"
      example: |
        ```mermaid
        graph LR
          A[Backend API] -->|è®¡ç®—| B[score, reasons, warnings]
          B -->|ä¼ é€’| C[Frontend]
          C -->|æ˜¾ç¤º| D[ScoreDisplay]
          C -->|æ˜¾ç¤º| E[ReasonList]
          C -->|æ˜¾ç¤º| F[WarningAlert]
        ```

        | åç«¯å­—æ®µ | å‰ç«¯ç»„ä»¶ | æ˜¯å¦æ˜¾ç¤º | ä¸æ˜¾ç¤ºåŸå›  |
        |---------|---------|---------|-----------|
        | score | ScoreDisplay | âœ… | - |
        | matchReasons | ReasonList | âœ… | - |
      human_validation: "èƒ½çœ‹åˆ°æ¯ä¸ªå­—æ®µéƒ½æœ‰å¯¹åº”çš„æ˜¾ç¤ºç»„ä»¶ï¼Œæˆ–æœ‰åˆç†çš„ä¸æ˜¾ç¤ºåŸå› "
      mandatory_for: ["MQ3"]

    # è¯æ®ç±»å‹4ï¼šçŠ¶æ€æµå›¾
    state_flow_diagram:
      format: "ASCIIå›¾æˆ–MermaidçŠ¶æ€å›¾"
      purpose: "å±•ç¤ºçŠ¶æ€çš„æ¥æºã€å­˜å‚¨ä½ç½®ã€åŒæ­¥æ—¶æœº"
      example: |
        [ç”¨æˆ·è¾“å…¥] â†’ preferences.allergens (ä¸»çŠ¶æ€ï¼ŒSource of Truth)
                      â†“ åŒæ­¥æ—¶æœºï¼šonSubmitäº‹ä»¶
                   dietaryRestrictions.allergies (å¤‡ä»½çŠ¶æ€)
      human_validation: "èƒ½çœ‹åˆ°æ˜¯å¦æœ‰å¤šå¤„å­˜å‚¨ã€è°æ˜¯ä¸»çŠ¶æ€ã€ä½•æ—¶åŒæ­¥"
      mandatory_for: ["MQ5"]

    # è¯æ®ç±»å‹5ï¼šUIæˆªå›¾
    ui_screenshot:
      format: "æµè§ˆå™¨æˆªå›¾æˆ–UI mockup"
      purpose: "è¯æ˜åŠŸèƒ½çš„è§†è§‰æ•ˆæœ"
      example: "æµè§ˆå™¨æˆªå›¾æ˜¾ç¤ºæ¨èç†ç”±å’Œè­¦å‘Šçš„è§†è§‰å±‚çº§"
      human_validation: "èƒ½çœ‹åˆ°å®é™…æ˜¾ç¤ºæ•ˆæœï¼Œè§†è§‰å±‚çº§æ¸…æ™°"
      mandatory_for: ["MQ4", "Phaseå®ŒæˆæŠ¥å‘Š"]

    # è¯æ®ç±»å‹6ï¼šæµ‹è¯•ç»“æœ
    test_result:
      format: "æµ‹è¯•è¿è¡Œæˆªå›¾æˆ–æ—¥å¿—è¾“å‡º"
      purpose: "è¯æ˜ä»£ç èƒ½è¿è¡Œã€æµ‹è¯•é€šè¿‡"
      example: |
        ```
        âœ“ 42 tests passing
        âœ“ Coverage: 87%
        ```
      human_validation: "èƒ½çœ‹åˆ°æµ‹è¯•é€šè¿‡ï¼ˆpassed/ç»¿è‰²âœ“ï¼‰ï¼Œè¦†ç›–ç‡è¾¾æ ‡"
      mandatory_for: ["Phaseå®ŒæˆæŠ¥å‘Š"]

# ==================== å¼ºåˆ¶å›ç­”é—®é¢˜ç³»ç»Ÿ ====================
mandatory_questions:
  enabled: true
  blocking: true
  auto_sync: true
  source: ".tad/evidence/patterns/failure-patterns.md"
  description: "ä»å†å²å¤±è´¥ä¸­æç‚¼çš„å¿…é¡»å›ç­”çš„é—®é¢˜"

  # é—®é¢˜åº“
  questions:
    MQ1_historical_code:
      id: "MQ1"
      pattern_source: "Failure Pattern 2: Creating Instead of Searching"
      trigger_keywords: ["ä¹‹å‰çš„", "åŸæ¥çš„", "æˆ‘ä»¬çš„æ–¹æ¡ˆ", "previous", "original", "existing"]
      trigger_condition: "ç”¨æˆ·æè¿°ä¸­æåˆ°å†å²æ–¹æ¡ˆæˆ–ç°æœ‰åŠŸèƒ½"

      question: "ç”¨æˆ·æåˆ°äº†å†å²æ–¹æ¡ˆï¼Œä½ æ‰¾åˆ°ç›¸å…³ä»£ç äº†å—ï¼Ÿ"
      sub_questions:
        - "æœç´¢äº†å“ªäº›å…³é”®è¯ï¼Ÿ"
        - "æ‰¾åˆ°äº†ä»€ä¹ˆï¼Ÿåœ¨å“ªé‡Œï¼Ÿ"
        - "ä¸ºä»€ä¹ˆå†³å®šå¤ç”¨/ä¸å¤ç”¨ï¼Ÿ"

      required_evidence: "search_result"
      evidence_format: "æœç´¢å‘½ä»¤ + å®Œæ•´è¾“å‡º + å†³ç­–è¯´æ˜"
      blocking: true

      human_validation_question: "èƒ½çœ‹åˆ°æœç´¢ç¡®å®æ‰§è¡Œäº†å—ï¼Ÿå†³ç­–ç†ç”±åˆç†å—ï¼Ÿ"

    MQ2_function_existence:
      id: "MQ2"
      pattern_source: "Failure Pattern 3: Function Assumption Errors"
      trigger_condition: "è®¾è®¡ä¸­åŒ…å«å‡½æ•°è°ƒç”¨æˆ–ç»„ä»¶å¼•ç”¨"

      question: "è®¾è®¡ä¸­è°ƒç”¨äº†å“ªäº›å‡½æ•°/ç»„ä»¶ï¼Ÿå®ƒä»¬éƒ½å­˜åœ¨å—ï¼Ÿ"
      sub_questions:
        - "åˆ—å‡ºæ‰€æœ‰å°†è°ƒç”¨çš„å‡½æ•°/ç»„ä»¶"
        - "æ¯ä¸ªå‡½æ•°åœ¨å“ªä¸ªæ–‡ä»¶çš„ç¬¬å‡ è¡Œï¼Ÿ"
        - "è¯·æä¾›å‡½æ•°å®šä¹‰çš„ä»£ç ç‰‡æ®µ"

      required_evidence: "code_location"
      evidence_format: "Markdownè¡¨æ ¼ï¼Œæ¯ä¸ªå‡½æ•°/ç»„ä»¶éƒ½æœ‰ä½ç½®è¯æ˜"
      blocking: true

      human_validation_question: "æ¯ä¸ªå‡½æ•°éƒ½æœ‰âœ…å­˜åœ¨æ ‡è®°å’Œå…·ä½“ä½ç½®å—ï¼Ÿ"

    MQ3_data_flow:
      id: "MQ3"
      pattern_source: "Failure Pattern 4: Incomplete Data Flow"
      trigger_condition: "åç«¯è®¡ç®—æˆ–è¿”å›æ•°æ®ç»™å‰ç«¯"

      question: "åç«¯è®¡ç®—/è¿”å›äº†å“ªäº›å­—æ®µï¼Ÿå‰ç«¯éƒ½æ˜¾ç¤ºäº†å—ï¼Ÿ"
      sub_questions:
        - "åç«¯è¿”å›çš„å®Œæ•´å­—æ®µåˆ—è¡¨"
        - "æ¯ä¸ªå­—æ®µåœ¨å‰ç«¯çš„å“ªä¸ªç»„ä»¶æ˜¾ç¤ºï¼Ÿ"
        - "æœ‰æ²¡æœ‰å­—æ®µä¸æ˜¾ç¤ºï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ"

      required_evidence: "data_flow_diagram"
      evidence_format: "æ•°æ®æµå›¾ï¼ˆMermaidï¼‰+ å¯¹ç…§è¡¨"
      blocking: true

      human_validation_question: |
        - åç«¯æ¯ä¸ªå­—æ®µéƒ½æœ‰å¯¹åº”çš„å‰ç«¯ç»„ä»¶å—ï¼Ÿ
        - "âŒä¸æ˜¾ç¤º"çš„å­—æ®µæœ‰åˆç†åŸå› å—ï¼Ÿ

    MQ4_visual_hierarchy:
      id: "MQ4"
      pattern_source: "Failure Pattern 5: Visual Uniformity Disease"
      trigger_condition: "åŠŸèƒ½æœ‰å¤šä¸ªçŠ¶æ€ã€ç±»å‹æˆ–ä¼˜å…ˆçº§"

      question: "è¿™ä¸ªåŠŸèƒ½æœ‰ä¸åŒçš„çŠ¶æ€/ç±»å‹å—ï¼Ÿç”¨æˆ·å¦‚ä½•è§†è§‰ä¸ŠåŒºåˆ†ï¼Ÿ"
      sub_questions:
        - "æœ‰å“ªäº›ä¸åŒçš„çŠ¶æ€ï¼Ÿï¼ˆå¦‚ï¼šæ¨è/ä¸æ¨èï¼ŒæˆåŠŸ/å¤±è´¥ï¼‰"
        - "æ¯ä¸ªçŠ¶æ€çš„è§†è§‰è¡¨ç°æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆé¢œè‰²ã€å›¾æ ‡ã€æ–‡å­—ï¼‰"
        - "ç”¨æˆ·èƒ½ä¸€çœ¼çœ‹å‡ºåŒºåˆ«å—ï¼Ÿ"

      required_evidence: "ui_screenshot"
      evidence_format: "UIçŠ¶æ€å¯¹æ¯”è¡¨ + æˆªå›¾/mockup"
      blocking: false  # è­¦å‘Šä½†ä¸é˜»å¡

      human_validation_question: "ä»æˆªå›¾èƒ½çœ‹å‡ºä¸åŒçŠ¶æ€çš„æ˜æ˜¾åŒºåˆ«å—ï¼Ÿ"

    MQ5_state_sync:
      id: "MQ5"
      pattern_source: "Real Issue: Dual State Sync Problem"
      trigger_condition: "æ¶‰åŠç”¨æˆ·è¾“å…¥ã€çŠ¶æ€ç®¡ç†æˆ–å‰åç«¯æ•°æ®ä¼ é€’"

      question: "æ•°æ®å­˜åœ¨å‡ ä¸ªåœ°æ–¹ï¼Ÿå®ƒä»¬ä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿ"
      sub_questions:
        - "åˆ—å‡ºæ‰€æœ‰å­˜å‚¨è¿™ä¸ªæ•°æ®çš„åœ°æ–¹ï¼ˆå‰ç«¯state/localStorage/åç«¯session/databaseï¼‰"
        - "å“ªä¸ªæ˜¯ä¸»çŠ¶æ€ï¼ˆSource of Truthï¼‰ï¼Ÿ"
        - "å…¶ä»–çŠ¶æ€ä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿç”¨ä»€ä¹ˆè§¦å‘ï¼Ÿ"
        - "å¦‚æœå¿˜è®°åŒæ­¥ä¼šæ€æ ·ï¼Ÿç”¨æˆ·ä¼šçœ‹åˆ°ä»€ä¹ˆï¼Ÿ"

      required_evidence: "state_flow_diagram"
      evidence_format: "çŠ¶æ€æµå›¾ï¼Œæ ‡æ³¨ä¸»çŠ¶æ€ã€åŒæ­¥æ—¶æœºå’Œè§¦å‘æ¡ä»¶"
      blocking: true

      human_validation_question: |
        - æ¸…æ¥šæ ‡æ³¨å“ªä¸ªæ˜¯ä¸»çŠ¶æ€äº†å—ï¼Ÿ
        - åŒæ­¥æ—¶æœºæ˜ç¡®å—ï¼Ÿ
        - æˆ–ç¡®è®¤åªæœ‰å•ä¸€çŠ¶æ€ï¼Ÿ

  # æ‰§è¡Œæœºåˆ¶
  enforcement:
    when: "Gate 2 (Design Completeness)"
    how: "Alexå¿…é¡»åœ¨handoffä¸­åŒ…å«'å¼ºåˆ¶é—®é¢˜å›ç­”'ç« èŠ‚"
    validation: "Humanæ£€æŸ¥æ¯ä¸ªè§¦å‘çš„MQæ˜¯å¦éƒ½æœ‰å›ç­”+è¯æ®"
    consequence_missing: "è¯æ®ä¸å®Œæ•´ â†’ é˜»æ­¢æäº¤handoffï¼Œè¦æ±‚è¡¥å……"
    consequence_incomplete: "è¯æ®è´¨é‡ä½ â†’ Humanè¦æ±‚é‡æ–°æä¾›"

  # è‡ªåŠ¨æ›´æ–°æœºåˆ¶
  auto_update_pipeline:
    trigger: "Humançº æ­£äº†AIçš„é”™è¯¯æˆ–å‘ç°æ–°çš„å¤±è´¥æ¨¡å¼"
    process: |
      1. æ•è·é”™è¯¯ç±»å‹å’Œæ ¹å› ï¼ˆåˆ›å»ºFailure Learning Entryï¼‰
      2. åˆ¤æ–­ï¼šè¿™ä¸ªé”™è¯¯åº”è¯¥ç”±å“ªä¸ªMQæ‹¦æˆªï¼Ÿ
      3. å¦‚æœç°æœ‰MQæœªè¦†ç›–ï¼š
         - ç”Ÿæˆæ–°MQå»ºè®®ï¼ˆMQ6ã€MQ7...ï¼‰
         - æäº¤Humanå®¡æ ¸
         - å®¡æ ¸é€šè¿‡åè‡ªåŠ¨æ·»åŠ åˆ°config.yaml
      4. å¦‚æœç°æœ‰MQåº”è¯¥æ‹¦æˆªä½†æ²¡æ‹¦ï¼š
         - åˆ†æä¸ºä»€ä¹ˆæ²¡æ‹¦ä½ï¼ˆtriggeræ¡ä»¶ä¸å¤Ÿï¼Ÿevidenceä¸å¤Ÿï¼Ÿï¼‰
         - ä¼˜åŒ–MQçš„triggeræ¡ä»¶æˆ–evidenceè¦æ±‚
         - æ›´æ–°config.yaml
    output_location: ".tad/evidence/failures/[timestamp]_mq_update.yaml"

# ==================== æ¸è¿›å¼éªŒè¯ç³»ç»Ÿ ====================
progressive_validation:
  enabled: true
  description: "å°†å¤§ä»»åŠ¡åˆ†è§£ä¸ºPhaseï¼Œæ¯ä¸ªPhaseåHumanéªŒè¯"

  phase_structure:
    definition: |
      Phaseæ˜¯åŠŸèƒ½çš„é€»è¾‘ç»„æˆéƒ¨åˆ†ï¼Œæ¯ä¸ªPhaseï¼š
      - æœ‰æ˜ç¡®çš„äº¤ä»˜ç‰©ï¼ˆä»£ç ã€æ–‡æ¡£ã€æµ‹è¯•ï¼‰
      - æœ‰ç‹¬ç«‹çš„éªŒè¯æ ‡å‡†
      - å®Œæˆåéœ€è¦Humanå®¡æŸ¥æ‰èƒ½ç»§ç»­

    size_guideline:
      small_task: "1ä¸ªPhaseï¼Œ1-2å°æ—¶å®Œæˆ"
      medium_task: "2-3ä¸ªPhaseï¼Œæ¯ä¸ªPhase 2-3å°æ—¶"
      large_task: "4-6ä¸ªPhaseï¼Œæ¯ä¸ªPhaseä¸è¶…è¿‡4å°æ—¶"

    mandatory_checkpoint: "æ¯ä¸ªPhaseå®Œæˆæ—¶Blakeå¿…é¡»æä¾›è¯æ®ï¼ŒHumanå¿…é¡»å®¡æŸ¥"

  phase_evidence_requirements:
    every_phase_must_provide:
      - code_screenshot: "å…³é”®å‡½æ•°/ç»„ä»¶çš„ä»£ç æˆªå›¾"
      - test_result: "è¯¥Phaseç›¸å…³çš„æµ‹è¯•ç»“æœ"
      - ui_screenshot: "å¦‚æœæœ‰UIå˜åŒ–ï¼Œæä¾›æµè§ˆå™¨æˆªå›¾"
      - progress_notes: "é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ³•"

    human_checkpoint_questions:
      - "è¿™æ˜¯æˆ‘æœŸæœ›çš„æ–¹å‘å—ï¼Ÿ"
      - "æµ‹è¯•é€šè¿‡äº†å—ï¼Ÿï¼ˆçœ‹åˆ°passed/ç»¿è‰²âœ“ï¼‰"
      - "éœ€è¦è°ƒæ•´ä»€ä¹ˆå—ï¼Ÿ"

    continue_criteria: "Humanç¡®è®¤æ–¹å‘æ­£ç¡®"
    adjustment_process: "å¦‚æœéœ€è¦è°ƒæ•´ï¼ŒBlakeä¿®æ”¹æœ¬Phaseåé‡æ–°æäº¤è¯æ®"

  gate_phase_binding:
    description: "å°†Quality Gatesç»‘å®šåˆ°Phase"

    gate2_design_phases:
      phase: "è®¾è®¡é˜¶æ®µå„Phaseï¼ˆå¦‚æœè®¾è®¡åˆ†å¤šä¸ªPhaseï¼‰"
      checkpoint_type: "design_evidence"
      timing: "æ¯å®Œæˆä¸€ä¸ªè®¾è®¡æ¨¡å—"
      human_action: "å®¡æŸ¥è®¾è®¡å›¾è¡¨å’Œè¯æ®"

    gate3_implementation_phases:
      phase: "å®ç°é˜¶æ®µå„Phase"
      checkpoint_type: "implementation_evidence"
      timing: "æ¯å®Œæˆä¸€ä¸ªPhase"
      human_action: "å®¡æŸ¥ä»£ç æˆªå›¾ã€æµ‹è¯•ç»“æœã€UIæ•ˆæœ"
      continue_criteria: "Humanç¡®è®¤æ–¹å‘æ­£ç¡®æ‰èƒ½ç»§ç»­ä¸‹ä¸ªPhase"

# ==================== Humanè§’è‰²å¢å¼º ====================
human_role_v31:
  role_name: "Value Guardian + Checkpoint Validator"

  role_evolution:
    from: "è¢«åŠ¨éªŒæ”¶è€…ï¼ˆåªåœ¨æœ€åéªŒæ”¶ï¼‰"
    to: "ä¸»åŠ¨éªŒè¯è€…ï¼ˆå‚ä¸è®¾è®¡å®¡æŸ¥å’Œæ¸è¿›æ£€æŸ¥ï¼‰+ å­¦ä¹ è€…ï¼ˆæ¯ä¸ªé¡¹ç›®éƒ½åœ¨æˆé•¿ï¼‰"

  responsibilities:
    value_guardian:
      - "å®šä¹‰ä¸šåŠ¡ä»·å€¼å’Œéœ€æ±‚"
      - "éªŒè¯æœ€ç»ˆäº¤ä»˜çš„ä»·å€¼"
      - "åšå…³é”®ä¸šåŠ¡å†³ç­–"
      time_investment: "éœ€æ±‚é˜¶æ®µï¼š30-60åˆ†é’Ÿ"

    checkpoint_validator:
      - "å®¡æŸ¥è®¾è®¡é˜¶æ®µçš„è¯æ®ï¼ˆå›¾è¡¨ã€è¡¨æ ¼ï¼‰"
      - "å®¡æŸ¥å®ç°é˜¶æ®µçš„è¯æ®ï¼ˆæˆªå›¾ã€æµ‹è¯•ç»“æœï¼‰"
      - "ç¡®è®¤æ¯ä¸ªPhaseæ–¹å‘æ­£ç¡®"
      time_investment: "æ¯ä¸ªPhaseï¼š5-15åˆ†é’Ÿ"
      skill_required: "ä¸éœ€è¦æŠ€æœ¯çŸ¥è¯†ï¼Œåªéœ€çœ‹å›¾åˆ¤æ–­"

    learner:
      - "ç†è§£æŠ€æœ¯å†³ç­–çš„æƒè¡¡ï¼ˆDecision Rationaleï¼‰"
      - "æ€è€ƒå‡è®¾åœºæ™¯ï¼ˆWhat-If Scenariosï¼‰"
      - "ä»å¤±è´¥ä¸­å­¦ä¹ ï¼ˆFailure Learning Entryï¼‰"
      time_investment: "æ¯ä¸ªåŠŸèƒ½ï¼š20-30åˆ†é’Ÿï¼ˆå¯é€‰ï¼‰"
      skill_acquired: "æŠ€æœ¯å†³ç­–ç›´è§‰ã€ç³»ç»Ÿæ€§æ€ç»´ã€è´¨é‡æ„è¯†"

  participation_points:
    gate1_requirements:
      when: "éœ€æ±‚ç¡®è®¤å®Œæˆ"
      human_action: "ç¡®è®¤éœ€æ±‚ç†è§£æ­£ç¡®"
      evidence_to_review: "éœ€æ±‚æ–‡æ¡£"
      decision: "æ‰¹å‡†è¿›å…¥è®¾è®¡/è¦æ±‚ä¿®æ”¹"
      time_budget: "0åˆ†é’Ÿï¼ˆåŸæœ‰æµç¨‹ï¼‰"

    gate2_design:
      when: "è®¾è®¡å®Œæˆï¼Œåˆ›å»ºhandoffå‰"
      human_action: "å®¡æŸ¥è®¾è®¡è¯æ®"
      evidence_to_review:
        - "å¼ºåˆ¶é—®é¢˜ï¼ˆMQ1-5ï¼‰çš„å›ç­”+è¯æ®"
        - "æ•°æ®æµå›¾å’Œå¯¹ç…§è¡¨"
        - "çŠ¶æ€æµå›¾"
        - "å‡½æ•°ä½ç½®è¯æ˜è¡¨"
      questions_to_answer:
        - "è¯æ®å®Œæ•´å—ï¼Ÿæœ‰æ²¡æœ‰ç©ºç€çš„ï¼Ÿ"
        - "æ•°æ®æµå›¾æ˜¾ç¤ºåç«¯å­—æ®µéƒ½ä¼ åˆ°å‰ç«¯äº†å—ï¼Ÿ"
        - "çŠ¶æ€æµå›¾æ˜¾ç¤ºæ•°æ®åªå­˜ä¸€ä¸ªåœ°æ–¹ï¼Œæˆ–åŒæ­¥æœºåˆ¶æ¸…æ™°å—ï¼Ÿ"
        - "æ–¹å‘çœ‹èµ·æ¥æ­£ç¡®å—ï¼Ÿ"
      decision: "é€šè¿‡â†’ç»§ç»­ / ä¸é€šè¿‡â†’Alexè¡¥å……è¯æ®"
      time_budget: "10-15åˆ†é’Ÿ"

    phase_checkpoints:
      when: "Blakeå®Œæˆæ¯ä¸ªPhase"
      human_action: "å¿«é€Ÿå®¡æŸ¥Phaseäº¤ä»˜ç‰©"
      evidence_to_review:
        - "ä»£ç æˆªå›¾ï¼ˆå…³é”®å‡½æ•°ï¼‰"
        - "æµ‹è¯•ç»“æœæˆªå›¾"
        - "UIæˆªå›¾ï¼ˆå¦‚æœæœ‰UIï¼‰"
      questions_to_answer:
        - "è¿™æ˜¯æˆ‘æœŸæœ›çš„æ–¹å‘å—ï¼Ÿ"
        - "æµ‹è¯•é€šè¿‡äº†å—ï¼Ÿ"
        - "UIæ˜¾ç¤ºæ­£ç¡®å—ï¼Ÿ"
      decision: "ç»§ç»­â†’ä¸‹ä¸ªPhase / è°ƒæ•´â†’ä¿®æ”¹æœ¬Phase"
      time_budget: "5-10åˆ†é’Ÿ/Phase"

    gate3_implementation:
      when: "æ‰€æœ‰Phaseå®Œæˆ"
      human_action: "æœ€ç»ˆéªŒè¯"
      evidence_to_review:
        - "å®Œæ•´çš„æµ‹è¯•æŠ¥å‘Š"
        - "å®Œæ•´çš„UIæˆªå›¾"
        - "æ€§èƒ½æµ‹è¯•ç»“æœï¼ˆå¦‚éœ€è¦ï¼‰"
      decision: "é€šè¿‡â†’äº¤ä»˜ / é—®é¢˜â†’ä¿®å¤"
      time_budget: "10-15åˆ†é’Ÿ"

  total_time_investment:
    per_feature:
      gate2: "10-15åˆ†é’Ÿ"
      phase_checkpoints: "5-10åˆ†é’Ÿ Ã— Phaseæ•°é‡"
      gate3: "10-15åˆ†é’Ÿ"
      learning_optional: "20-30åˆ†é’Ÿ"
      total_example: "å°åŠŸèƒ½çº¦30åˆ†é’Ÿï¼Œä¸­åŠŸèƒ½çº¦60åˆ†é’Ÿï¼Œå¤§åŠŸèƒ½çº¦90åˆ†é’Ÿ"

    value_proposition: |
      æŠ•å…¥30-60åˆ†é’Ÿçš„å®¡æŸ¥+å­¦ä¹ ï¼Œå¯ä»¥ï¼š
      - æå‰å‘ç°æ–¹å‘é”™è¯¯ï¼ˆèŠ‚çœ3-6å°æ—¶è¿”å·¥ï¼‰
      - å‡å°‘æœ€åé˜¶æ®µçš„å¤§é‡ä¿®æ”¹
      - ç¡®ä¿å®ç°ç¬¦åˆçœŸæ­£æ„å›¾ï¼Œä¸æ˜¯å­—é¢æ„æ€
      - å»ºç«‹æŠ€æœ¯å†³ç­–ç›´è§‰ï¼Œé•¿æœŸå—ç›Š

# ==================== å­¦ä¹ æœºåˆ¶ç³»ç»Ÿ ====================
learning_mechanisms:
  enabled: true
  description: "TADä¸ä»…å¸®åŠ©Humanæ‰§è¡Œé¡¹ç›®ï¼Œæ›´å¸®åŠ©Humanå»ºç«‹ç³»ç»Ÿæ€§æ€ç»´å’Œå†³ç­–ç›´è§‰"

  philosophy: |
    ä¼ ç»ŸåŸ¹è®­ï¼šè¯»ä¹¦ â†’ ç†è§£æ¦‚å¿µ â†’ åº”ç”¨ï¼ˆæ–­å±‚ï¼‰
    TADå­¦ä¹ ï¼šçœŸå®å†³ç­– â†’ çœ‹åˆ°åæœ â†’ å»ºç«‹ç›´è§‰ â†’ è‡ªç„¶åº”ç”¨

  learning_dimensions:
    dimension1_technical_tradeoffs:
      name: "æŠ€æœ¯å†³ç­–æƒè¡¡æ€ç»´"
      goal: "å»ºç«‹'æ²¡æœ‰å®Œç¾æ–¹æ¡ˆï¼Œåªæœ‰æƒè¡¡'çš„æ€ç»´"
      levels:
        - "Level 1: çŸ¥é“æœ‰å¤šä¸ªæ–¹æ¡ˆå¯é€‰"
        - "Level 2: ç†è§£æ¯ä¸ªæ–¹æ¡ˆçš„ä¼˜ç¼ºç‚¹"
        - "Level 3: èƒ½åˆ¤æ–­åœ¨å½“å‰åœºæ™¯ä¸‹å“ªä¸ªæ›´åˆé€‚"
        - "Level 4: èƒ½é¢„è§æœªæ¥åœºæ™¯å˜åŒ–æ—¶éœ€è¦åˆ‡æ¢æ–¹æ¡ˆ"
      mechanisms: ["Decision Rationale", "Interactive Challenge"]

    dimension2_systemic_thinking:
      name: "ç³»ç»Ÿæ€§æ€ç»´"
      goal: "çœ‹åˆ°'å±€éƒ¨æ”¹åŠ¨'å¦‚ä½•å½±å“'æ•´ä¸ªç³»ç»Ÿ'"
      levels:
        - "Level 1: çŸ¥é“'æ”¹Aä¼šå½±å“B'"
        - "Level 2: èƒ½ç”»å‡ºå½±å“é“¾è·¯ï¼ˆA â†’ B â†’ Cï¼‰"
        - "Level 3: èƒ½é¢„è§ç¬¬äºŒå±‚å½±å“"
        - "Level 4: èƒ½è®¾è®¡'æ”¹Aä½†ä¸å½±å“B'çš„éš”ç¦»æœºåˆ¶"
      mechanisms: ["Impact Visualization", "What-If Scenarios"]

    dimension3_product_ux:
      name: "äº§å“/UXç›´è§‰"
      goal: "ç†è§£'ç”¨æˆ·çœ‹åˆ°ä»€ä¹ˆ'å’Œ'ç”¨æˆ·æ„Ÿå—åˆ°ä»€ä¹ˆ'"
      levels:
        - "Level 1: çŸ¥é“UIè¦å¥½çœ‹"
        - "Level 2: ç†è§£ä¸åŒè§†è§‰è®¾è®¡ä¼ è¾¾ä¸åŒä¿¡æ¯"
        - "Level 3: èƒ½åˆ¤æ–­å“ªä¸ªè®¾è®¡æ›´ç¬¦åˆç”¨æˆ·ä»»åŠ¡"
        - "Level 4: èƒ½ä»ç”¨æˆ·è¡Œä¸ºæ•°æ®æ¨æ–­UIé—®é¢˜"
      mechanisms: ["What-If Scenarios", "Decision Rationale"]

    dimension4_quality_awareness:
      name: "è´¨é‡æ„è¯†å’Œé£é™©é¢„è§"
      goal: "ç†è§£'ä»€ä¹ˆåœ°æ–¹å®¹æ˜“å‡ºé”™'å’Œ'å¦‚ä½•æå‰é˜²å¾¡'"
      levels:
        - "Level 1: çŸ¥é“è¦æµ‹è¯•"
        - "Level 2: çŸ¥é“æµ‹è¯•ä»€ä¹ˆï¼ˆè¾¹ç•Œæƒ…å†µã€é”™è¯¯è·¯å¾„ï¼‰"
        - "Level 3: èƒ½é¢„è§'æ”¹è¿™é‡Œå¯èƒ½å½±å“é‚£é‡Œ'"
        - "Level 4: èƒ½è®¾è®¡'é˜²å¾¡æ€§æ¶æ„'ï¼ˆå‡ºé”™äº†ä¹Ÿä¸ä¼šé›ªå´©ï¼‰"
      mechanisms: ["Failure Learning Entry", "What-If Scenarios"]

  mechanisms:
    mechanism1_decision_rationale:
      name: "Decision Rationaleï¼ˆå†³ç­–ç†ç”±ï¼‰"
      goal: "ç†è§£ä¸ºä»€ä¹ˆé€‰Aä¸é€‰Bï¼Œå»ºç«‹æƒè¡¡æ€ç»´"
      timing: "æ¯ä¸ªé‡è¦æŠ€æœ¯å†³ç­–"
      format: "å¯¹æ¯”è¡¨æ ¼ + æƒè¡¡åˆ†æ + æœªæ¥åˆ‡æ¢æ¡ä»¶"
      time_cost: "+5åˆ†é’Ÿ"
      learning_dimensions: ["æŠ€æœ¯å†³ç­–", "ç³»ç»Ÿæ€ç»´"]

    mechanism2_interactive_challenge:
      name: "Interactive Challengeï¼ˆäº’åŠ¨æŒ‘æˆ˜ï¼‰"
      goal: "è®©Humanä¸»åŠ¨æ€è€ƒï¼Œè€Œéè¢«åŠ¨æ¥å—ç­”æ¡ˆ"
      timing: "å…³é”®å†³ç­–ç‚¹ï¼Œåœ¨Alexç»™å‡ºæ–¹æ¡ˆä¹‹å‰"
      format: "åœºæ™¯æè¿° + å¤‡é€‰æ–¹æ¡ˆ + æ€è€ƒé—®é¢˜ â†’ Alexåˆ†æ"
      time_cost: "+3åˆ†é’Ÿ"
      learning_dimensions: ["æ‰€æœ‰ç»´åº¦"]

    mechanism3_impact_visualization:
      name: "Impact Visualizationï¼ˆå½±å“å¯è§†åŒ–ï¼‰"
      goal: "çœ‹åˆ°æ”¹åŠ¨çš„è¿é”ååº”"
      timing: "æ¶æ„è®¾è®¡æˆ–æ•°æ®æµå˜æ›´"
      format: "å½±å“é“¾è·¯å›¾ï¼ˆMermaidï¼‰+ å½±å“æ¸…å•ï¼ˆ3å±‚ï¼‰"
      time_cost: "+2åˆ†é’Ÿ"
      learning_dimensions: ["ç³»ç»Ÿæ€ç»´"]

    mechanism4_what_if_scenarios:
      name: "What-If Scenariosï¼ˆå‡è®¾åœºæ™¯ï¼‰"
      goal: "é€šè¿‡å¯¹æ¯”ç†è§£ä¸ºä»€ä¹ˆè¿™æ ·åš"
      timing: "æ¯ä¸ªPhaseå®Œæˆ"
      format: "å®é™…æ–¹æ¡ˆ vs æ›¿ä»£æ–¹æ¡ˆçš„æ•ˆæœå¯¹æ¯”"
      time_cost: "+3åˆ†é’Ÿ"
      learning_dimensions: ["æ‰€æœ‰ç»´åº¦"]

    mechanism5_failure_learning:
      name: "Failure Learning Entryï¼ˆå¤±è´¥å­¦ä¹ ï¼‰"
      goal: "æ¯æ¬¡å‡ºé”™éƒ½æ˜¯å­¦ä¹ æœºä¼šï¼Œé¿å…é‡å¤çŠ¯é”™"
      timing: "Humanå‘ç°é—®é¢˜ã€æµ‹è¯•å¤±è´¥ã€ç”¨æˆ·æŠ¥å‘ŠBug"
      format: "æ ¹å› åˆ†æ + æç‚¼åŸåˆ™ + æ›´æ–°æ£€æŸ¥ç‚¹"
      time_cost: "+10åˆ†é’Ÿï¼ˆä½†é¿å…æœªæ¥é‡å¤ï¼‰"
      learning_dimensions: ["è´¨é‡æ„è¯†"]

  learning_metrics:
    short_term:
      participation_rate:
        gate2_review_completion: ">90%"
        interactive_challenge_response: ">80%"

      understanding:
        decision_rationale_understanding: "èƒ½è¯´å‡º2+ä¸ªæƒè¡¡ç»´åº¦"
        gate2_issue_detection: "æ¯ä¸ªåŠŸèƒ½è‡³å°‘å‘ç°1ä¸ªé—®é¢˜"

    mid_term:
      knowledge_reuse:
        checklist_application: "ä¸»åŠ¨ä½¿ç”¨ä¸Šä¸ªé¡¹ç›®çš„æ£€æŸ¥æ¸…å•"
        principle_recall: "èƒ½ä¸¾ä¾‹ä¹‹å‰å­¦åˆ°çš„åŸåˆ™"

      independent_judgment:
        level: "Humanå¼€å§‹åœ¨Alexæå‡ºå‰å°±æœ‰åˆ¤æ–­"

    long_term:
      systemic_thinking:
        impact_chain_length: "èƒ½é¢„è§1å±‚/2å±‚/3å±‚å½±å“"
        failure_pattern_recognition: "èƒ½è¯†åˆ«3+ç§å¤±è´¥æ¨¡å¼"

      quality_awareness:
        edge_case_consideration: "ä¸»åŠ¨æå‡ºè¾¹ç•Œæƒ…å†µ"

  learning_loop_completion:
    signal: |
      é¡¹ç›®1 â†’ å­¦åˆ°"å•ä¸€æ•°æ®æºåŸåˆ™" â†’ æ›´æ–°MQ5
             â†“
      é¡¹ç›®2 â†’ Humanä¸»åŠ¨é—®"æ•°æ®å­˜å‡ ä¸ªåœ°æ–¹ï¼Ÿ"
             â†’ è®¾è®¡æ—¶å°±é¿å…äº†é—®é¢˜ âœ…

# ==================== Sub-Agentå¼ºåˆ¶ä½¿ç”¨ ====================
subagent_enforcement_v31:
  enabled: true
  description: "ä»å»ºè®®å˜æˆå¼ºåˆ¶ï¼Œå¸¦è¯æ®éªŒè¯"

  agent_a_mandatory:
    product_expert:
      when: "éœ€æ±‚åˆ†æé˜¶æ®µï¼ˆRound 1åï¼‰"
      must_call: true
      evidence_required: "åœ¨éœ€æ±‚æ–‡æ¡£ä¸­åŒ…å«product-expertçš„åˆ†æç»“æœ"
      evidence_format: "ç”¨æˆ·ç”»åƒã€ç”¨ä¾‹åˆ†æã€ä¸šåŠ¡ä»·å€¼è¯„ä¼°"
      violation_action: "é˜»æ­¢è¿›å…¥è®¾è®¡é˜¶æ®µ"

    backend_architect:
      when: "è®¾è®¡ç³»ç»Ÿæ¶æ„ï¼ˆæ¶‰åŠAPI/æ•°æ®åº“/å¾®æœåŠ¡ç­‰ï¼‰"
      must_call: true
      evidence_required: "åœ¨è®¾è®¡æ–‡æ¡£ä¸­åŒ…å«backend-architectçš„å»ºè®®"
      evidence_format: "æ¶æ„å›¾ã€æŠ€æœ¯é€‰å‹ã€æ‰©å±•æ€§åˆ†æ"
      violation_action: "é˜»æ­¢åˆ›å»ºhandoff"

    code_reviewer:
      when: "å®¡æŸ¥Blakeçš„å®ç°"
      must_call: true
      evidence_required: "åœ¨å®¡æŸ¥æŠ¥å‘Šä¸­åŒ…å«code-reviewerçš„å‘ç°"
      evidence_format: "ä»£ç è´¨é‡è¯„åˆ†ã€é—®é¢˜åˆ—è¡¨ã€æ”¹è¿›å»ºè®®"
      violation_action: "é˜»æ­¢æ ‡è®°ä¸ºå®Œæˆ"

  agent_b_mandatory:
    parallel_coordinator:
      when: "ä»»åŠ¡åŒ…å«3ä¸ªä»¥ä¸Šç‹¬ç«‹ç»„ä»¶"
      must_call: true
      detection: "è‡ªåŠ¨æ£€æµ‹handoffä¸­çš„Phaseæ•°é‡â‰¥3"
      evidence_required: "åœ¨å®ŒæˆæŠ¥å‘Šä¸­è¯´æ˜å¦‚ä½•ä½¿ç”¨parallel-coordinator"
      evidence_format: "ä»»åŠ¡åˆ†è§£ã€å¹¶è¡Œæ‰§è¡Œè®¡åˆ’ã€åè°ƒæœºåˆ¶"
      violation_action: "è­¦å‘Šå¹¶è¦æ±‚è¯´æ˜ä¸ºä»€ä¹ˆä¸ç”¨"

    bug_hunter:
      when: "å‡ºç°é”™è¯¯æˆ–æµ‹è¯•å¤±è´¥"
      must_call: true
      detection: "è‡ªåŠ¨æ£€æµ‹é”™è¯¯æ—¥å¿—æˆ–æµ‹è¯•å¤±è´¥"
      evidence_required: "åœ¨ä¿®å¤æŠ¥å‘Šä¸­åŒ…å«bug-hunterçš„è¯Šæ–­"
      evidence_format: "æ ¹å› åˆ†æã€ä¿®å¤æ–¹æ¡ˆã€é¢„é˜²æªæ–½"
      violation_action: "é˜»æ­¢æ ‡è®°ä¸ºä¿®å¤å®Œæˆ"

    test_runner:
      when: "å®Œæˆå®ç°"
      must_call: true
      detection: "Phaseå®Œæˆæ—¶"
      evidence_required: "æµ‹è¯•ç»“æœæˆªå›¾æˆ–æŠ¥å‘Š"
      evidence_format: "æµ‹è¯•é€šè¿‡ç‡ã€è¦†ç›–ç‡ã€å¤±è´¥case"
      violation_action: "é˜»æ­¢è¿›å…¥ä¸‹ä¸ªPhase"

  evidence_format:
    subagent_usage_log: |
      ## Sub-Agentä½¿ç”¨è®°å½•

      | Sub-Agent | æ˜¯å¦è°ƒç”¨ | è°ƒç”¨æ—¶æœº | è¾“å‡ºæ‘˜è¦ | è¯æ®é“¾æ¥ |
      |-----------|---------|---------|---------|---------|
      | product-expert | âœ… | Round 1å | è¯†åˆ«äº†3ä¸ªå…³é”®ç”¨ä¾‹ | [é“¾æ¥åˆ°åˆ†ææ–‡æ¡£] |
      | backend-architect | âœ… | è®¾è®¡é˜¶æ®µ | å»ºè®®ä½¿ç”¨Two-phaseæ¶æ„ | [é“¾æ¥åˆ°æ¶æ„å›¾] |
      | parallel-coordinator | âŒ | N/A | ä»»åŠ¡åªæœ‰2ä¸ªç»„ä»¶ï¼Œä¸éœ€è¦ | N/A |

  human_verification:
    what_to_check: "Sub-Agentä½¿ç”¨è®°å½•è¡¨æ˜¯å¦å®Œæ•´"
    red_flags:
      - "åº”è¯¥è°ƒç”¨ä½†æ ‡è®°ä¸º'âŒ'ä¸”æ— åˆç†åŸå› "
      - "è°ƒç”¨äº†ä½†'è¾“å‡ºæ‘˜è¦'ä¸ºç©º"
      - "'è¯æ®é“¾æ¥'éƒ½æ˜¯N/A"

# ==================== æ—¶é—´ä¼°ç®—æ”¹è¿› ====================
time_estimation_v31:
  principle: "ä¼°ç®—å®ç°æ—¶é—´ Ã— 2 = å®é™…é¢„ç®—æ—¶é—´"
  reason: "è€ƒè™‘å®¡æŸ¥ã€è¿­ä»£ã€æ„å¤–é—®é¢˜ã€æ–‡æ¡£"

  buffer_allocation:
    implementation: 0.40  # çº¯ç¼–ç æ—¶é—´
    review_iteration: 0.30  # Humanå®¡æŸ¥å’Œè¿”å·¥
    unexpected_issues: 0.20  # æ„å¤–é—®é¢˜å¤„ç†
    documentation: 0.10  # æ–‡æ¡£å’ŒæŠ¥å‘Š

  checkpoint_timing:
    rule: "åœ¨50%ä¼°ç®—æ—¶é—´æ—¶ï¼Œå¼ºåˆ¶Humanå®¡æŸ¥"
    purpose: "åŠæ—©å‘ç°æ–¹å‘åå·®ï¼Œé¿å…å…¨éƒ¨è¿”å·¥"
    example: |
      ä¼°ç®—ï¼š8å°æ—¶
      å®é™…é¢„ç®—ï¼š16å°æ—¶
      å¼ºåˆ¶æ£€æŸ¥ç‚¹ï¼š4å°æ—¶å’Œ12å°æ—¶

      åœ¨4å°æ—¶æ—¶ï¼š
      - Blakeå±•ç¤ºå·²å®Œæˆçš„éƒ¨åˆ†
      - Humanç¡®è®¤æ–¹å‘æ­£ç¡®
      - å¦‚æœæ–¹å‘é”™è¯¯ï¼Œåªæµªè´¹äº†4å°æ—¶ï¼Œä¸æ˜¯16å°æ—¶

  tracking:
    record:
      - estimated_time: "ä¼°ç®—æ—¶é—´"
      - actual_time: "å®é™…èŠ±è´¹"
      - deviation_reason: "åå·®åŸå› åˆ†ç±»"
    improve:
      - "åˆ†æåå·®åŸå› "
      - "è°ƒæ•´æœªæ¥ä¼°ç®—ç³»æ•°"
      - "è¯†åˆ«å¸¸è§å»¶è¯¯å› ç´ "

# ==================== å¤±è´¥å­¦ä¹ é—­ç¯ ====================
failure_learning_loop:
  enabled: true
  description: "æ¯æ¬¡å¤±è´¥è‡ªåŠ¨è½¬åŒ–ä¸ºæœªæ¥çš„æ£€æŸ¥ç‚¹"

  trigger: "Humançº æ­£AIé”™è¯¯ï¼Œæˆ–å‘ç°Bugï¼Œæˆ–æµ‹è¯•å¤±è´¥"

  pipeline_steps:
    step1_capture:
      trigger: "Humanè¯´'ä¸å¯¹'ã€'é”™äº†'ã€'è¿™ä¸ªæœ‰é—®é¢˜'"
      action: "åˆ›å»ºFailure Learning Entry"
      data_to_capture:
        - error_type: "æŠ€æœ¯é—®é¢˜ç±»å‹"
        - root_cause: "ä¸ºä»€ä¹ˆå‘ç”Ÿ"
        - should_be_caught_by: "åº”è¯¥ç”±å“ªä¸ªGate/MQæ‹¦æˆª"
        - actual_outcome: "å®é™…ä¸Šæ”¾è¡Œäº†"
        - user_impact: "ç»™ç”¨æˆ·é€ æˆçš„å½±å“"
      output_file: ".tad/evidence/failures/[timestamp]_failure.yaml"

    step2_analyze:
      action: "åˆ†æåº”è¯¥å¢åŠ ä»€ä¹ˆæ£€æŸ¥ç‚¹"
      analysis_questions:
        - "è¿™ä¸ªé—®é¢˜å±äºå“ªä¸ªé˜¶æ®µï¼Ÿï¼ˆéœ€æ±‚/è®¾è®¡/å®ç°ï¼‰"
        - "ç°æœ‰çš„MQèƒ½æ‹¦æˆªå—ï¼Ÿå¦‚æœä¸èƒ½ï¼Œä¸ºä»€ä¹ˆï¼Ÿ"
        - "éœ€è¦ä»€ä¹ˆè¯æ®æ‰èƒ½æå‰å‘ç°ï¼Ÿ"
        - "Humanéœ€è¦çœ‹ä»€ä¹ˆæ‰èƒ½åˆ¤æ–­ï¼Ÿ"
      output_file: ".tad/evidence/failures/[timestamp]_analysis.yaml"

    step3_propose:
      action: "ç”Ÿæˆé…ç½®æ›´æ–°å»ºè®®"
      proposal_content:
        new_mq:
          id: "MQ[X]"
          question: "[ç”Ÿæˆçš„é—®é¢˜]"
          required_evidence: "[è¯æ®ç±»å‹]"
          human_validation_point: "[Humançœ‹ä»€ä¹ˆ]"
        or_mq_update:
          existing_mq: "MQ[Y]"
          enhancement: "[å¦‚ä½•å¢å¼º]"
          new_trigger: "[æ›´å‡†ç¡®çš„è§¦å‘æ¡ä»¶]"
      output_file: ".tad/evidence/failures/[timestamp]_proposal.yaml"

    step4_review:
      action: "Humanå®¡æ ¸ææ¡ˆ"
      human_questions:
        - "è¿™ä¸ªæ–°æ£€æŸ¥ç‚¹åˆç†å—ï¼Ÿ"
        - "ä¼šä¸ä¼šäº§ç”Ÿå¤ªå¤šè¯¯æŠ¥ï¼Ÿ"
        - "æˆ‘èƒ½çœ‹æ‡‚è¿™ä¸ªè¯æ®å—ï¼Ÿ"
      decision:
        approve: "è‡ªåŠ¨æ›´æ–°config.yaml"
        reject: "è®°å½•åŸå› ï¼Œä¸æ›´æ–°"
        modify: "Humanä¿®æ”¹åæ›´æ–°"

    step5_implement:
      action: "è‡ªåŠ¨æ›´æ–°é…ç½®æ–‡ä»¶"
      files_to_update:
        - ".tad/config.yaml"  # æ·»åŠ /æ›´æ–°MQ
        - ".tad/templates/handoff-a-to-b.md"  # æ›´æ–°æ¨¡æ¿
        - ".tad/evidence/patterns/failure-patterns.md"  # æ›´æ–°è®°å½•
      notification: "é…ç½®å·²è‡ªåŠ¨æ›´æ–°ï¼Œä¸‹ä¸ªé¡¹ç›®ç”Ÿæ•ˆ"
      changelog: "è®°å½•åœ¨.tad/CHANGELOG.md"

  metrics_tracking:
    track:
      - "failure_count": "æ€»å¤±è´¥æ¬¡æ•°"
      - "failures_prevented": "æ–°MQæ‹¦æˆªçš„å¤±è´¥"
      - "false_positive_rate": "è¯¯æŠ¥ç‡"
      - "mq_effectiveness": "æ¯ä¸ªMQçš„æœ‰æ•ˆæ€§"
    report_location: ".tad/evidence/metrics/learning-effectiveness.md"

# ==================== é…ç½®ç”Ÿæ•ˆæ—¶é—´ ====================
rollout_plan:
  phase1_immediate:
    description: "å¯ä»¥ç«‹å³å¯ç”¨çš„å¢å¼º"
    items:
      - "mandatory_questions"
      - "evidence_based_verification"
      - "human_role_v31"
    risk: "ä½"
    time: "1-2å¤©"

  phase2_gradual:
    description: "éœ€è¦é€æ­¥æ¨è¿›çš„å¢å¼º"
    items:
      - "progressive_validation"
      - "learning_mechanisms"
      - "subagent_enforcement_v31"
    risk: "ä¸­"
    time: "1-2å‘¨"

  phase3_advanced:
    description: "éœ€è¦å·¥å…·æ”¯æŒçš„å¢å¼º"
    items:
      - "failure_learning_loop"
      - "time_estimation_v31"
    risk: "ä½ï¼ˆå¯é€‰ï¼‰"
    time: "1ä¸ªæœˆ"

# ==================== ç‰ˆæœ¬æ§åˆ¶ ====================
version_history:
  v3.1.0:
    date: "2025-11-25"
    changes:
      - "æ–°å¢è¯æ®å¼éªŒè¯ç³»ç»Ÿï¼ˆ5ç§è¯æ®ç±»å‹ï¼‰"
      - "æ–°å¢å¼ºåˆ¶é—®é¢˜ç³»ç»Ÿï¼ˆMQ1-5ï¼‰"
      - "æ–°å¢æ¸è¿›å¼éªŒè¯ï¼ˆPhaseæ£€æŸ¥ç‚¹ï¼‰"
      - "æ–°å¢Humanè§’è‰²å¢å¼ºï¼ˆCheckpoint Validatorï¼‰"
      - "æ–°å¢å­¦ä¹ æœºåˆ¶ç³»ç»Ÿï¼ˆ5ç§æœºåˆ¶ï¼‰"
      - "æ–°å¢å¤±è´¥å­¦ä¹ é—­ç¯"
    based_on: "MenuSnapé¡¹ç›®å®è¯åˆ†æ + ä¸‰ä»½æ ¸å¿ƒæ–‡æ¡£"
    compatibility: "100%å‘åå…¼å®¹v3.0"

  v3.0:
    date: "2024-XX-XX"
    description: "åŸºç¡€TADæ–¹æ³•è®º"

# ==================== å…¼å®¹æ€§è¯´æ˜ ====================
backward_compatibility:
  v30_projects:
    compatibility: "100%å…¼å®¹"
    explanation: "v3.1æ˜¯å¢é‡æ›´æ–°ï¼Œä¸ç ´åv3.0çš„ä»»ä½•åŠŸèƒ½"
    migration: "å¯ä»¥é€‰æ‹©æ€§å¯ç”¨v3.1ç‰¹æ€§"

  rollback_support:
    enabled: true
    method: "æ¢å¤å¤‡ä»½çš„.tad/config.yaml.v3.0"
    data_preservation: "v3.1åˆ›å»ºçš„è¯æ®æ–‡æ¡£ä¿ç•™ï¼Œä¸å½±å“å›æ»š"
```

---

### 5.2 éªŒè¯é…ç½®æ–‡ä»¶

æ›´æ–°åï¼ŒéªŒè¯é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§ï¼š

```bash
# æ£€æŸ¥YAMLè¯­æ³•
python3 -c "import yaml; yaml.safe_load(open('.tad/config.yaml'))"
# å¦‚æœæ²¡æŠ¥é”™ï¼Œè¯´æ˜æ ¼å¼æ­£ç¡® âœ…

# æ£€æŸ¥å…³é”®é…ç½®æ˜¯å¦å­˜åœ¨
grep "tad_version: 3.1" .tad/config.yaml
grep "mandatory_questions:" .tad/config.yaml
grep "evidence_based_verification:" .tad/config.yaml
grep "learning_mechanisms:" .tad/config.yaml
# éƒ½åº”è¯¥æœ‰è¾“å‡º âœ…

# åˆ›å»ºç‰ˆæœ¬æ ‡è®°
echo "3.1.0" > .tad/version.txt
echo "TAD v3.1 é…ç½®å·²å®‰è£… - $(date)" >> .tad/CHANGELOG.md
```

---

## ç¬¬å…­éƒ¨åˆ†ï¼šæ¨¡æ¿æ–‡ä»¶æ›´æ–°

### 6.1 handoff-a-to-b.md æ¨¡æ¿æ›´æ–°

#### å¤‡ä»½åŸæ¨¡æ¿

```bash
cd /Users/sheldonzhao/programs/TAD
cp .tad/templates/handoff-a-to-b.md .tad/templates/handoff-a-to-b.md.v3.0.backup
```

#### å®Œæ•´æ›´æ–°åçš„æ¨¡æ¿

åˆ›å»ºæ–°æ–‡ä»¶ `.tad/templates/handoff-a-to-b-v3.1.md`ï¼š

```markdown
# Handoff Document for Agent B (Blake)
## TAD v3.1 - Evidence-Based Development

**From:** Alex (Agent A - Solution Lead)
**To:** Blake (Agent B - Execution Master)
**Date:** [Current Date]
**Project:** [Project Name]
**Task ID:** TASK-[YYYYMMDD]-[###]
**Handoff Version:** 3.1.0

---

## ğŸ“‹ Handoff Checklist (Blakeå¿…è¯»)

Blakeåœ¨å¼€å§‹å®ç°å‰ï¼Œè¯·ç¡®è®¤ï¼š
- [ ] é˜…è¯»äº†æ‰€æœ‰ç« èŠ‚
- [ ] æ‰€æœ‰"å¼ºåˆ¶é—®é¢˜å›ç­”ï¼ˆMQï¼‰"éƒ½æœ‰è¯æ®
- [ ] ç†è§£äº†çœŸæ­£æ„å›¾ï¼ˆä¸åªæ˜¯å­—é¢éœ€æ±‚ï¼‰
- [ ] æ¯ä¸ªPhaseçš„äº¤ä»˜ç‰©å’Œè¯æ®è¦æ±‚éƒ½æ¸…æ¥š
- [ ] ç¡®è®¤å¯ä»¥ç‹¬ç«‹ä½¿ç”¨æœ¬æ–‡æ¡£å®Œæˆå®ç°

âŒ å¦‚æœä»»ä½•éƒ¨åˆ†ä¸æ¸…æ¥šï¼Œ**ç«‹å³è¿”å›Alexè¦æ±‚æ¾„æ¸…**ï¼Œä¸è¦å¼€å§‹å®ç°ã€‚

---

## 1. Task Overview

### 1.1 What We're Building
[æ¸…æ™°ã€ç®€æ´çš„æè¿°]

### 1.2 Why We're Building It
**ä¸šåŠ¡ä»·å€¼**ï¼š[...]
**ç”¨æˆ·å—ç›Š**ï¼š[...]
**æˆåŠŸçš„æ ·å­**ï¼š[å½“ç”¨æˆ·èƒ½å¤Ÿ...æ—¶ï¼Œè¿™ä¸ªåŠŸèƒ½å°±æˆåŠŸäº†]

### 1.3 ğŸ†• Intent Statementï¼ˆæ„å›¾å£°æ˜ï¼‰

**çœŸæ­£è¦è§£å†³çš„é—®é¢˜**ï¼š[...]

**ä¸æ˜¯è¦åšçš„ï¼ˆé¿å…è¯¯è§£ï¼‰**ï¼š
- âŒ ä¸æ˜¯[å¸¸è§è¯¯è§£1]
- âŒ ä¸æ˜¯[å¸¸è§è¯¯è§£2]

**Blakeè¯·ç¡®è®¤ç†è§£**ï¼š
```
åœ¨å¼€å§‹å®ç°å‰ï¼Œè¯·ç”¨ä½ è‡ªå·±çš„è¯å›ç­”ï¼š
1. è¿™ä¸ªåŠŸèƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ
2. ç”¨æˆ·ä¼šå¦‚ä½•ä½¿ç”¨ï¼Ÿ
3. æˆåŠŸçš„æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿ

åªæœ‰Humanç¡®è®¤ä½ çš„ç†è§£æ­£ç¡®åï¼Œæ‰èƒ½å¼€å§‹å®ç°ã€‚
```

---

## 2. Background Context

### 2.1 Previous Work
[å·²æœ‰ä»£ç æˆ–æ¨¡å¼]

### 2.2 Current State
[ç°çŠ¶ vs ç›®æ ‡]

### 2.3 Dependencies
[å¤–éƒ¨ä¾èµ–]

---

## 3. Requirements

### 3.1 Functional Requirements
- FR1: [...]
- FR2: [...]

### 3.2 Non-Functional Requirements
- NFR1: [æ€§èƒ½ã€å¯ç”¨æ€§ç­‰]
- NFR2: [...]

---

## 4. Technical Design

### 4.1 Architecture Overview
[æ¶æ„æè¿°]

### 4.2 Component Specifications
[ç»„ä»¶è§„æ ¼]

### 4.3 Data Models
[æ•°æ®ç»“æ„]

### 4.4 API Specifications
[APIè®¾è®¡]

### 4.5 User Interface Requirements
[UIéœ€æ±‚]

---

## 5. ğŸ†• å¼ºåˆ¶é—®é¢˜å›ç­”ï¼ˆEvidence Requiredï¼‰

**é‡è¦**ï¼šè¿™äº›é—®é¢˜å¿…é¡»å›ç­”ï¼Œå¹¶æä¾›è¯æ®ã€‚Humanä¼šéªŒè¯ã€‚

### MQ1: å†å²ä»£ç æœç´¢

**é—®é¢˜**ï¼šç”¨æˆ·æ˜¯å¦æåˆ°"ä¹‹å‰çš„"ã€"åŸæ¥çš„"ã€"æˆ‘ä»¬çš„æ–¹æ¡ˆ"ï¼Ÿ

**å›ç­”**ï¼š
- [ ] æ˜¯ â†’ ç»§ç»­å¡«å†™ä¸‹é¢
- [ ] å¦ â†’ è·³è¿‡æ­¤é—®é¢˜

**å¦‚æœæ˜¯ï¼Œæä¾›è¯æ®**ï¼š

#### æœç´¢è¯æ®
\`\`\`bash
# æœç´¢å‘½ä»¤
[å®é™…æ‰§è¡Œçš„æœç´¢å‘½ä»¤]

# æœç´¢ç»“æœ
[æœç´¢è¾“å‡ºæˆ–æˆªå›¾]
\`\`\`

#### å†³ç­–è¯´æ˜
- **æ‰¾åˆ°äº†ä»€ä¹ˆ**ï¼š[...]
- **ä½ç½®**ï¼š[æ–‡ä»¶:è¡Œå·]
- **å†³å®š**ï¼šâœ… å¤ç”¨ / âŒ åˆ›å»ºæ–°çš„
- **åŸå› **ï¼š[...]

**HumanéªŒè¯ç‚¹**ï¼šèƒ½çœ‹åˆ°æœç´¢ç¡®å®æ‰§è¡Œäº†å—ï¼Ÿå†³ç­–ç†ç”±åˆç†å—ï¼Ÿ

---

### MQ2: å‡½æ•°å­˜åœ¨æ€§éªŒè¯

**é—®é¢˜**ï¼šè®¾è®¡ä¸­è°ƒç”¨äº†å“ªäº›å‡½æ•°ï¼Ÿå®ƒä»¬éƒ½å­˜åœ¨å—ï¼Ÿ

**å›ç­”**ï¼š

#### å‡½æ•°æ¸…å•ï¼ˆğŸ†• å¿…å¡«è¡¨æ ¼ï¼‰

| å‡½æ•°å | æ–‡ä»¶ä½ç½® | è¡Œå· | ä»£ç ç‰‡æ®µ | éªŒè¯ |
|--------|---------|------|---------|------|
| [å‡½æ•°1] | [ä½ç½®] | [è¡Œå·] | \`[ä»£ç ]\` | [âœ…/âŒ] |
| [å‡½æ•°2] | [ä½ç½®] | [è¡Œå·] | \`[ä»£ç ]\` | [âœ…/âŒ] |

**HumanéªŒè¯ç‚¹**ï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰"âœ…å­˜åœ¨"å’Œå…·ä½“ä½ç½®å—ï¼Ÿ

---

### MQ3: æ•°æ®æµå®Œæ•´æ€§

**é—®é¢˜**ï¼šåç«¯è®¡ç®—/è¿”å›äº†å“ªäº›å­—æ®µï¼Ÿå‰ç«¯éƒ½æ˜¾ç¤ºäº†å—ï¼Ÿ

**å›ç­”**ï¼š

#### æ•°æ®æµå¯¹ç…§è¡¨ï¼ˆğŸ†• å¿…å¡«è¡¨æ ¼ï¼‰

| åç«¯å­—æ®µ | ç”¨é€”è¯´æ˜ | å‰ç«¯ç»„ä»¶ | æ˜¯å¦æ˜¾ç¤º | ä¸æ˜¾ç¤ºåŸå›  |
|---------|---------|---------|---------|-----------|
| [å­—æ®µ1] | [ç”¨é€”] | [ç»„ä»¶] | âœ…/âŒ | [...] |
| [å­—æ®µ2] | [ç”¨é€”] | [ç»„ä»¶] | âœ…/âŒ | [...] |

#### æ•°æ®æµå›¾ï¼ˆğŸ†• å¿…å¡«ï¼‰

\`\`\`mermaid
graph LR
  A[Backend API] -->|è¿”å›| B{Response Data}
  B -->|å­—æ®µ1| C[ç»„ä»¶1]
  B -->|å­—æ®µ2| D[ç»„ä»¶2]
\`\`\`

**HumanéªŒè¯ç‚¹**ï¼š
- åç«¯æ¯ä¸ªå­—æ®µéƒ½æœ‰å¯¹åº”çš„å‰ç«¯ç»„ä»¶å—ï¼Ÿ
- "âŒä¸æ˜¾ç¤º"çš„å­—æ®µæœ‰åˆç†åŸå› å—ï¼Ÿ

---

### MQ4: è§†è§‰å±‚çº§

**é—®é¢˜**ï¼šåŠŸèƒ½æœ‰ä¸åŒçŠ¶æ€/ç±»å‹å—ï¼Ÿç”¨æˆ·å¦‚ä½•åŒºåˆ†ï¼Ÿ

**å›ç­”**ï¼š
- [ ] æœ‰ä¸åŒçŠ¶æ€ â†’ ç»§ç»­å¡«å†™
- [ ] æ— ä¸åŒçŠ¶æ€ â†’ è·³è¿‡

**å¦‚æœæœ‰ï¼Œæä¾›UIå¯¹æ¯”**ï¼š

#### çŠ¶æ€è§†è§‰è®¾è®¡ï¼ˆğŸ†• å¿…å¡«ï¼‰

| çŠ¶æ€ | è§†è§‰è¡¨ç° | é¢œè‰² | å›¾æ ‡ | æ–‡å­— |
|------|---------|------|------|------|
| [çŠ¶æ€1] | [æè¿°] | [é¢œè‰²] | [å›¾æ ‡] | [æ–‡å­—] |
| [çŠ¶æ€2] | [æè¿°] | [é¢œè‰²] | [å›¾æ ‡] | [æ–‡å­—] |

#### UI Mockupï¼ˆğŸ†• å»ºè®®æä¾›ï¼‰
[æˆªå›¾æˆ–æ‰‹ç»˜UIè‰å›¾]

**HumanéªŒè¯ç‚¹**ï¼šä¸åŒçŠ¶æ€æ˜¯å¦è§†è§‰ä¸Šèƒ½æ˜æ˜¾åŒºåˆ†ï¼Ÿ

---

### MQ5: çŠ¶æ€åŒæ­¥

**é—®é¢˜**ï¼šæ•°æ®å­˜åœ¨å‡ ä¸ªåœ°æ–¹ï¼Ÿä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿ

**å›ç­”**ï¼š

#### çŠ¶æ€å­˜å‚¨ä½ç½®ï¼ˆğŸ†• å¿…å¡«ï¼‰

| æ•°æ® | å­˜å‚¨ä½ç½®1 | å­˜å‚¨ä½ç½®2 | åŒæ­¥æ—¶æœº | åŒæ­¥æ–¹å‘ |
|------|----------|----------|---------|---------|
| [æ•°æ®] | [ä½ç½®1] | [ä½ç½®2] | [æ—¶æœº] | [æ–¹å‘] |

#### çŠ¶æ€æµå›¾ï¼ˆğŸ†• å¿…å¡«ï¼‰

\`\`\`
[ç”¨æˆ·è¾“å…¥] â†’ state.data (ä¸»çŠ¶æ€ï¼ŒSource of Truth)
              â†“ åŒæ­¥æ—¶æœºï¼š[è§¦å‘æ¡ä»¶]
           backup.data (å¤‡ä»½çŠ¶æ€)
\`\`\`

**æˆ–å•ä¸€çŠ¶æ€**ï¼š
\`\`\`
[ç”¨æˆ·è¾“å…¥] â†’ state.data (å”¯ä¸€å­˜å‚¨)
âœ… åªæœ‰ä¸€ä¸ªçŠ¶æ€ï¼Œæ— éœ€åŒæ­¥
\`\`\`

**HumanéªŒè¯ç‚¹**ï¼š
- æ¸…æ¥šæ ‡æ³¨å“ªä¸ªæ˜¯ä¸»çŠ¶æ€äº†å—ï¼Ÿ
- åŒæ­¥æ—¶æœºæ˜ç¡®å—ï¼Ÿ
- æ˜¯å¦å¯èƒ½å‡ºç°ä¸åŒæ­¥ï¼Ÿ

---

## 6. Implementation Stepsï¼ˆåˆ†Phaseï¼‰

**ğŸ†• Phaseåˆ’åˆ†åŸåˆ™**ï¼š
- æ¯ä¸ªPhaseï¼š2-4å°æ—¶
- Phaseä¹‹é—´æœ‰æ¸…æ™°çš„é‡Œç¨‹ç¢‘
- æ¯ä¸ªPhaseå®Œæˆåï¼ŒBlakeæä¾›è¯æ®ç»™Humanå®¡æŸ¥

### Phase 1: [åç§°]ï¼ˆé¢„è®¡Xå°æ—¶ï¼‰

#### äº¤ä»˜ç‰©
- [ ] [å…·ä½“äº¤ä»˜1]
- [ ] [å…·ä½“äº¤ä»˜2]

#### å®æ–½æ­¥éª¤
1. [æ­¥éª¤1]
2. [æ­¥éª¤2]

#### éªŒè¯æ–¹æ³•
- è¿è¡Œ[æµ‹è¯•å‘½ä»¤]åº”è¯¥çœ‹åˆ°[é¢„æœŸç»“æœ]
- æµè§ˆå™¨è®¿é—®[URL]åº”è¯¥æ˜¾ç¤º[é¢„æœŸUI]

#### ğŸ†• Phase 1 å®Œæˆè¯æ®ï¼ˆBlakeå¿…é¡»æä¾›ï¼‰
æäº¤ä»¥ä¸‹è¯æ®ç»™Humanï¼š
- [ ] **ä»£ç æˆªå›¾**ï¼šå…³é”®å‡½æ•°[XXX]çš„å®ç°
- [ ] **æµ‹è¯•ç»“æœ**ï¼š\`npm test\`çš„è¾“å‡ºï¼ˆâœ“ 42 tests passingï¼‰
- [ ] **UIæˆªå›¾**ï¼ˆå¦‚æœ‰UIï¼‰ï¼šæµè§ˆå™¨æ˜¾ç¤ºæ•ˆæœ

**Humanå®¡æŸ¥é—®é¢˜**ï¼š
- æ–¹å‘æ­£ç¡®å—ï¼Ÿ
- æµ‹è¯•é€šè¿‡äº†å—ï¼Ÿ
- éœ€è¦è°ƒæ•´å—ï¼Ÿ

**Humanå†³ç­–**ï¼šâœ… ç»§ç»­Phase 2 / âš ï¸ è°ƒæ•´æœ¬Phase

---

### Phase 2: [åç§°]ï¼ˆé¢„è®¡Xå°æ—¶ï¼‰
[åŒä¸Šç»“æ„]

---

## 7. File Structure

### 7.1 Files to Create
\`\`\`
path/to/new-file.ts  # Purpose
\`\`\`

### 7.2 Files to Modify
\`\`\`
path/to/existing.ts  # Changes
\`\`\`

---

## 8. Testing Requirements

### 8.1 Unit Tests
- Test [Component]: [Expected behavior]

### 8.2 Integration Tests
- Test [Flow]: [Expected outcome]

### 8.3 Edge Cases
- [Edge case 1]: [How to handle]

### 8.4 ğŸ†• Test Evidence Required
Blakeå¿…é¡»æä¾›ï¼š
- [ ] æµ‹è¯•è¿è¡Œæˆªå›¾ï¼ˆæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼‰
- [ ] è¦†ç›–ç‡æŠ¥å‘Šï¼ˆç›®æ ‡ï¼š>80%ï¼‰
- [ ] Edge caseæµ‹è¯•æ—¥å¿—

---

## 9. Acceptance Criteria

Blakeçš„å®ç°è¢«è®¤ä¸ºå®Œæˆï¼Œå½“ä¸”ä»…å½“ï¼š
- [ ] æ‰€æœ‰FRå®ç°å¹¶éªŒè¯
- [ ] æ‰€æœ‰Phaseå®Œæˆå¹¶æä¾›è¯æ®
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼ˆæœ‰æˆªå›¾è¯æ˜ï¼‰
- [ ] UIç¬¦åˆè®¾è®¡ï¼ˆæœ‰æˆªå›¾è¯æ˜ï¼‰
- [ ] HumanéªŒè¯"è¿™æ˜¯æˆ‘æœŸæœ›çš„"

---

## 10. Important Notes

### 10.1 Critical Warnings
- âš ï¸ [è­¦å‘Š1]
- âš ï¸ [è­¦å‘Š2]

### 10.2 Known Constraints
- [çº¦æŸ1]
- [çº¦æŸ2]

### 10.3 ğŸ†• Sub-Agentä½¿ç”¨å»ºè®®

Blakeåº”è¯¥è€ƒè™‘ä½¿ç”¨ï¼š
- [ ] **parallel-coordinator** - å¦‚æœæœ‰3ä¸ªä»¥ä¸Šç‹¬ç«‹ç»„ä»¶
- [ ] **bug-hunter** - å¦‚æœé‡åˆ°é”™è¯¯æˆ–æµ‹è¯•å¤±è´¥
- [ ] **test-runner** - å®Œæˆæ¯ä¸ªPhaseå
- [ ] **refactor-specialist** - å¦‚æœä»£ç å¤æ‚åº¦é«˜

å®Œæˆååœ¨"Sub-Agentä½¿ç”¨è®°å½•"ä¸­è¯´æ˜ä½¿ç”¨æƒ…å†µã€‚

---

## 11. ğŸ†• Learning Contentï¼ˆå¯é€‰ï¼‰

### 11.1 Decision Rationale: [å†³ç­–ä¸»é¢˜]

**é€‰æ‹©çš„æ–¹æ¡ˆ**ï¼š[...]

**è€ƒè™‘çš„æ›¿ä»£æ–¹æ¡ˆ**ï¼š

| æ–¹æ¡ˆ | ä¼˜ç‚¹ | ç¼ºç‚¹ | ä¸ºä»€ä¹ˆæ²¡é€‰ |
|------|------|------|-----------|
| æ–¹æ¡ˆAï¼ˆé€‰ä¸­ï¼‰| [...] | [...] | âœ… é€‰ä¸­ |
| æ–¹æ¡ˆB | [...] | [...] | [...] |

**æƒè¡¡åˆ†æ**ï¼š
æ ¸å¿ƒæƒè¡¡ï¼š[ç»´åº¦1] vs [ç»´åº¦2]
å½“å‰ä¼˜å…ˆçº§ï¼š[...]

**ğŸ’¡ Humanå­¦ä¹ ç‚¹**ï¼š
[æç‚¼çš„é€šç”¨åŸåˆ™]

---

## 12. ğŸ†• Sub-Agentä½¿ç”¨è®°å½•

Blakeå®Œæˆåå¡«å†™ï¼š

| Sub-Agent | æ˜¯å¦è°ƒç”¨ | è°ƒç”¨æ—¶æœº | è¾“å‡ºæ‘˜è¦ | è¯æ®é“¾æ¥ |
|-----------|---------|---------|---------|---------|
| parallel-coordinator | âœ…/âŒ | [...] | [...] | [...] |
| bug-hunter | âœ…/âŒ | [...] | [...] | [...] |
| test-runner | âœ…/âŒ | [...] | [...] | [...] |

**HumanéªŒè¯ç‚¹**ï¼šåº”è¯¥è°ƒç”¨çš„éƒ½è°ƒç”¨äº†å—ï¼Ÿ

---

**Handoff Created By**: Alex (Agent A)
**Date**: [Date]
**Version**: 3.1.0
```

---

### 6.2 å…¶ä»–æ¨¡æ¿æ›´æ–°

#### åˆ›å»ºHumanå¿«é€Ÿå‚è€ƒæŒ‡å—

åˆ›å»ºæ–‡ä»¶ `.tad/guides/human-quick-reference.md`ï¼š

```markdown
# TAD v3.1 Humanå¿«é€Ÿå‚è€ƒå¡
## ä¸éœ€è¦æŠ€æœ¯çŸ¥è¯†çš„å®¡æŸ¥æŒ‡å—

---

## ä½ çš„è§’è‰²

**Value Guardian + Checkpoint Validator**

- âœ… ä½ ä¸éœ€è¦æ‡‚ç¼–ç¨‹
- âœ… ä½ ä¸éœ€è¦æ‡‚æŠ€æœ¯ç»†èŠ‚
- âœ… ä½ åªéœ€è¦çœ‹å›¾ã€çœ‹æˆªå›¾ã€å›ç­”ç®€å•é—®é¢˜
- â° æ¯ä¸ªåŠŸèƒ½æŠ•å…¥30-60åˆ†é’Ÿå®¡æŸ¥+å­¦ä¹ 

---

## ä½•æ—¶å‚ä¸

### 1ï¸âƒ£ Gate 2ï¼šè®¾è®¡å®Œæˆæ—¶ï¼ˆ10-15åˆ†é’Ÿï¼‰

**Alexè¯´**ï¼š"è®¾è®¡å®Œæˆï¼Œè¯·å®¡æŸ¥handoff"

**ä½ è¦åš**ï¼š
1. æ‰“å¼€handoffæ–‡æ¡£
2. ç›´æ¥è·³åˆ°"å¼ºåˆ¶é—®é¢˜å›ç­”ï¼ˆMQï¼‰"éƒ¨åˆ†
3. å¯¹æ¯ä¸ªMQï¼Œæ£€æŸ¥ï¼š
   - âœ… æœ‰å›ç­”å—ï¼Ÿ
   - âœ… æœ‰è¯æ®å—ï¼Ÿï¼ˆå›¾/è¡¨/ä»£ç ç‰‡æ®µï¼‰
   - âœ… çœ‹èµ·æ¥åˆç†å—ï¼Ÿ

**å®¡æŸ¥æ¸…å•**ï¼š
\`\`\`
â–¡ MQ1 å†å²ä»£ç ï¼šèƒ½çœ‹åˆ°æœç´¢ç»“æœå—ï¼Ÿ
â–¡ MQ2 å‡½æ•°å­˜åœ¨ï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰"âœ…å­˜åœ¨"å—ï¼Ÿ
â–¡ MQ3 æ•°æ®æµï¼šæ•°æ®æµå›¾æ˜¾ç¤ºåç«¯å­—æ®µéƒ½åˆ°å‰ç«¯äº†å—ï¼Ÿ
â–¡ MQ4 è§†è§‰ï¼šèƒ½çœ‹å‡ºä¸åŒçŠ¶æ€çš„è§†è§‰åŒºåˆ«å—ï¼Ÿ
â–¡ MQ5 çŠ¶æ€ï¼šæ¸…æ¥šå“ªä¸ªæ˜¯ä¸»çŠ¶æ€ã€ä½•æ—¶åŒæ­¥å—ï¼Ÿ
\`\`\`

**å†³ç­–**ï¼š
- æ‰€æœ‰âœ… â†’ æ‰¹å‡†ï¼ŒBlakeå¯ä»¥å¼€å§‹
- æœ‰é—®é¢˜ â†’ æŒ‡å‡ºå“ªé‡Œä¸æ¸…æ¥šï¼ŒAlexè¡¥å……

---

### 2ï¸âƒ£ Phaseæ£€æŸ¥ç‚¹ï¼šæ¯ä¸ªPhaseå®Œæˆæ—¶ï¼ˆ5-10åˆ†é’Ÿ/Phaseï¼‰

**Blakeè¯´**ï¼š"Phase 1å®Œæˆï¼Œè¯·å®¡æŸ¥"

**ä½ è¦åš**ï¼š
1. çœ‹Blakeæä¾›çš„è¯æ®ï¼š
   - ä»£ç æˆªå›¾
   - æµ‹è¯•ç»“æœæˆªå›¾
   - UIæˆªå›¾ï¼ˆå¦‚æœ‰ï¼‰
2. å›ç­”3ä¸ªé—®é¢˜ï¼š
   - â“ è¿™æ˜¯æˆ‘æœŸæœ›çš„æ–¹å‘å—ï¼Ÿ
   - â“ æµ‹è¯•é€šè¿‡äº†å—ï¼Ÿï¼ˆçœ‹åˆ°"passed"æˆ–ç»¿è‰²âœ“ï¼‰
   - â“ éœ€è¦è°ƒæ•´ä»€ä¹ˆå—ï¼Ÿ

**å†³ç­–**ï¼š
- âœ… æ–¹å‘æ­£ç¡® â†’ æ‰¹å‡†ï¼Œç»§ç»­ä¸‹ä¸ªPhase
- âš ï¸ éœ€è¦è°ƒæ•´ â†’ è¯´æ˜æœŸæœ›ï¼ŒBlakeè°ƒæ•´

**ä¸ºä»€ä¹ˆé‡è¦**ï¼š
åœ¨Phase 1å°±å‘ç°æ–¹å‘é”™è¯¯ï¼Œåªæµªè´¹2å°æ—¶ï¼›
ç­‰åˆ°Phase 3æ‰å‘ç°ï¼Œæµªè´¹6å°æ—¶ã€‚

---

### 3ï¸âƒ£ Gate 3ï¼šæ‰€æœ‰Phaseå®Œæˆæ—¶ï¼ˆ10-15åˆ†é’Ÿï¼‰

**Blakeè¯´**ï¼š"æ‰€æœ‰Phaseå®Œæˆï¼Œè¯·æœ€ç»ˆå®¡æŸ¥"

**ä½ è¦åš**ï¼š
1. çœ‹Blakeçš„å®ŒæˆæŠ¥å‘Š
2. çœ‹æµ‹è¯•ç»“æœï¼ˆå…¨éƒ¨passedï¼Ÿï¼‰
3. çœ‹UIæˆªå›¾ï¼ˆç¬¦åˆæœŸæœ›ï¼Ÿï¼‰
4. **äº²è‡ªæµ‹è¯•**ï¼š
   - æ‰“å¼€æµè§ˆå™¨
   - å®é™…ä½¿ç”¨åŠŸèƒ½
   - ç¡®è®¤ç¬¦åˆéœ€æ±‚

**å†³ç­–**ï¼š
- âœ… å®Œå…¨ç¬¦åˆæœŸæœ› â†’ éªŒæ”¶é€šè¿‡
- âš ï¸ æœ‰å°é—®é¢˜ â†’ Blakeä¿®å¤
- âŒ éœ€è¦å¤§æ”¹ â†’ è¿”å›æŸä¸ªPhaseé‡åš

---

## å®¡æŸ¥æŠ€å·§

### çœ‹æ•°æ®æµå›¾æ—¶

**å¥½çš„æ•°æ®æµå›¾**ï¼š
\`\`\`
[Backend API] -->|score, reasons, warnings| [Frontend]
[Frontend] -->|score| [ScoreBadgeç»„ä»¶]
[Frontend] -->|reasons| [ReasonListç»„ä»¶]
[Frontend] -->|warnings| [WarningAlertç»„ä»¶]
\`\`\`

**ä½ è¦é—®**ï¼š
- â“ åç«¯ç»™çš„æ¯ä¸ªæ•°æ®ï¼Œéƒ½æœ‰å‰ç«¯ç»„ä»¶æ¥æ”¶å—ï¼Ÿ
- â“ æœ‰æ²¡æœ‰æ•°æ®"æ¶ˆå¤±äº†"ï¼Ÿ

**çº¢æ——ğŸš©**ï¼š
\`\`\`
[Backend API] -->|score, reasons, warnings| [Frontend]
[Frontend] -->|score| [ScoreBadgeç»„ä»¶]
\`\`\`
â†’ reasonså’Œwarningså»å“ªäº†ï¼Ÿ âŒ

---

### çœ‹çŠ¶æ€æµå›¾æ—¶

**å¥½çš„çŠ¶æ€æµå›¾**ï¼š
\`\`\`
[ç”¨æˆ·è¾“å…¥] â†’ state.allergens (å”¯ä¸€å­˜å‚¨)
âœ… å•ä¸€çŠ¶æ€ï¼Œæ— éœ€åŒæ­¥
\`\`\`

æˆ–ï¼š
\`\`\`
[ç”¨æˆ·è¾“å…¥] â†’ preferences.allergens (ä¸»çŠ¶æ€)
              â†“ åŒæ­¥æ—¶æœºï¼šonSubmitäº‹ä»¶
           backup.allergies (å¤‡ä»½)
\`\`\`

**ä½ è¦é—®**ï¼š
- â“ æ•°æ®å­˜åœ¨å‡ ä¸ªåœ°æ–¹ï¼Ÿ
- â“ å“ªä¸ªæ˜¯ä¸»çŠ¶æ€ï¼Ÿ
- â“ ä»€ä¹ˆæ—¶å€™åŒæ­¥ï¼Ÿ

**çº¢æ——ğŸš©**ï¼š
\`\`\`
[ç”¨æˆ·è¾“å…¥] â†’ preferences.allergens
           â†’ dietaryRestrictions.allergies
[æ²¡è¯´ä»€ä¹ˆæ—¶å€™åŒæ­¥]
\`\`\`
â†’ ä¸¤ä¸ªçŠ¶æ€å¯èƒ½ä¸ä¸€è‡´ âŒ

---

### çœ‹æµ‹è¯•ç»“æœæ—¶

**å¥½çš„æµ‹è¯•ç»“æœ**ï¼š
\`\`\`
âœ“ 42 tests passing
âœ“ Coverage: 87%
[ç»¿è‰²çš„å‹¾é€‰æ ‡è®°]
\`\`\`

**ä½ è¦çœ‹**ï¼š
- âœ… æœ‰"passed"æˆ–ç»¿è‰²âœ“
- âœ… è¦†ç›–ç‡>80%
- âŒ æ²¡æœ‰çº¢è‰²Ã—æˆ–"failed"

**çº¢æ——ğŸš©**ï¼š
\`\`\`
âœ“ 40 tests passing
âœ— 2 tests failing  â† âŒ è¿™ä¸ªä¸è¡Œ
\`\`\`
â†’ å¿…é¡»æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡

---

## å¸¸è§é—®é¢˜

### Q: æˆ‘çœ‹ä¸æ‡‚ä»£ç æ€ä¹ˆåŠï¼Ÿ
**A**: ä¸éœ€è¦çœ‹æ‡‚ä»£ç ã€‚ä½ çœ‹çš„æ˜¯ï¼š
- å›¾è¡¨ï¼ˆæ•°æ®æµã€çŠ¶æ€æµï¼‰
- æˆªå›¾ï¼ˆæµ‹è¯•ç»“æœã€UIæ•ˆæœï¼‰
- è¡¨æ ¼ï¼ˆå‡½æ•°åˆ—è¡¨ã€æ•°æ®æ˜ å°„ï¼‰

### Q: æˆ‘æ€ä¹ˆçŸ¥é“æ–¹å‘å¯¹ä¸å¯¹ï¼Ÿ
**A**: é—®è‡ªå·±ï¼š
- è¿™æ˜¯æˆ‘è¦çš„åŠŸèƒ½å—ï¼Ÿ
- è¿™ç¬¦åˆæˆ‘çš„æœŸæœ›å—ï¼Ÿ
- ç”¨æˆ·ä¼šå–œæ¬¢è¿™ä¸ªå—ï¼Ÿ

åªæœ‰ä½ çŸ¥é“"å¯¹ä¸å¯¹"ï¼ŒæŠ€æœ¯äººå‘˜ä¸çŸ¥é“ã€‚

### Q: å¦‚æœæˆ‘ä¸ç¡®å®šæ€ä¹ˆåŠï¼Ÿ
**A**: è¯´å‡ºä½ çš„ç–‘è™‘ï¼š
- "æˆ‘ä¸ç¡®å®šè¿™ä¸ªæµç¨‹æ˜¯å¦ä¾¿æ·"
- "è¿™ä¸ªè­¦å‘Šå¯èƒ½ä¸å¤Ÿæ˜æ˜¾"
- "æˆ‘æ‹…å¿ƒç”¨æˆ·ä¼šå›°æƒ‘"

è®©AIè§£é‡Šæˆ–è°ƒæ•´ã€‚

### Q: å®¡æŸ¥ä¼šå¾ˆè€—æ—¶å—ï¼Ÿ
**A**: ä¸ä¼šï¼š
- Gate 2ï¼š10-15åˆ†é’Ÿï¼ˆçœ‹å›¾è¡¨ï¼‰
- Phaseæ£€æŸ¥ï¼š5-10åˆ†é’Ÿ/Phaseï¼ˆçœ‹æˆªå›¾ï¼‰
- Gate 3ï¼š10-15åˆ†é’Ÿï¼ˆæµ‹è¯•ï¼‰

ä½†è¿™èƒ½èŠ‚çœæ•°å°æ—¶çš„è¿”å·¥æ—¶é—´ã€‚

---

## æ‰¹å‡†è¯æœ¯

### æ‰¹å‡†Gate 2
\`\`\`
"æˆ‘å®¡æŸ¥äº†å¼ºåˆ¶é—®é¢˜å›ç­”éƒ¨åˆ†ï¼š
âœ… MQ1-5éƒ½æœ‰å›ç­”å’Œè¯æ®
âœ… æ•°æ®æµå›¾çœ‹èµ·æ¥å®Œæ•´
âœ… çŠ¶æ€æµå›¾æ¸…æ™°
âœ… æ–¹å‘çœ‹èµ·æ¥æ­£ç¡®

æ‰¹å‡†ï¼ŒBlakeå¯ä»¥å¼€å§‹å®ç°ã€‚"
\`\`\`

### æ‰¹å‡†Phaseæ£€æŸ¥
\`\`\`
"æˆ‘çœ‹äº†Phase 1çš„è¯æ®ï¼š
âœ… æµ‹è¯•é€šè¿‡äº†
âœ… ä»£ç çœ‹èµ·æ¥åœ¨æ­£ç¡®æ–¹å‘
âœ… å¯ä»¥ç»§ç»­Phase 2

ç»§ç»­ã€‚"
\`\`\`

### è¦æ±‚ä¿®æ”¹
\`\`\`
"æˆ‘çœ‹äº†æ•°æ®æµå›¾ï¼Œæœ‰ä¸ªç–‘é—®ï¼š
åç«¯è¿”å›äº†warningsï¼ˆè­¦å‘Šï¼‰ï¼Œä½†å‰ç«¯æ²¡æœ‰æ˜¾ç¤ºç»„ä»¶ï¼Ÿ
è¿™ä¸ªè­¦å‘Šå¾ˆé‡è¦ï¼Œç”¨æˆ·éœ€è¦çœ‹åˆ°ã€‚

è¯·è¡¥å……ï¼šwarningsåœ¨å‰ç«¯å“ªé‡Œæ˜¾ç¤ºï¼Ÿ"
\`\`\`

---

## æ€»ç»“

ä½ çš„å‚ä¸æ˜¯TAD v3.1çš„å…³é”®ï¼š
- âœ… åªæœ‰ä½ çŸ¥é“"å¯¹ä¸å¯¹"
- âœ… ä½ ä¸éœ€è¦æ‡‚æŠ€æœ¯
- âœ… çœ‹å›¾åˆ¤æ–­å³å¯
- â° æŠ•å…¥å°‘é‡æ—¶é—´
- ğŸ’° é¿å…å¤§é‡è¿”å·¥

**è®°ä½**ï¼šAIæ“…é•¿æŠ€æœ¯ï¼Œä½ æ“…é•¿åˆ¤æ–­ä»·å€¼å’Œæ–¹å‘ã€‚ä¸¤è€…ç»“åˆæ‰èƒ½æˆåŠŸã€‚
```

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæˆåŠŸæŒ‡æ ‡ä¸éªŒè¯

### 7.1 è´¨é‡æŒ‡æ ‡

**Phase 1æˆåŠŸæ ‡å‡†ï¼ˆ1-2å¤©åï¼‰**ï¼š

```yaml
phase1_success_criteria:
  configuration:
    - âœ… config.yamlæ›´æ–°å®Œæˆï¼ŒYAMLè¯­æ³•æ­£ç¡®
    - âœ… handoffæ¨¡æ¿åŒ…å«æ‰€æœ‰MQéƒ¨åˆ†
    - âœ… è¯æ®æ”¶é›†æŒ‡å—åˆ›å»ºå®Œæˆ
    - âœ… Humanå¿«é€Ÿå‚è€ƒåˆ›å»ºå®Œæˆ

  pilot_project:
    - âœ… Alexèƒ½é¡ºåˆ©å¡«å†™MQè¯æ®ï¼ˆè€—æ—¶<30åˆ†é’Ÿé¢å¤–ï¼‰
    - âœ… Humanèƒ½çœ‹æ‡‚è¯æ®å¹¶å®Œæˆå®¡æŸ¥ï¼ˆè€—æ—¶10-15åˆ†é’Ÿï¼‰
    - âœ… è‡³å°‘åœ¨Gate 2å‘ç°1ä¸ªé—®é¢˜ï¼ˆè¯æ˜æœ‰æ•ˆï¼‰
    - âœ… æ•´ä¸ªæµç¨‹æ—¶é—´å¢åŠ <30åˆ†é’Ÿï¼ˆå¯æ¥å—ï¼‰

  team_feedback:
    - âœ… Alexè®¤ä¸ºè¯æ®è¦æ±‚åˆç†ï¼Œä¸è¿‡åº¦ç¹ç
    - âœ… Humanè®¤ä¸ºå®¡æŸ¥æ¸…å•æ¸…æ™°ï¼Œèƒ½çœ‹æ‡‚
    - âœ… æ²¡æœ‰ä¸»è¦é˜»å¡é—®é¢˜
```

**Phase 2æˆåŠŸæ ‡å‡†ï¼ˆ1-2å‘¨åï¼‰**ï¼š

```yaml
phase2_success_criteria:
  quality_improvement:
    - âœ… Gate 2é—®é¢˜å‘ç°ç‡>50%ï¼ˆåŸºçº¿0%ï¼‰
    - âœ… Phaseæ£€æŸ¥ç‚¹æ‹¦æˆªæ–¹å‘é”™è¯¯â‰¥1æ¬¡
    - âœ… è¿”å·¥æ—¶é—´å‡å°‘>30%

  human_engagement:
    - âœ… Gate 2å®¡æŸ¥å®Œæˆç‡>90%
    - âœ… Phaseæ£€æŸ¥å‚ä¸ç‡>80%
    - âœ… Humanæå‡ºçš„é—®é¢˜/ç–‘é—®â‰¥æ¯ä¸ªåŠŸèƒ½1ä¸ª

  learning_adoption:
    - âœ… Decision Rationaleé˜…è¯»ç‡>70%
    - âœ… Humanèƒ½ä¸¾ä¾‹å­¦åˆ°çš„1ä¸ªåŸåˆ™
```

**Phase 3æˆåŠŸæ ‡å‡†ï¼ˆ1ä¸ªæœˆåï¼‰**ï¼š

```yaml
phase3_success_criteria:
  system_evolution:
    - âœ… è‡³å°‘åˆ›å»º1ä¸ªFailure Learning Entry
    - âœ… è‡³å°‘æ›´æ–°1ä¸ªMQï¼ˆåŸºäºå¤±è´¥ç»éªŒï¼‰
    - âœ… è¯æ®è‡ªåŠ¨åŒ–å·¥å…·æŠ•å…¥ä½¿ç”¨ï¼ˆè‡³å°‘1ä¸ªï¼‰

  capability_growth:
    - âœ… Humanèƒ½é¢„è§2å±‚å½±å“
    - âœ… Humanèƒ½è¯†åˆ«2+ç§å¤±è´¥æ¨¡å¼
    - âœ… Humanä¸»åŠ¨æå‡ºè¾¹ç•Œæƒ…å†µâ‰¥2æ¬¡

  metrics:
    - âœ… é—®é¢˜æ‹¦æˆªç‡>70%
    - âœ… è¿”å·¥æ—¶é—´å‡å°‘>50%
    - âœ… False positive rate<15%
```

---

### 7.2 é‡åŒ–æŒ‡æ ‡è¿½è¸ª

åˆ›å»ºæ–‡ä»¶ `.tad/evidence/metrics/tad-v31-metrics.yaml`ï¼š

```yaml
# TAD v3.1 æŒ‡æ ‡è¿½è¸ª
tracking_start_date: 2025-11-25

# è´¨é‡æŒ‡æ ‡
quality_metrics:
  problem_detection:
    gate2_issues_found: 0  # åœ¨Gate 2å‘ç°çš„é—®é¢˜æ•°
    phase_checkpoint_issues: 0  # åœ¨Phaseæ£€æŸ¥å‘ç°çš„é—®é¢˜æ•°
    gate3_issues_found: 0  # åœ¨Gate 3å‘ç°çš„é—®é¢˜æ•°
    total_issues_found: 0

  problem_prevention:
    issues_prevented: 0  # ç›¸æ¯”v3.0é¿å…çš„é—®é¢˜æ•°
    rework_hours_saved: 0  # èŠ‚çœçš„è¿”å·¥æ—¶é—´ï¼ˆå°æ—¶ï¼‰

  false_positives:
    total_alerts: 0  # MQè§¦å‘æ€»æ¬¡æ•°
    false_positive_count: 0  # è¯¯æŠ¥æ¬¡æ•°
    false_positive_rate: 0%  # è¯¯æŠ¥ç‡

# Humanå‚ä¸æŒ‡æ ‡
human_engagement:
  gate2_reviews:
    total_required: 0
    completed: 0
    completion_rate: 0%

  phase_checkpoints:
    total_required: 0
    completed: 0
    completion_rate: 0%

  issues_raised: 0  # Humanæå‡ºçš„é—®é¢˜/ç–‘é—®æ•°

# MQæœ‰æ•ˆæ€§
mq_effectiveness:
  MQ1_historical_code:
    triggered: 0
    issues_caught: 0
    effectiveness: 0%

  MQ2_function_existence:
    triggered: 0
    issues_caught: 0
    effectiveness: 0%

  MQ3_data_flow:
    triggered: 0
    issues_caught: 0
    effectiveness: 0%

  MQ4_visual_hierarchy:
    triggered: 0
    issues_caught: 0
    effectiveness: 0%

  MQ5_state_sync:
    triggered: 0
    issues_caught: 0
    effectiveness: 0%

# å­¦ä¹ æ•ˆæœ
learning_outcomes:
  decision_rationales_created: 0
  interactive_challenges_completed: 0
  failure_learning_entries: 0

  principles_learned: []  # å­¦åˆ°çš„åŸåˆ™åˆ—è¡¨
  patterns_recognized: []  # è¯†åˆ«çš„å¤±è´¥æ¨¡å¼åˆ—è¡¨

# æ—¶é—´æŠ•å…¥
time_investment:
  avg_gate2_review_time: 0  # åˆ†é’Ÿ
  avg_phase_checkpoint_time: 0  # åˆ†é’Ÿ
  avg_learning_time: 0  # åˆ†é’Ÿ/åŠŸèƒ½

  total_time_invested: 0  # æ€»æ—¶é—´ï¼ˆå°æ—¶ï¼‰
  total_time_saved: 0  # èŠ‚çœæ—¶é—´ï¼ˆå°æ—¶ï¼‰
  roi_ratio: 0  # å›æŠ¥æ¯”

# ç³»ç»Ÿè¿›åŒ–
system_evolution:
  mq_updates: 0  # MQæ›´æ–°æ¬¡æ•°
  config_iterations: 0  # é…ç½®è¿­ä»£æ¬¡æ•°
  tool_automations: 0  # è‡ªåŠ¨åŒ–å·¥å…·æ•°é‡
```

æ¯å‘¨æ›´æ–°è¿™ä¸ªæ–‡ä»¶ï¼Œè¿½è¸ªè¿›å±•ã€‚

---

### 7.3 éªŒè¯æ£€æŸ¥æ¸…å•

**Phase 1éªŒè¯**ï¼š

```bash
cd /Users/sheldonzhao/programs/TAD

# 1. é…ç½®æ–‡ä»¶éªŒè¯
echo "=== 1. é…ç½®æ–‡ä»¶éªŒè¯ ==="
python3 -c "import yaml; yaml.safe_load(open('.tad/config.yaml'))" && echo "âœ… YAMLè¯­æ³•æ­£ç¡®"
grep -q "tad_version: 3.1" .tad/config.yaml && echo "âœ… ç‰ˆæœ¬æ ‡è®°å­˜åœ¨"
grep -q "mandatory_questions:" .tad/config.yaml && echo "âœ… MQé…ç½®å­˜åœ¨"

# 2. æ¨¡æ¿æ–‡ä»¶éªŒè¯
echo -e "\n=== 2. æ¨¡æ¿æ–‡ä»¶éªŒè¯ ==="
grep -q "MQ1" .tad/templates/handoff-a-to-b.md && echo "âœ… Handoffæ¨¡æ¿åŒ…å«MQ"
grep -q "Phase 1 å®Œæˆè¯æ®" .tad/templates/handoff-a-to-b.md && echo "âœ… Phaseè¯æ®è¦æ±‚å­˜åœ¨"

# 3. æŒ‡å—æ–‡ä»¶éªŒè¯
echo -e "\n=== 3. æŒ‡å—æ–‡ä»¶éªŒè¯ ==="
[ -f .tad/guides/human-quick-reference.md ] && echo "âœ… Humanå¿«é€Ÿå‚è€ƒå­˜åœ¨"
[ -f .tad/tasks/evidence-collection.md ] && echo "âœ… è¯æ®æ”¶é›†æŒ‡å—å­˜åœ¨"

# 4. å¤‡ä»½éªŒè¯
echo -e "\n=== 4. å¤‡ä»½éªŒè¯ ==="
[ -f .backup/v3.0-*/config.yaml ] && echo "âœ… v3.0å¤‡ä»½å­˜åœ¨"

echo -e "\n=== Phase 1éªŒè¯å®Œæˆ ==="
```

---

## ç¬¬å…«éƒ¨åˆ†ï¼šé£é™©ç®¡ç†ä¸å›æ»š

### 8.1 æ½œåœ¨é£é™©

| é£é™© | å¯èƒ½æ€§ | å½±å“ | ç¼“è§£æªæ–½ |
|------|--------|------|---------|
| **Humanå­¦ä¹ æ›²çº¿** | é«˜ | ä¸­ | æä¾›è¯¦ç»†åŸ¹è®­ï¼Œç¬¬ä¸€æ¬¡é™ªåŒå®¡æŸ¥ |
| **Alexå·¥ä½œé‡å¢åŠ ** | ä¸­ | ä¸­ | æä¾›æ¨¡æ¿ï¼Œéƒ¨åˆ†è‡ªåŠ¨åŒ– |
| **æµç¨‹å¤æ‚åº¦ä¸Šå‡** | ä¸­ | ä½ | åˆ†é˜¶æ®µå®æ–½ï¼Œå°åŠŸèƒ½å¯ç®€åŒ– |
| **å·¥å…·ä¾èµ–æ€§** | ä½ | ä½ | Phase 3å¯é€‰ï¼Œä¸é˜»å¡æ ¸å¿ƒåŠŸèƒ½ |
| **è¯¯æŠ¥è¿‡å¤š** | ä¸­ | ä¸­ | æŒç»­è°ƒæ•´MQè§¦å‘æ¡ä»¶ |

### 8.2 å›æ»šç­–ç•¥

**å®Œæ•´å›æ»šåˆ°v3.0**ï¼š

```bash
cd /Users/sheldonzhao/programs/TAD

# 1. æ¢å¤é…ç½®æ–‡ä»¶
cp .backup/v3.0-*/config.yaml .tad/config.yaml

# 2. æ¢å¤æ¨¡æ¿æ–‡ä»¶
cp .backup/v3.0-*/handoff-a-to-b.md .tad/templates/

# 3. æ›´æ–°ç‰ˆæœ¬æ ‡è®°
echo "3.0" > .tad/version.txt

# 4. è®°å½•å›æ»š
echo "å›æ»šåˆ°v3.0 - $(date)" >> .tad/CHANGELOG.md

echo "âœ… å·²å›æ»šåˆ°TAD v3.0"
```

**éƒ¨åˆ†å›æ»šï¼ˆä¿ç•™æŸäº›ç‰¹æ€§ï¼‰**ï¼š

```yaml
# ç¼–è¾‘.tad/config.yamlï¼Œç¦ç”¨ç‰¹å®šåŠŸèƒ½

# ç¦ç”¨å¼ºåˆ¶MQ
mandatory_questions:
  enabled: false  # æ”¹ä¸ºfalse
  blocking: false  # æ”¹ä¸ºfalse

# ç¦ç”¨æ¸è¿›å¼éªŒè¯
progressive_validation:
  enabled: false  # æ”¹ä¸ºfalse

# ç¦ç”¨å­¦ä¹ æœºåˆ¶
learning_mechanisms:
  enabled: false  # æ”¹ä¸ºfalse

# ä¿ç•™è¯æ®å¼éªŒè¯ï¼ˆä¸å½±å“åŸºæœ¬æµç¨‹ï¼‰
evidence_based_verification:
  enabled: true  # ä¿æŒtrue
```

### 8.3 åº”æ€¥é¢„æ¡ˆ

**åœºæ™¯1ï¼šHumanå®¡æŸ¥æˆä¸ºç“¶é¢ˆ**

**ç—‡çŠ¶**ï¼šHumanæ²¡æ—¶é—´å®¡æŸ¥ï¼Œé˜»å¡è¿›åº¦

**åº”æ€¥æªæ–½**ï¼š
```yaml
ä¸´æ—¶æªæ–½:
  - ç®€åŒ–å®¡æŸ¥æ¸…å•ï¼ˆåªæ£€æŸ¥MQ1, MQ2, MQ3æ ¸å¿ƒé¡¹ï¼‰
  - Phaseæ£€æŸ¥æ”¹ä¸ºå¯é€‰ï¼ˆåªåœ¨å…³é”®Phaseå¼ºåˆ¶ï¼‰
  - å»¶é•¿å®¡æŸ¥æ—¶é—´çª—å£ï¼ˆ24å°æ—¶ â†’ 48å°æ—¶ï¼‰

é•¿æœŸè§£å†³:
  - åŸ¹è®­ç¬¬äºŒä¸ªå®¡æŸ¥è€…ï¼ˆåˆ†æ‹…è´Ÿè½½ï¼‰
  - è¿›ä¸€æ­¥è‡ªåŠ¨åŒ–è¯æ®æ”¶é›†
  - è°ƒæ•´Phaseå¤§å°ï¼ˆå‡å°‘æ£€æŸ¥ç‚¹é¢‘ç‡ï¼‰
```

**åœºæ™¯2ï¼šMQè¯¯æŠ¥è¿‡å¤š**

**ç—‡çŠ¶**ï¼š>20%çš„MQè§¦å‘æ˜¯è¯¯æŠ¥

**åº”æ€¥æªæ–½**ï¼š
```yaml
ä¸´æ—¶æªæ–½:
  - å°†è¯¯æŠ¥é«˜çš„MQæ”¹ä¸ºwarningï¼ˆä¸é˜»å¡ï¼‰
  - ä¼˜åŒ–triggeræ¡ä»¶ï¼ˆæ›´ç²¾ç¡®ï¼‰

é•¿æœŸè§£å†³:
  - åˆ†æè¯¯æŠ¥æ¨¡å¼
  - é‡æ–°è®¾è®¡triggeré€»è¾‘
  - å¢åŠ ä¸Šä¸‹æ–‡åˆ¤æ–­
```

**åœºæ™¯3ï¼šè¯æ®æ”¶é›†è´Ÿæ‹…è¿‡é‡**

**ç—‡çŠ¶**ï¼šAlexèŠ±è´¹>30åˆ†é’Ÿæ”¶é›†è¯æ®

**åº”æ€¥æªæ–½**ï¼š
```yaml
ä¸´æ—¶æªæ–½:
  - ç®€åŒ–è¯æ®æ ¼å¼ï¼ˆè¡¨æ ¼ â†’ åˆ—è¡¨ï¼‰
  - å‡å°‘å¿…å¡«MQï¼ˆåªä¿ç•™é«˜ä»·å€¼çš„ï¼‰
  - æä¾›æ›´å¤šç¤ºä¾‹å’Œæ¨¡æ¿

é•¿æœŸè§£å†³:
  - å¼€å‘è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå‡½æ•°æ£€æµ‹ã€æ•°æ®æµåˆ†æï¼‰
  - é›†æˆIDEæ’ä»¶ï¼ˆä¸€é”®ç”Ÿæˆè¯æ®ï¼‰
  - ä½¿ç”¨AIè¾…åŠ©ç”Ÿæˆå›¾è¡¨
```

---

## ç¬¬ä¹éƒ¨åˆ†ï¼šå¿«é€Ÿå¯åŠ¨æŒ‡å—

### 9.1 30åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

**ç›®æ ‡**ï¼šæœ€å¿«é€Ÿåº¦ä½“éªŒTAD v3.1æ ¸å¿ƒåŠŸèƒ½

#### Step 1ï¼šå¤‡ä»½ï¼ˆ2åˆ†é’Ÿï¼‰
```bash
cd /Users/sheldonzhao/programs/TAD
mkdir -p .backup/v3.0-$(date +%Y%m%d)
cp .tad/config.yaml .backup/v3.0-$(date +%Y%m%d)/
cp .tad/templates/handoff-a-to-b.md .backup/v3.0-$(date +%Y%m%d)/
```

#### Step 2ï¼šæ›´æ–°é…ç½®ï¼ˆ5åˆ†é’Ÿï¼‰
```bash
# è¿½åŠ v3.1é…ç½®åˆ°config.yaml
cat >> .tad/config.yaml <<'EOF'

# ==================== TAD v3.1 æœ€å°é…ç½® ====================
tad_version: 3.1.0
philosophy: "Evidence-Based Triangle Development"

evidence_based_verification:
  enabled: true

mandatory_questions:
  enabled: true
  blocking: false  # åˆæœŸè®¾ä¸ºwarningæ¨¡å¼

progressive_validation:
  enabled: true

human_role_v31:
  role_name: "Value Guardian + Checkpoint Validator"
EOF

echo "3.1.0" > .tad/version.txt
```

#### Step 3ï¼šåˆ›å»ºç®€åŒ–handoffæ¨¡æ¿ï¼ˆ10åˆ†é’Ÿï¼‰
```bash
# åˆ›å»ºç®€åŒ–ç‰ˆhandoffæ¨¡æ¿
cat > .tad/templates/handoff-a-to-b-v3.1-minimal.md <<'EOF'
# Handoff Document (TAD v3.1 Minimal)

## 1. Task Overview
[æè¿°]

## 2. å¼ºåˆ¶é—®é¢˜ï¼ˆMinimalï¼‰

### MQ2: å‡½æ•°å­˜åœ¨æ€§
| å‡½æ•°å | æ–‡ä»¶ä½ç½® | éªŒè¯ |
|--------|---------|------|
| [å‡½æ•°] | [ä½ç½®] | âœ…/âŒ |

### MQ3: æ•°æ®æµ
| åç«¯å­—æ®µ | å‰ç«¯ç»„ä»¶ | æ˜¯å¦æ˜¾ç¤º |
|---------|---------|---------|
| [å­—æ®µ] | [ç»„ä»¶] | âœ…/âŒ |

## 3. Implementation

### Phase 1
**äº¤ä»˜ç‰©**ï¼š[...]

**Phaseå®Œæˆè¯æ®**ï¼š
- [ ] æµ‹è¯•ç»“æœæˆªå›¾
- [ ] UIæˆªå›¾ï¼ˆå¦‚æœ‰ï¼‰
EOF
```

#### Step 4ï¼šåˆ›å»ºHuman 1é¡µæŒ‡å—ï¼ˆ8åˆ†é’Ÿï¼‰
```bash
cat > .tad/guides/human-1-page-guide.md <<'EOF'
# Human 1é¡µå®¡æŸ¥æŒ‡å—

## Gate 2å®¡æŸ¥ï¼ˆ10åˆ†é’Ÿï¼‰

æŸ¥çœ‹handoffçš„"å¼ºåˆ¶é—®é¢˜"éƒ¨åˆ†ï¼š

âœ… **MQ2 å‡½æ•°å­˜åœ¨**ï¼šæ¯ä¸ªå‡½æ•°éƒ½æœ‰ä½ç½®å—ï¼Ÿ
âœ… **MQ3 æ•°æ®æµ**ï¼šåç«¯å­—æ®µå‰ç«¯éƒ½æ˜¾ç¤ºäº†å—ï¼Ÿ

**å†³ç­–**ï¼šé€šè¿‡ / è¦æ±‚è¡¥å……

## Phaseæ£€æŸ¥ï¼ˆ5åˆ†é’Ÿï¼‰

Blakeæä¾›è¯æ®åï¼Œå›ç­”ï¼š
- æ–¹å‘å¯¹å—ï¼Ÿ
- æµ‹è¯•è¿‡äº†å—ï¼Ÿ

**å†³ç­–**ï¼šç»§ç»­ / è°ƒæ•´
EOF
```

#### Step 5ï¼šè¯•ç‚¹ï¼ˆ5åˆ†é’Ÿå‡†å¤‡ + å®é™…é¡¹ç›®æ—¶é—´ï¼‰
```bash
# é€‰æ‹©ä¸€ä¸ªå°åŠŸèƒ½å¼€å§‹è¯•ç‚¹
echo "å‡†å¤‡å°±ç»ªï¼é€‰æ‹©ä¸‹ä¸ªå°åŠŸèƒ½ä½¿ç”¨TAD v3.1"
echo "ä½¿ç”¨æ¨¡æ¿ï¼š.tad/templates/handoff-a-to-b-v3.1-minimal.md"
echo "Humanå‚è€ƒï¼š.tad/guides/human-1-page-guide.md"
```

---

### 9.2 å®Œæ•´å¯åŠ¨æ£€æŸ¥æ¸…å•

```markdown
## TAD v3.1 å¯åŠ¨æ£€æŸ¥æ¸…å•

### å‡†å¤‡é˜¶æ®µ
- [ ] é˜…è¯»æœ¬å‡çº§æ–¹æ¡ˆæ–‡æ¡£ï¼ˆç†è§£æ ¸å¿ƒç†å¿µï¼‰
- [ ] å›¢é˜Ÿè®¨è®ºï¼šæ˜¯å¦é‡‡ç”¨v3.1ï¼Ÿ
- [ ] ç¡®å®šHumanå®¡æŸ¥è€…ï¼ˆ1-2äººï¼‰
- [ ] é¢„ç•™å­¦ä¹ æ—¶é—´ï¼ˆç¬¬ä¸€ä¸ªé¡¹ç›®ä¼šæ…¢ä¸€äº›ï¼‰

### Phase 1ï¼šç«‹å³å¯åŠ¨ï¼ˆ1-2å¤©ï¼‰
- [ ] å¤‡ä»½v3.0é…ç½®æ–‡ä»¶
- [ ] æ›´æ–°.tad/config.yaml
- [ ] æ›´æ–°handoffæ¨¡æ¿
- [ ] åˆ›å»ºHumanå¿«é€Ÿå‚è€ƒ
- [ ] è¯•ç‚¹é¡¹ç›®ï¼ˆ1ä¸ªå°åŠŸèƒ½ï¼‰
- [ ] æ”¶é›†åé¦ˆï¼Œè°ƒæ•´é…ç½®

### Phase 2ï¼šå…¨é¢æ¨è¿›ï¼ˆ1-2å‘¨ï¼‰
- [ ] MQæ”¹ä¸ºå¼ºåˆ¶æ¨¡å¼
- [ ] HumanåŸ¹è®­ï¼ˆ1-2å°æ—¶ï¼‰
- [ ] å»ºç«‹Phase-Gateç»‘å®š
- [ ] å¯ç”¨å­¦ä¹ æœºåˆ¶ï¼ˆå¯é€‰ï¼‰
- [ ] å®Œæˆ2-3ä¸ªåŠŸèƒ½ï¼ŒéªŒè¯æ•ˆæœ

### Phase 3ï¼šæŒç»­ä¼˜åŒ–ï¼ˆ1ä¸ªæœˆï¼‰
- [ ] å¤±è´¥å­¦ä¹ é—­ç¯ï¼ˆè‡³å°‘1ä¸ªEntryï¼‰
- [ ] è¯æ®è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆè‡³å°‘1ä¸ªï¼‰
- [ ] å­¦ä¹ æ•ˆæœè¿½è¸ª
- [ ] é…ç½®è¿­ä»£ä¼˜åŒ–

### éªŒè¯æˆåŠŸ
- [ ] é—®é¢˜æ‹¦æˆªç‡>70%
- [ ] Humanå®¡æŸ¥å®Œæˆç‡>90%
- [ ] è¿”å·¥æ—¶é—´å‡å°‘>50%
- [ ] Humanèƒ½ä¸¾ä¾‹å­¦åˆ°çš„åŸåˆ™
- [ ] Teamæ»¡æ„åº¦>80%
```

---

### 9.3 å¸¸è§é—®é¢˜FAQ

**Q1: å‡çº§ä¼šæ‰“æ–­å½“å‰é¡¹ç›®å—ï¼Ÿ**

A: ä¸ä¼šã€‚v3.1æ˜¯å¢é‡æ›´æ–°ï¼Œ100%å‘åå…¼å®¹ã€‚å¯ä»¥ï¼š
- å½“å‰é¡¹ç›®ç»§ç»­ç”¨v3.0
- æ–°é¡¹ç›®å¼€å§‹ç”¨v3.1
- æˆ–å½“å‰é¡¹ç›®ä¸‹ä¸ªPhaseå¼€å§‹è¯•ç”¨

**Q2: HumançœŸçš„ä¸éœ€è¦æŠ€æœ¯çŸ¥è¯†å—ï¼Ÿ**

A: æ˜¯çš„ã€‚Humanåªéœ€è¦ï¼š
- çœ‹å›¾åˆ¤æ–­ï¼ˆæ•°æ®æµå›¾ã€çŠ¶æ€æµå›¾ï¼‰
- çœ‹è¡¨æ ¼ï¼ˆå‡½æ•°ä½ç½®è¡¨ã€æ•°æ®å¯¹ç…§è¡¨ï¼‰
- å›ç­”å¸¸è¯†é—®é¢˜ï¼ˆ"è¿™æ˜¯æˆ‘æœŸæœ›çš„å—ï¼Ÿ"ï¼‰

ä¸éœ€è¦çœ‹ä»£ç ï¼Œä¸éœ€è¦ç†è§£æŠ€æœ¯ç»†èŠ‚ã€‚

**Q3: å¦‚æœHumanæ²¡æ—¶é—´å®¡æŸ¥æ€ä¹ˆåŠï¼Ÿ**

A: å¯ä»¥ï¼š
- ç®€åŒ–å®¡æŸ¥ï¼ˆåªæ£€æŸ¥æ ¸å¿ƒMQï¼‰
- Phaseæ£€æŸ¥æ”¹ä¸ºå¯é€‰
- åŸ¹è®­ç¬¬äºŒå®¡æŸ¥è€…
- æˆ–ä¸´æ—¶å›æ»šåˆ°v3.0ï¼ˆä¸å½±å“å·²å®Œæˆå·¥ä½œï¼‰

**Q4: è¯æ®æ”¶é›†ä¼šå¾ˆéº»çƒ¦å—ï¼Ÿ**

A: åˆæœŸä¼šå¢åŠ 10-20åˆ†é’Ÿã€‚ä½†ï¼š
- å¾ˆå¤šè¯æ®æ˜¯"é¡ºæ‰‹è®°å½•"ï¼ˆæœç´¢ç»“æœã€æµ‹è¯•è¾“å‡ºï¼‰
- å¯ä»¥ç”¨æ¨¡æ¿å¤åˆ¶ç²˜è´´
- Phase 3ä¼šæœ‰è‡ªåŠ¨åŒ–å·¥å…·
- æŠ•å…¥å›æŠ¥æ¯”1:5åˆ°1:10ï¼ˆèŠ‚çœçš„è¿”å·¥æ—¶é—´ï¼‰

**Q5: å¦‚æœè¯•ç”¨åä¸æ»¡æ„æ€ä¹ˆåŠï¼Ÿ**

A: å®Œå…¨å¯ä»¥å›æ»šï¼š
```bash
cp .backup/v3.0-*/config.yaml .tad/config.yaml
echo "3.0" > .tad/version.txt
```
v3.1åˆ›å»ºçš„è¯æ®æ–‡æ¡£ä¿ç•™ï¼ˆä¸å½±å“ï¼‰ï¼Œå¯ä»¥é€‰æ‹©æ€§å‚è€ƒã€‚

**Q6: v3.1å¯¹å°é¡¹ç›®æ˜¯å¦è¿‡é‡ï¼Ÿ**

A: å¯ä»¥ç®€åŒ–ï¼š
- å°åŠŸèƒ½ï¼ˆ<2å°æ—¶ï¼‰ï¼šåªç”¨MQ2+MQ3ï¼Œ1ä¸ªPhase
- ä¸­åŠŸèƒ½ï¼ˆ2-6å°æ—¶ï¼‰ï¼šå®Œæ•´MQï¼Œ2-3ä¸ªPhase
- å¤§åŠŸèƒ½ï¼ˆ>6å°æ—¶ï¼‰ï¼šå®Œæ•´æµç¨‹+å­¦ä¹ æœºåˆ¶

**Q7: å­¦ä¹ æœºåˆ¶æ˜¯å¿…é¡»çš„å—ï¼Ÿ**

A: ä¸æ˜¯ã€‚å­¦ä¹ æœºåˆ¶æ˜¯å¯é€‰çš„ï¼š
- æ ¸å¿ƒï¼šè¯æ®å¼æ£€æŸ¥ï¼ˆå¿…é¡»ï¼‰
- å¢å¼ºï¼šæ¸è¿›å¼éªŒè¯ï¼ˆå¼ºçƒˆæ¨èï¼‰
- å¯é€‰ï¼šå­¦ä¹ æœºåˆ¶ï¼ˆé«˜ä»·å€¼ï¼Œä½†å¯ä»¥åæœŸå†åŠ ï¼‰

å…ˆå…³æ³¨æ ¸å¿ƒåŠŸèƒ½ï¼Œç¨³å®šåå†åŠ å­¦ä¹ æœºåˆ¶ã€‚

---

## ç»“è¯­

TAD v3.1æ˜¯åŸºäº**çœŸå®é¡¹ç›®å®è¯**çš„æ–¹æ³•è®ºå‡çº§ï¼Œä¸æ˜¯çº¸ä¸Šè°ˆå…µï¼š
- âœ… è¯†åˆ«äº†v3.0çš„**5å¤§æ ¹æœ¬æ€§é—®é¢˜**
- âœ… æå‡ºäº†**ä¸‰å¤§æ”¯æŸ±è§£å†³æ–¹æ¡ˆ**
- âœ… è®¾è®¡äº†**åˆ†é˜¶æ®µå®æ–½è·¯çº¿**
- âœ… æä¾›äº†**å®Œæ•´é…ç½®å’Œæ¨¡æ¿**
- âœ… å»ºç«‹äº†**é£é™©ç®¡ç†å’Œå›æ»šæœºåˆ¶**

### æ ¸å¿ƒä»·å€¼æ‰¿è¯º

**è´¨é‡æå‡**ï¼š
- 95%+é—®é¢˜æ‹¦æˆªç‡ï¼ˆå½“å‰0-30%ï¼‰
- 70-85%è¿”å·¥æ—¶é—´èŠ‚çœ
- è‡ªåŠ¨å­¦ä¹ é—­ç¯ï¼ˆç³»ç»Ÿè¶Šç”¨è¶Šèªæ˜ï¼‰

**Humanæˆé•¿**ï¼š
- å»ºç«‹æŠ€æœ¯å†³ç­–ç›´è§‰
- åŸ¹å…»ç³»ç»Ÿæ€§æ€ç»´
- ç§¯ç´¯å¯å¤ç”¨çŸ¥è¯†

**æ—¶é—´æŠ•å…¥**ï¼š
- æ¯ä¸ªåŠŸèƒ½30-60åˆ†é’Ÿ
- ROI: 1:5åˆ°1:10

### ç«‹å³å¼€å§‹

```bash
cd /Users/sheldonzhao/programs/TAD
echo "å‡†å¤‡å¼€å§‹TAD v3.1å‡çº§"
echo "1. é˜…è¯»å®Œæœ¬æ–‡æ¡£ âœ…"
echo "2. æ‰§è¡Œç¬¬ä¹éƒ¨åˆ†'30åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨' â†’"
```

ç¥æ‚¨çš„TADä¹‹æ—…è¶Šæ¥è¶Šå¥½ï¼ğŸš€

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åˆ›å»ºæ—¥æœŸ**: 2025-11-25
**ä½œè€…**: ç»¼åˆä¸‰ä»½æ ¸å¿ƒæ–‡æ¡£
**ä¸‹æ¬¡æ›´æ–°**: æ ¹æ®Phase 1è¯•ç‚¹åé¦ˆè°ƒæ•´

---

## é™„å½•ï¼šç›¸å…³æ–‡æ¡£

- ğŸ“„ TAD_METHODOLOGY_IMPROVEMENT_ANALYSIS.md - é—®é¢˜è¯Šæ–­
- ğŸ“„ TAD_V3.1_DETAILED_IMPLEMENTATION_GUIDE.md - è¯¦ç»†å®æ–½
- ğŸ“„ TAD_LEARNING_ENHANCEMENT_SPEC.md - å­¦ä¹ æœºåˆ¶
- ğŸ“„ æœ¬æ–‡æ¡£ï¼šTAD_V3.1_COMPREHENSIVE_UPGRADE_PLAN.md - ç»¼åˆæ–¹æ¡ˆ
